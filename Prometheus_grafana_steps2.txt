     +--------------------------------------------------------------------+
     ¦                • MobaXterm Personal Edition v25.0 •                ¦
     ¦              (X server, SSH client and network tools)              ¦
     ¦                                                                    ¦
     ¦ ? Your computer drives are accessible through the /drives path     ¦
     ¦ ? Your DISPLAY is set to 192.168.62.60:0.0                         ¦
     ¦ ? When using SSH, your remote DISPLAY is automatically forwarded   ¦
     ¦ ? Each command status is specified by a special symbol (? or ?)    ¦
     ¦                                                                    ¦
     ¦ • Important:                                                       ¦
     ¦ This is MobaXterm Personal Edition. The Professional edition       ¦
     ¦ allows you to customize MobaXterm for your company: you can add    ¦
     ¦ your own logo, your parameters, your welcome message and generate  ¦
     ¦ either an MSI installation package or a portable executable.       ¦
     ¦ We can also modify MobaXterm or develop the plugins you need.      ¦
     ¦ For more information: https://mobaxterm.mobatek.net/download.html  ¦
     +--------------------------------------------------------------------+

 ? 2025-02-24 ? ? 12:12.22 ? ? /home/mobaxterm ? ssh touadmin@192.168.61.138
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-126-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Mon Feb 24 12:12:33 PM IST 2025

  System load:  0.0                Processes:              219
  Usage of /:   31.0% of 47.88GB   Users logged in:        1
  Memory usage: 15%                IPv4 address for ens34: 192.168.61.138
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

39 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


*** System restart required ***
Last login: Wed Feb 19 16:32:22 2025 from 192.168.62.60
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$ ps -ef | grep mongo
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
mongodb  2461894       1  1 Feb04 ?        09:02:48 /mongo/bin/mongod --config /mongo/mongod.conf
touadmin 3875152 3875138  0 12:12 pts/0    00:00:00 grep --color=auto mongo
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$ ps -ef | grep prometheus
root       93190       1  0  2024 ?        00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root       93191   93190  0  2024 pts/2    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root       93192   93191  0  2024 pts/2    01:53:09 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
touadmin 3875155 3875138  0 12:13 pts/0    00:00:00 grep --color=auto prometheus
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$ vi /etc/prometheus/prometheus.yml
touadmin@dev-mongodb-poc3:~$ ^M
: command not found
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$ history
    1  hostaname
    2  hostname
    3  sudo apt update
    4  cd /
    5  ls
    6  sudo mkdir mongo
    7  cd mongo/
    8  sudo mkdir data
    9  sudo mkdir logs
   10  ls
   11  cd
   12  sudo apt install nfs-kernel-server
   13  sudo systemctl status nfs-kernel-server.service
   14  sudo apt update
   15  sudo apt install nfs-common
   16  sudo mount -t nfs 192.168.63.143:/mongo_prod1/data /mongo/data/
   17  df -h
   18  sudo mount -t nfs 192.168.63.143:/mongo_prod1/logs /mongo/logs/
   19  df -h
   20  sudo nano /etc/fstab
   21  df -h
   22  hostnamectl
   23  sudo hostnamectl set-hostname dev-mongodb-poc3
   24  sudo nano /etc/hostname
   25  sudo nano /etc/hosts
   26  sudo rebbot
   27  sudo reboot
   28  cd
   29  sudo apt update
   30  sudo adduser venkat
   31  sudo usermod -aG sudo venkat
   32  su venkat
   33  cat /etc/mongod.conf
   34  exit
   35  cat /etc/mongod.conf
   36  exit
   37  clear
   38  df -h
   39  cd /mongo/data
   40  ls
   41  clear
   42  df -h
   43  ps -efa | grep mongo
   44  cat /etc/lsb-release
   45  sudo apt update
   46  sudo wget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo tee /etc/apt/trusted.gpg.d/mongodb.asc
   47  sudo echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list
   48  deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse
   49  sudo echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list
   50  ===============================
   51  sudo apt update
   52  sudo apt-get install -y gnupg curl
   53  sudo curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | sudo gpg --dearmor -o /usr/share/keyrings/mongodb-server-8.0.gpg
   54  sudo apt-get update
   55  sudo apt-get install -y mongodb-org
   56  chmod sudo chown -R mongodb:mongodb /mongo/data
   57  sudo chown -R mongodb:mongodb /mongo/data
   58  sudo chown -R mongodb:mongodb /mongo/logs
   59  sudo cat /etc/mongod.conf | grep dbPath
   60  sudo cat /etc/mongod.conf | grep path
   61  sudo vi /etc/mongod.conf
   62  sudo cat /etc/mongod.conf | grep dbPath
   63  sudo cat /etc/mongod.conf | grep path
   64  sudo cat /etc/mongod.conf | grep bindIp
   65  sudo vi /etc/mongod.conf
   66  sudo cat /etc/mongod.conf | grep bindIp
   67  sudo systemctl enable mongod
   68  sudo systemctl start mongod
   69  sudo systemctl status mongod
   70  mongosh
   71  ll -lhrt
   72  cd ../logs/
   73  ls
   74  exit
   75  clear
   76  cd /tmp
   77  ls
   78  cd /etc/ssl/
   79  ls
   80  sudo mkdir mongodb
   81  ls
   82  cd mongodb/
   83  ls
   84  sudo mv /tmp/mongo-keyfile /etc/ssl/mongodb/
   85  ls
   86  sudo vi /etc/mongod.conf
   87  sudo cat /etc/mongod.conf  | grep replSetName
   88  chmod 600 /etc/ssl/mongodb/mongo-keyfile
   89  sudo chown mongodb:mongodb /etc/ssl/mongodb/mongo-keyfile
   90  sudo vi /etc/mongod.conf
   91  sudo systemctl start mongod
   92  sudo systemctl status mongod
   93  mongosh
   94  sudo systemctl restart  mongod
   95  mongosh -u superAdmin -p
   96  clear
   97  mongosh -u superAdmin -p
   98  vi /etc/mongod.conf
   99  mongosh -u superAdmin -p
  100  sudo mkdir /mongo/mongoscripts
  101  chown -R mongodb:mongodb /mongo/mongoscripts/
  102  sudo chown -R mongodb:mongodb /mongo/mongoscripts/
  103  cd /mongo/mongoscripts/
  104  ll -lhrt
  105  sudo chown -R touadmin:touadmin /mongo/mongoscripts/
  106  ll -lhrt
  107  sudo chown -R mongodb:mongodb /mongo/mongoscripts/
  108  cd /mongo/logs/
  109  ll -lhrt
  110  cd ..
  111  ll -lhrt
  112  sudo chown -R mongodb:mongodb /mongo/mongoscripts/
  113  sudo chown -R mongodb:mongodb /mongo
  114  l- lhrt
  115  ll- lhrt
  116  ll -lhrt
  117  sh /mongo/mongoscripts/mongo_log_rotation.sh
  118  sudo sh /mongo/mongoscripts/mongo_log_rotation.sh
  119  cd /mongo/logs/
  120  ll -lhrt
  121  sudo rm -rf mongod.log.2024-11-29T10-16-45
  122  ll -lhrt
  123  sudo visudo
  124  crontab -l
  125  crontab -e
  126  crontab -l
  127  crontab -e
  128  crontab -l
  129  sudo visudo
  130  ll -lhrt
  131  crontab -l
  132  ll -lhrt
  133  crontab -e
  134  sudo rm -rf mongod.log.2024-11-29T10-36-01.gz mongod.log.2024-11-29T10-35-01.gz mongod.log.2024-11-29T10-34-01.gz mongod.log.2024-11-29T10-33-01.gz mongod.log.2024-11-29T10-32-02.gz mongod.log.2024-11-29T10-31-01.gz mongod.log.2024-11-29T10-30-01.gz mongod.log.2024-11-29T10-29-01.gz mongod.log.2024-11-29T10-28-01.gz mongod.log.2024-11-29T10-27-01.gz
  135  ll -lhrt
  136  crontab -l
  137  ll -lhrt
  138  sudo visudo
  139  sudo vi /mongo/mongoscripts/mongo_log_rotation.sh
  140  crontab -l
  141  sudo vi /mongo/mongoscripts/mongo_log_rotation.sh
  142  exit
  143  cd /mongo/logs/
  144  ll -lhrt
  145  mongosh
  146  mongosh -u superAdmin -p
  147  cd /mongo/
  148  ls
  149  clear
  150  sudo mkdir /mongo/mongobackups
  151  cd /mongo/mongobackups/
  152  cd ../mongoscripts/
  153  ls
  154  sudo chmod -R 755 /mongo/mongobackups
  155  sudo chown -R touadmin. /mongo/mongobackups
  156  l -lhrt
  157  rm -rf mongo_log_rotation.sh
  158  sudo rm -rf mongo_log_rotation.sh
  159  ll -lhrt
  160  sudo mv /tmp/mongo_log_rotation.sh /mongo/mongoscripts/
  161  crontab -e
  162  ls
  163  sudo vi mongo_log_rotation.sh
  164  crontab -e
  165  crontab -l
  166  crontab -e
  167  crontab -l
  168  crontab -e
  169  crontab -l
  170  crontab -e
  171  crontab -l
  172  crontab -e
  173  crontab -l
  174  ll -lhrt
  175  ll- lhrt
  176  ll -lhrt
  177  mv /tmp/mongodb_daily_backup.sh /mongo/mongoscripts/
  178  sudo mv /tmp/mongodb_daily_backup.sh /mongo/mongoscripts/
  179  ll -lhrt
  180  vi mongodb_daily_backup.sh
  181  exit
  182  clear
  183  systemctl status mongod
  184  systemctl stop mongod
  185  systemctl status mongod
  186  sudo systemctl status mongod
  187  sudo systemctl stop mongod
  188  sudo apt-get purge mongodb-org*
  189  cd /mongo/
  190  l -lhrt
  191  ll -lhrt
  192  cd logs/
  193  ll -lhrt
  194  gzip mongod.log
  195  sudo gzip mongod.log
  196  ll -lhrt
  197  mv mongod.log.gz mongod.log.2024-12-03T00-00-01.gz
  198  sudo mv mongod.log.gz mongod.log.2024-12-03T00-00-01.gz
  199  ll -lhrt
  200  cd ../data/
  201  ll -lhrt
  202  sudo rm -r collection-2-16445857119155385604.wt
  203  ll -lhrt
  204  sudo rm -r *.wt
  205  ll -lhrt
  206  sudo rm -r WiredTiger storage.bson WiredTiger.lock  mongod.lock
  207  ll -lhrt
  208  sudo rm -r WiredTiger.turtle journal/ diagnostic.data/
  209  ll -lhrt
  210  sudo deluser --remove-home mongodb
  211  sudo delgroup mongodb
  212  sudo apt-get update
  213  sudo rm /etc/apt/sources.list.d/mongodb-org-*.list
  214  sudo rm /etc/apt/trusted.gpg.d/mongodb.asc
  215  sudo rm /usr/share/keyrings/mongodb-server-8.0.gpg
  216  sudo rm /etc/apt/trusted.gpg.d/mongodb.asc
  217  sudo rm /usr/share/keyrings/mongodb-server-8.0.gpg
  218  systemctl status mongod
  219  ll -lhrt
  220  cd ..
  221  ll -lhrt
  222  sudo apt update
  223  sudo apt-get install -y gnupg curl
  224  sudo curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | sudo gpg --dearmor -o /usr/share/keyrings/mongodb-server-8.0.gpg
  225  sudo echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list
  226  sudo cp /etc/mongod.conf /mongo/mongod.conf
  227  sudo vi /mongo/mongod.conf
  228  sudo chown mongodb:mongodb /mongo/mongod.conf
  229  sudo groupadd mongodb
  230  sudo mkdir /mongo/home
  231  sudo apt update
  232  sudo apt-get install -y gnupg curl
  233  sudo curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | sudo gpg --dearmor -o /usr/share/keyrings/mongodb-server-8.0.gpg
  234  cd /mongo/
  235  ll -lhrt
  236  sudo echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list sudo apt-get update
  237  sudo apt-get update
  238  sudo apt-get install -y mongodb-org
  239  sudo groupadd mongodb
  240  sudo useradd -r -g mongodb -d /mongo/home -s /usr/sbin/nologin mongodb
  241  sudo chown -R mongodb:mongodb /mongo/home
  242  sudo vi /mongo/mongod.conf
  243  sudo chown mongodb:mongodb /mongo/mongod.conf
  244  sudo chmod 600 /mongo/mongod.conf
  245  sudo chown -R mongodb:mongodb /mongo/data
  246  sudo chown -R mongodb:mongodb /mongo/logs
  247  sudo vi /lib/systemd/system/mongod.service
  248  sudo mkdir -p /mongo/bin
  249  sudo mv /usr/bin/mongod /mongo/bin/
  250  sudo mv /usr/bin/mongos /mongo/bin/
  251  sudo mv /usr/bin/mongo* /mongo/bin/
  252  echo 'export PATH=/mongo/bin:$PATH' | sudo tee -a /etc/profile source /etc/profile
  253  echo $PATH which mongod
  254  echo $PATH
  255  which mongod
  256  echo 'export PATH=/mongo/bin:$PATH' | sudo tee -a /etc/profile
  257  source /etc/profile
  258  echo $PATH
  259  which mongod
  260  sudo vi /lib/systemd/system/mongod.service
  261  sudo cat /lib/systemd/system/mongod.service | grep ExecStart
  262  sudo systemctl daemon-reload
  263  sudo systemctl start mongod
  264  sudo systemctl enable mongod
  265  sudo systemctl status mongod
  266  vi /mongo/mongod.conf
  267  sudo vi /mongo/mongod.conf
  268  sudo mv /tmp/mongo-keyfile /mongo/
  269  ll | grep mongo-keyfile
  270  sudo chown mongodb:mongodb /mongo/mongo-keyfile
  271  sudo chmod 400 /mongo/mongo-keyfile
  272  sudo systemctl restart mongod
  273  sudo systemctl status mongod
  274  mongosh
  275  mongosh -u superAdmin -p
  276  ps -ef | grep mongo
  277  vi /mongo/mongod.conf
  278  sudo vi /mongo/mongod.conf
  279  mongosh -u superAdmin -p
  280  sudo adduser shivad
  281  sudo usermod -aG dbadmins shivad
  282  sudo groupadd dbadmins
  283  sudo usermod -aG dbadmins shivad
  284  groups shivad
  285  sudo adduser venkata
  286  sudo usermod -aG dbadmins venkata
  287  groups venkata
  288  sudo chown -R mongodb:dbadmins /mongo/data
  289  sudo chown -R mongodb:dbadmins /mongo/logs
  290  sudo chown mongodb:dbadmins /mongo/mongod.conf
  291  sudo chown mongodb:dbadmins /mongo/mongo-keyfile
  292  sudo chmod 770 /mongo/data
  293  sudo chmod 770 /mongo/logs
  294  sudo chmod 660 /mongo/mongod.conf
  295  sudo chmod 660 /mongo/mongo-keyfile
  296  sudo visudo
  297  sudo systemctl restart mongod
  298  sudo systemctl status mongod
  299  su - venkata
  300  exit
  301  sudo visudo
  302  ps -ef | grep mongod
  303  ps -ef | grep mongo
  304  sudo chown -R mongodb:dbadmins /mongo/logs/
  305  sudo chmod 770 /mongo/logs/
  306  sudo systemctl status mongod
  307  sudo systemctl restart mongod
  308  sudo systemctl status mongod
  309  cd /
  310  ll -lhrt
  311  cd mongo/
  312  ll -lhrt
  313  sudo cd /mongo/logs/
  314  sudo su -
  315  sudo systemctl restart mongod
  316  sudo systemctl status mongod
  317  cat /mongo/logs/mongod.log
  318  sudo cat /mongo/logs/mongod.log
  319  sudo chmod 400 /mongo/mongo-keyfile
  320  sudo chown mongodb:mongodb /mongo/mongo-keyfile
  321  sudo systemctl restart mongod
  322  sudo systemctl status mongod
  323  sudo visudo
  324  exit
  325  groups venkata
  326  sudo chown mongodb:dbadmins /mongo/mongo-keyfile
  327  sudo chmod 400 /mongo/mongo-keyfile
  328  sudo tail -f /mongo/logs/mongod.log
  329  groups shivad
  330  groups venkata
  331  ls -ld /mongo/data
  332  ls -ld /mongo/logs
  333  ls -l /mongo/mongod.conf
  334  ls -l /mongo/mongo-keyfile
  335  crontab -l
  336  crontab -e
  337  crontab -l
  338  vi /mongo/mongoscripts/mongo_log_rotation.sh
  339  vi /mongo/mongoscripts/mongodb_daily_backup.sh
  340  sudo apt-get install acl
  341  getfacl /mongo/logs/
  342  sudo -u venkata ls -ld /mongo/logs/
  343  exit
  344  clear
  345  sudo apt update
  346  df -h
  347  sudo su -
  348  exit
  349  sudo su -
  350  exit
  351  clear
  352  ps -ef | grep mongo
  353  cd /mongo/logs/
  354  su venkata
  355  crontab -l
  356  cd /mongo/logs/
  357  sudo cd /mongo/logs/
  358  cd /mongo/mongoscripts/
  359  ll -lhrt
  360  vi mongo_log_rotation.sh
  361  ls
  362  hostname -U
  363  hostname -I
  364  ls
  365  systemctl status mongodb-exporter.service
  366  sudo nano /etc/systemd/system/mongodb_exporter.service\
  367  sudo nano /etc/systemd/system/mongodb_exporter.service
  368  ls
  369  systemctl status mongodb-exporter.service
  370  systemctl daemon-reload
  371  hostname -I
  372  sudo rm -f /usr/local/bin/mongodb_exporter
  373  sudo systemctl stop mongodb_exporter
  374  sudo systemctl disable mongodb_exporter
  375  sudo systemctl daemon-reload
  376  sudo rm -f /usr/local/bin/mongodb_exporter
  377  ps aux | grep mongodb_exporter
  378  sytemctl status mongodb.serls
  379  ls
  380  rm -rf mongodb_exporter-0.40.0.linux-amd64
  381  rm -rf mongodb_exporter-0.40.0.linux-amd64.tar.gz
  382  ls
  383  sudo apt-get install -y gnupg curl
  384  curl -fsSL https://www.percona.com/downloads/RPM-GPG-KEY-percona | sudo gpg --dearmor -o /usr/share/keyrings/percona.gpg
  385  ls
  386  echo "deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/percona.list
  387  sudo apt-get update
  388  sudo apt-get install -y percona-mongodb-exporter
  389  cat /etc/apt/sources.list.d/percona.list
  390  deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt <distribution> main
  391  lsb_release -cs
  392  deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt jammy main
  393  +echo "deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt jammy main" | sudo tee /etc/apt/sources.list.d/percona.list
  394  echo "deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt jammy main" | sudo tee /etc/apt/sources.list.d/percona.list
  395  wget https://repo.percona.com/apt/percona-release.gpg -O /usr/share/keyrings/percona.gpg
  396  sudo wget https://repo.percona.com/apt/percona-release.gpg -O /usr/share/keyrings/percona.gpg
  397  wget https://repo.percona.com/apt/percona-key.gpg -O /usr/share/keyrings/percona.gpg
  398  sudo wget https://repo.percona.com/apt/percona-key.gpg -O /usr/share/keyrings/percona.gpg
  399  wget https://github.com/percona/mongodb_exporter/releases/latest/download/mongodb_exporter.tar.gz
  400  sudo wget https://repo.percona.com/apt/percona-key.gpg -O /usr/share/keyrings/percona.gpg
  401  wget https://github.com/percona/mongodb_exporter/releases/download/v0.33.0/mongodb_exporter-0.33.0.linux-amd64.tar.gz
  402  tar -xvf mongodb_exporter-0.33.0.linux-amd64.tar.gz
  403  mongodb_exporter --version
  404  curl -LO https://github.com/percona/mongodb_exporter/releases/download/v0.43.0/mongodb_exporter-0.43.0.linux-amd64.tar.gz
  405  ls
  406  rm -rf mongodb_exporter-0.33.0.linux-amd64.tar.gz
  407  rm -rf mongodb_exporter-0.33.0.linux-amd64
  408  ls
  409  tar -xvzf mongodb_exporter-0.43.0.linux-amd64.tar.gz
  410  cd mongodb_exporter-0.43.0.linux-amd64/
  411  ls
  412  sudo mv mongodb_exporter /usr/local/bin/
  413  mongodb.uri='mongodb://prometheus_user:4gr@fanA@localhost:27017/admin'
  414  mongodb_exporter --version
  415  sudo nano /etc/systemd/system/mongodb_exporter.service
  416  sudo systemctl enable mongodb_exporter
  417  sudo systemctl start mongodb_exporter
  418  systemctl daemon-reload
  419  systemctl status mongodb_exporter.service\
  420  systemctl status mongodb_exporter.service
  421  systemctl status mongodb-exporter.service
  422  curl http://192.168.63.109:9216/metrics
  423  systemctl status mongodb mongodb-exporter.service
  424  cd /usr/local/bin/
  425  ls
  426  cd
  427  systemctl status  mongodb_exporter.service
  428  cd /etc/systemd/system/
  429  ls
  430  rm -rf mongodb_exporter.service
  431  sudo rm -rf mongodb_exporter.service
  432  systemctl status  mongodb
  433  ls
  434  sudo systemctl disable  mongodb_exporter.service
  435  sudo systemctl stop mongodb_exporter.service
  436  sudo systemctl daemon-reload
  437  sudo systemctl stop mongodb-
  438  sudo systemctl stop mongodb-exporter.service
  439  sudo systemctl start mongodb-exporter.service
  440  sudo systemctl enable mongodb-exporter.service
  441  sudo systemctl daemon-reload
  442  sudo systemctl status mongodb-exporter.service
  443  curl http://192.168.63.109:9216/metrics
  444  hostname -I
  445  curl http://192.168.63.109:9216/metrics
  446  hostname -I
  447  cd /etc/systemd/system/
  448  ls
  449  cat mongodb-exporter.service
  450  vi mongodb-exporter.service
  451  sudo vi mongodb-exporter.service
  452  sudo systemctl daemon-reload
  453  sudo systemctl restart mongodb-exporter.service
  454  hostname -I
  455  sudo systemctl restart mongodb-exporter.service
  456  sudo nano /etc/systemd/system/mongodb_exporter.service
  457  ls
  458  vi mongodb-ex
  459  sudo vi mongodb-exporter.service
  460  sudo nano mongodb-exporter.service
  461  sudo systemctl daemon-reload
  462  sudo systemctl restart mongodb-exporter.service
  463  sudo systemctl enable mongodb-exporter.service
  464  sudo systemctl status mongodb-exporter.service
  465  curl http://192.168.63.109:9216/metrics
  466  ls
  467  sudo su -
  468  ssh 192.168.61.135
  469  ssh 192.168.61.136
  470  exit
  471  cd /tmp
  472  ll -lhrt
  473  rm -rf mongodb-mms-8.0.2.500.20241205T1612Z.tar.gz.filepart
  474  ll -lhrt
  475  cd /mongo/
  476  ll -lhrt
  477  mongosh -u superAdmin -p
  478  mongosh -u superAdmin -p --host 192.168.61.13
  479  mongosh -u superAdmin -p --host 192.168.61.135
  480  sudo vi /mongo/opsmanager/mongodb-mms/conf/conf-mms.properties
  481  mongosh -u superAdmin -p --host 192.168.61.135
  482  mongosh -u superAdmin -p
  483  sudo su -
  484  exit
  485  sudo apt update && sudo apt upgrade -y
  486  sudo apt install curl gnupg -y
  487  sudo ufw allow 8080/tcp
  488  sudo ufw allow 27017/tcp
  489  sudo ufw enable
  490  mongo --eval "db.serverStatus()"
  491  mongosh --eval "db.serverStatus()"
  492  mongosh -u superAdmin -p --eval "db.serverStatus()"
  493  cd /mongo/
  494  ls
  495  sudo mkdir opsmanager
  496  cd opsmanager/
  497  cd ..
  498  chmod -R 777 opsmanager/
  499  sudo chmod -R 777 opsmanager/
  500  cd opsmanager/
  501  wget https://downloads.mongodb.com/on-prem-mms/rpm/latest/mongodb-mms-<version>.tar.gz
  502  wget https://downloads.mongodb.com/on-prem-mms/rpm/latest/mongodb-mms-8.0.4.tar.gz
  503  sudo wget https://downloads.mongodb.com/on-prem-mms/rpm/latest/mongodb-mms-8.0.4.tar.gz
  504  sudo wget https://www.mongodb.com/try/download/ops-manager#mongodb-ops-manager-download
  505  ls
  506  sudo wget https://downloads.mongodb.com/on-prem-mms/tar/mongodb-mms-8.0.2.500.20241205T1612Z.tar.gz
  507  ll -lhrt
  508  pwd
  509  tar -xvzf mongodb-mms-8.0.2.500.20241205T1612Z.tar.gz
  510  ls
  511  cd mongodb-mms/
  512  ls
  513  cd bin/
  514  ls
  515  ./start-mongodb-mms
  516  ./mms-gen-key
  517  sudo ./mms-gen-key
  518  ls
  519  ./start-mongodb-mms --enc-key-path /mms.key
  520  sh mms-gen-key
  521  sudo sh mms-gen-key
  522  ./start-mongodb-mms --enc-key-path ./mms.key
  523  pwd
  524  ls
  525  ./mms-gen-key
  526  ls -l /etc/mongodb-mms/gen.key
  527  sudo chmod 600 /etc/mongodb-mms/gen.key
  528  sudo chown <your-username>:<your-group> /etc/mongodb-mms/gen.key
  529  sudo chown mongodb:mongodb /etc/mongodb-mms/gen.key
  530  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  531  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key \
  532  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@127.0.0.1:27017/?authSource=admin
  533  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@192.168.61.135:27017/?authSource=admin
  534  ls /etc/mongodb-mms/
  535  sudo nano /etc/mongodb-mms/config.conf
  536  sudo find / -name "config.conf"
  537  cd ..
  538  ls
  539  cd conf/
  540  ls
  541  cd ..
  542  cd bin/
  543  ls
  544  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@192.168.61.188:27017/?authSource=admin
  545  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@192.168.61.138:27017/?authSource=admin
  546  pwd
  547  sudo vi /etc/mongodb-mms/config.con
  548  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  549  cd ..
  550  cd conf/
  551  ls
  552  vi conf-mms.properties
  553  cd ../bin/
  554  pwd
  555  vi /mongo/opsmanager/mongodb-mms/conf/conf-mms.properties
  556  vi /etc/
  557  sudo vi /etc/mongodb-mms/config.con
  558  sudo mv /etc/mongodb-mms/config.con /etc/mongodb-mms/config.conf
  559  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  560  systemctl status mongod
  561  systemctl stop mongod
  562  sudo systemctl stop mongod
  563  vi /etc/mongod.conf
  564  cd /mongo/data/
  565  sudo cd /mongo/data/
  566  sudo su
  567  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  568  mongosh
  569  mongosh -u superAdmin
  570  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  571  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@127.0.0.1:27017/?authSource=admin
  572  pwd
  573  sudo ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  574  ps -ef | grep mongo
  575  sudo ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  576  sudo netstat -tulnp | grep 27017
  577  sudo ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  578  vi /etc/mongodb-mms/gen.key
  579  sudo vi /etc/mongodb-mms/gen.key
  580  sudo vi /etc/mongodb-mms/config.conf
  581  pwd
  582  cd .
  583  cd ..
  584  ls
  585  cd conf/
  586  ls
  587  vi mms.conf
  588  ls
  589  vi conf-mms.properties
  590  cd ../bin/
  591  sudo ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  592  sudo ./start-mongodb-mms start
  593  mongodb-mms start
  594  ls
  595  ./mongodb-mms start
  596  sudo systemctl status mongod
  597  sudo netstat -tuln | grep 27017
  598  ping 198.168.61.138
  599  telnet 198.168.61.138 27017
  600  nc -zv 198.168.61.138 27017
  601  tail -f /mongo/opsmanager/mongodb-mms/logs/mms0.log
  602  sudo ufw allow 27017
  603  ./mongodb-mms start
  604  vi /mongo/opsmanager/mongodb-mms/config
  605  cd /mongo/opsmanager/mongodb-mms/
  606  ls
  607  cd conf/
  608  ls
  609  vi mms.conf
  610  vi conf-mms.properties
  611  sudo systemctl status mongod
  612  sudo systemctl stop mongod
  613  vi /mongo/mongod.conf
  614  ps -ef | grep mongo
  615  sudo vi /mongo/mongod.conf
  616  sudo systemctl start mongod
  617  mongosh
  618  mongosh -u admin
  619  mongosh -u superAdmin
  620  cd /mongo/
  621  ll -lhrt
  622  sudo rm -rf opsmanager/
  623  ll -lhrt
  624  cd /etc/
  625  ls
  626  exit
  627  ps -ef | grep mongo
  628  mongosh -u superAdmin -p
  629  exitxit
  630  exit
  631  ssh https://grafana.toucanint.com/
  632  ssh grafana.toucanint.com/
  633  ssh grafana.toucanint.com
  634  exit
  635  cd /etc/prometheus/
  636  ls
  637  vi prometheus.html
  638  cd
  639  cd /etc/systemd/system/
  640  ls
  641  vi mongodb-exporter.service
  642  sudo vi /etc/hosts
  643  ping grafana.toucandev.com
  644  sudo nano /etc/grafana/grafana.ini
  645  sudo vi  /etc/grafana/grafana.ini
  646  sudo systemctl restart grafana-server
  647  sudo vi /etc/hosts
  648  sudo ufw status
  649  sudo vi  /etc/grafana/grafana.ini
  650  sudo systemctl restart grafana-server
  651  sudo vi  /etc/grafana/grafana.ini
  652  sudo vi /etc/hosts
  653  nslookup  grafanatoucandev.com
  654  sudo ufw allow 80/tcp
  655  sudo netstat -tuln | grep 3000
  656  sudo systemctl restart grafana-server
  657  sudo journalctl -u grafana-server
  658  sudo vi /etc/hosts
  659  sudo vi  /etc/grafana/grafana.ini
  660  sudo systemctl restart grafana-server
  661  sudo vi  /etc/grafana/grafana.ini
  662  sudo vi /etc/hosts
  663  sudo systemctl restart grafana-server
  664  sudo vi /etc/hosts
  665  hostname
  666  hostname -i
  667  sudo vi  /etc/grafana/grafana.ini
  668  curl -I http://grafana.toucandev.com:3000
  669  sudo vi  /etc/grafana/grafana.ini
  670  sudo vi /etc/hosts
  671  sudo systemctl restart grafana-server
  672  curl -I http://grafana.toucandev.com:3000
  673  sudo netstat -tuln | grep 3000
  674  cat /etc/grafana/grafana.ini | grep http_addr
  675  sudo cat /etc/grafana/grafana.ini | grep http_addr
  676  sudo systemctl restart grafana-server
  677  curl -I http://192.168.61.138:3000
  678  curl -I http://grafana.toucandev.com:3000
  679  sudo ufw reload
  680  sudo ufw status
  681  hostname -I
  682  ps -ef | grep mongo
  683  sudo vi  /etc/grafana/grafana.ini
  684  sudo vi /etc/hosts
  685  ps -ef | grep mongo
  686  history
  687  exit
  688  ls
  689  hostaname -I
  690  hostname -I
  691  systemctl status node_exporter.service
  692  df -h
  693  ps -ef | grep mongod
  694  systemcrl status mongodb_ecporter
  695  systemcrl status mongodb_exporter
  696  systemctl status mongodb_exporter
  697  systemctl status mongodb
  698  systemctl status exporter
  699  ps -ef | grep mongo
  700  ps -ef | grep prometheus
  701  vi /etc/prometheus/prometheus.yml
  702
  703  history
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$ sudo su -
[sudo] password for touadmin:
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep mongo
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
mongodb  2461894       1  1 Feb04 ?        09:03:14 /mongo/bin/mongod --config /mongo/mongod.conf
root     3875350 3875339  0 12:38 pts/3    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep prometheus
root       93190       1  0  2024 ?        00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root       93191   93190  0  2024 pts/2    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root       93192   93191  0  2024 pts/2    01:53:11 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875352 3875339  0 12:38 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# kill -9 93190
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875355 3875339  0 12:38 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875357 3875339  0 12:38 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
nohup: ignoring input and appending output to 'nohup.out'




root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875382 3875339  0 12:39 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# history | grep prometheus
  218  wget https://github.com/prometheus/prometheus/releases/download/v2.39.4/prometheus-2.39.4.linux-amd64.tar.gz
  219  tar xvf prometheus-2.39.4.linux-amd64.tar.gz
  220  sudo mv prometheus-2.39.4.linux-amd64/prometheus /usr/local/bin/
  221  wget https://github.com/prometheus/prometheus/releases/download/v2.39.4/prometheus-2.39.4.linux-amd64.tar.gz
  223  wget https://github.com/prometheus/prometheus/releases/download/v2.40.0/prometheus-2.40.0.linux-amd64.tar.gz
  225  tar xvf prometheus-2.40.0.linux-amd64.tar.gz
  226  sudo mv prometheus-2.40.0.linux-amd64/prometheus /usr/local/bin/
  227  sudo mv prometheus-2.40.0.linux-amd64/promtool /usr/local/bin/
  228  sudo mv prometheus-2.40.0.linux-amd64/consoles /etc/prometheus/
  229  sudo mv prometheus-2.40.0.linux-amd64/console_libraries /etc/prometheus/
  230  sudo mkdir -p /etc/prometheus
  231  sudo mkdir -p /var/lib/prometheus
  232  sudo nano /etc/prometheus/prometheus.yml
  233  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  234  ps -ef | grep prometheus
  266  sudo nano /etc/prometheus/prometheus.yml
  267  sudo systemctl restart prometheus
  268  /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  270  sudo systemctl restart prometheus
  271  sudo nano /etc/prometheus/prometheus.yml
  272  sudo systemctl restart prometheus
  273  /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  274  nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  278  wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz
  367  ps -ef | grep prometheus
  369  ps -ef | grep prometheus
  370  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  371  ps -ef | grep prometheus
  372  history | grep prometheus
root@dev-mongodb-poc3:~# sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
[1] 3875390
root@dev-mongodb-poc3:~# nohup: ignoring input and appending output to 'nohup.out'

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ls
nohup.out  snap
root@dev-mongodb-poc3:~# cat nohup.out
ts=2025-02-24T07:08:55.698Z caller=main.go:512 level=info msg="No time or size retention was set so using the default time retention" duration=15d
ts=2025-02-24T07:08:55.698Z caller=main.go:556 level=info msg="Starting Prometheus Server" mode=server version="(version=2.40.0, branch=HEAD, revision=c08d76b363f0d8052f3d2298df06b616af30900e)"
ts=2025-02-24T07:08:55.698Z caller=main.go:561 level=info build_context="(go=go1.19.3, user=root@79e0ee4d5b14, date=20221107-18:11:08)"
ts=2025-02-24T07:08:55.699Z caller=main.go:562 level=info host_details="(Linux 5.15.0-126-generic #136-Ubuntu SMP Wed Nov 6 10:38:22 UTC 2024 x86_64 dev-mongodb-poc3 (none))"
ts=2025-02-24T07:08:55.699Z caller=main.go:563 level=info fd_limits="(soft=1048576, hard=1048576)"
ts=2025-02-24T07:08:55.699Z caller=main.go:564 level=info vm_limits="(soft=unlimited, hard=unlimited)"
ts=2025-02-24T07:08:55.703Z caller=web.go:559 level=info component=web msg="Start listening for connections" address=0.0.0.0:9090
ts=2025-02-24T07:08:55.703Z caller=main.go:993 level=info msg="Starting TSDB ..."
ts=2025-02-24T07:08:55.704Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739037606839 maxt=1739102400000 ulid=01JKNTEZQHWH3AFZTJC2TMEDAT
ts=2025-02-24T07:08:55.704Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739102406839 maxt=1739167200000 ulid=01JKQR8GXF73KXV3GH9Q1HG0EP
ts=2025-02-24T07:08:55.704Z caller=tls_config.go:232 level=info component=web msg="Listening on" address=[::]:9090
ts=2025-02-24T07:08:55.705Z caller=tls_config.go:235 level=info component=web msg="TLS is disabled." http2=false address=[::]:9090
ts=2025-02-24T07:08:55.705Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739167206839 maxt=1739232000000 ulid=01JKSP227H6WMP5YYJ6GER76HD
ts=2025-02-24T07:08:55.705Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739232006839 maxt=1739296800000 ulid=01JKVKVKDPT3J1Q45PYCBBY5S0
ts=2025-02-24T07:08:55.705Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739296806839 maxt=1739361600000 ulid=01JKXHN4RST628JEX0E738HERR
ts=2025-02-24T07:08:55.705Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739361606839 maxt=1739426400000 ulid=01JKZFENY08N21QQ58HEZ2Z8SN
ts=2025-02-24T07:08:55.705Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739426406839 maxt=1739491200000 ulid=01JM1D877RYTZCT5RTTJZW1FN5
ts=2025-02-24T07:08:55.705Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739491206839 maxt=1739556000000 ulid=01JM3B1RD1PC2NMPDPHYV2BXM8
ts=2025-02-24T07:08:55.705Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739556006839 maxt=1739620800000 ulid=01JM58V9QPR4BZ1D0KYP4YPXY6
ts=2025-02-24T07:08:55.705Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739620806839 maxt=1739685600000 ulid=01JM76MTX2BXHG2S4SVVA7HCTH
ts=2025-02-24T07:08:55.706Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739685606839 maxt=1739750400000 ulid=01JM94EC86QD6EC36CJA8ZSMPG
ts=2025-02-24T07:08:55.706Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739750406839 maxt=1739815200000 ulid=01JMB27XGBWZZ5GY8BW1BVDY5W
ts=2025-02-24T07:08:55.706Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739815206839 maxt=1739880000000 ulid=01JMD01EQR158XDCW8GNDHBA7M
ts=2025-02-24T07:08:55.706Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739880006839 maxt=1739944800000 ulid=01JMEXTZYGABGXAEC3F0FP8280
ts=2025-02-24T07:08:55.706Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739944806839 maxt=1740009600000 ulid=01JMGVMH7CJQKD1CY9KQ49QFZ7
ts=2025-02-24T07:08:55.706Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740009606839 maxt=1740074400000 ulid=01JMJSE2EVMVXD16NTNFWA7G28
ts=2025-02-24T07:08:55.706Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740074406839 maxt=1740139200000 ulid=01JMMQ7KRNE3R15NBRQZBR1VP8
ts=2025-02-24T07:08:55.706Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740139206839 maxt=1740204000000 ulid=01JMPN14YEZ9WQ1RHKAHJC204G
ts=2025-02-24T07:08:55.707Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740204006839 maxt=1740268800000 ulid=01JMRJTP86VVEKS1K2J4RW0NPB
ts=2025-02-24T07:08:55.707Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740268806839 maxt=1740333600000 ulid=01JMTGM7ECWATJ7ZECFAFPZ9DE
ts=2025-02-24T07:08:55.707Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740355206839 maxt=1740362400000 ulid=01JMTYBNRJQ13W8WGM2R8NE4Z2
ts=2025-02-24T07:08:55.707Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740362406839 maxt=1740369600000 ulid=01JMV57D0NFC8SNS44V1F4V2KJ
ts=2025-02-24T07:08:55.707Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740333606839 maxt=1740355200000 ulid=01JMV57D4S11TQKEZEE6X9KXYD
ts=2025-02-24T07:08:55.707Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740369606839 maxt=1740376800000 ulid=01JMVC348H2TFQMTCMD4PZ21K9
ts=2025-02-24T07:08:55.735Z caller=head.go:561 level=info component=tsdb msg="Replaying on-disk memory mappable chunks if any"
ts=2025-02-24T07:08:55.737Z caller=head.go:605 level=info component=tsdb msg="On-disk memory mappable chunks replay completed" duration=1.829002ms
ts=2025-02-24T07:08:55.737Z caller=head.go:611 level=info component=tsdb msg="Replaying WAL, this may take a while"
ts=2025-02-24T07:08:55.743Z caller=head.go:647 level=info component=tsdb msg="WAL checkpoint loaded"
ts=2025-02-24T07:08:55.774Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=966 maxSegment=970
ts=2025-02-24T07:08:55.801Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=967 maxSegment=970
ts=2025-02-24T07:08:55.839Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=968 maxSegment=970
ts=2025-02-24T07:08:55.844Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=969 maxSegment=970
ts=2025-02-24T07:08:55.845Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=970 maxSegment=970
ts=2025-02-24T07:08:55.845Z caller=head.go:719 level=info component=tsdb msg="WAL replay completed" checkpoint_replay_duration=6.341171ms wal_replay_duration=101.472977ms wbl_replay_duration=227ns total_replay_duration=109.695623ms
ts=2025-02-24T07:08:55.847Z caller=main.go:1014 level=info fs_type=EXT4_SUPER_MAGIC
ts=2025-02-24T07:08:55.847Z caller=main.go:1017 level=info msg="TSDB started"
ts=2025-02-24T07:08:55.847Z caller=main.go:1197 level=info msg="Loading configuration file" filename=/etc/prometheus/prometheus.yml
ts=2025-02-24T07:08:55.848Z caller=main.go:1234 level=info msg="Completed loading of configuration file" filename=/etc/prometheus/prometheus.yml totalDuration=902.818µs db_storage=1.429µs remote_storage=1.473µs web_handler=1.128µs query_engine=808ns scrape=563.717µs scrape_sd=61.63µs notify=1.723µs notify_sd=1.81µs rules=1.83µs tracing=5.407µs
ts=2025-02-24T07:08:55.848Z caller=main.go:978 level=info msg="Server is ready to receive web requests."
ts=2025-02-24T07:08:55.848Z caller=manager.go:944 level=info component="rule manager" msg="Starting rule manager..."
ts=2025-02-24T07:09:06.192Z caller=main.go:828 level=warn msg="Received SIGTERM, exiting gracefully..."
ts=2025-02-24T07:09:06.192Z caller=main.go:852 level=info msg="Stopping scrape discovery manager..."
ts=2025-02-24T07:09:06.192Z caller=main.go:866 level=info msg="Stopping notify discovery manager..."
ts=2025-02-24T07:09:06.192Z caller=manager.go:958 level=info component="rule manager" msg="Stopping rule manager..."
ts=2025-02-24T07:09:06.192Z caller=manager.go:968 level=info component="rule manager" msg="Rule manager stopped"
ts=2025-02-24T07:09:06.192Z caller=main.go:903 level=info msg="Stopping scrape manager..."
ts=2025-02-24T07:09:06.192Z caller=main.go:848 level=info msg="Scrape discovery manager stopped"
ts=2025-02-24T07:09:06.193Z caller=main.go:862 level=info msg="Notify discovery manager stopped"
ts=2025-02-24T07:09:06.193Z caller=main.go:895 level=info msg="Scrape manager stopped"
ts=2025-02-24T07:09:06.196Z caller=notifier.go:608 level=info component=notifier msg="Stopping notification manager..."
ts=2025-02-24T07:09:06.196Z caller=main.go:1123 level=info msg="Notifier manager stopped"
ts=2025-02-24T07:09:06.196Z caller=main.go:1135 level=info msg="See you next time!"
ts=2025-02-24T07:09:43.337Z caller=main.go:512 level=info msg="No time or size retention was set so using the default time retention" duration=15d
ts=2025-02-24T07:09:43.338Z caller=main.go:556 level=info msg="Starting Prometheus Server" mode=server version="(version=2.40.0, branch=HEAD, revision=c08d76b363f0d8052f3d2298df06b616af30900e)"
ts=2025-02-24T07:09:43.338Z caller=main.go:561 level=info build_context="(go=go1.19.3, user=root@79e0ee4d5b14, date=20221107-18:11:08)"
ts=2025-02-24T07:09:43.338Z caller=main.go:562 level=info host_details="(Linux 5.15.0-126-generic #136-Ubuntu SMP Wed Nov 6 10:38:22 UTC 2024 x86_64 dev-mongodb-poc3 (none))"
ts=2025-02-24T07:09:43.338Z caller=main.go:563 level=info fd_limits="(soft=1048576, hard=1048576)"
ts=2025-02-24T07:09:43.338Z caller=main.go:564 level=info vm_limits="(soft=unlimited, hard=unlimited)"
ts=2025-02-24T07:09:43.342Z caller=web.go:559 level=info component=web msg="Start listening for connections" address=0.0.0.0:9090
ts=2025-02-24T07:09:43.343Z caller=main.go:993 level=info msg="Starting TSDB ..."
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739037606839 maxt=1739102400000 ulid=01JKNTEZQHWH3AFZTJC2TMEDAT
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739102406839 maxt=1739167200000 ulid=01JKQR8GXF73KXV3GH9Q1HG0EP
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739167206839 maxt=1739232000000 ulid=01JKSP227H6WMP5YYJ6GER76HD
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739232006839 maxt=1739296800000 ulid=01JKVKVKDPT3J1Q45PYCBBY5S0
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739296806839 maxt=1739361600000 ulid=01JKXHN4RST628JEX0E738HERR
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739361606839 maxt=1739426400000 ulid=01JKZFENY08N21QQ58HEZ2Z8SN
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739426406839 maxt=1739491200000 ulid=01JM1D877RYTZCT5RTTJZW1FN5
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739491206839 maxt=1739556000000 ulid=01JM3B1RD1PC2NMPDPHYV2BXM8
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739556006839 maxt=1739620800000 ulid=01JM58V9QPR4BZ1D0KYP4YPXY6
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739620806839 maxt=1739685600000 ulid=01JM76MTX2BXHG2S4SVVA7HCTH
ts=2025-02-24T07:09:43.343Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739685606839 maxt=1739750400000 ulid=01JM94EC86QD6EC36CJA8ZSMPG
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739750406839 maxt=1739815200000 ulid=01JMB27XGBWZZ5GY8BW1BVDY5W
ts=2025-02-24T07:09:43.344Z caller=tls_config.go:232 level=info component=web msg="Listening on" address=[::]:9090
ts=2025-02-24T07:09:43.344Z caller=tls_config.go:235 level=info component=web msg="TLS is disabled." http2=false address=[::]:9090
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739815206839 maxt=1739880000000 ulid=01JMD01EQR158XDCW8GNDHBA7M
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739880006839 maxt=1739944800000 ulid=01JMEXTZYGABGXAEC3F0FP8280
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1739944806839 maxt=1740009600000 ulid=01JMGVMH7CJQKD1CY9KQ49QFZ7
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740009606839 maxt=1740074400000 ulid=01JMJSE2EVMVXD16NTNFWA7G28
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740074406839 maxt=1740139200000 ulid=01JMMQ7KRNE3R15NBRQZBR1VP8
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740139206839 maxt=1740204000000 ulid=01JMPN14YEZ9WQ1RHKAHJC204G
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740204006839 maxt=1740268800000 ulid=01JMRJTP86VVEKS1K2J4RW0NPB
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740268806839 maxt=1740333600000 ulid=01JMTGM7ECWATJ7ZECFAFPZ9DE
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740355206839 maxt=1740362400000 ulid=01JMTYBNRJQ13W8WGM2R8NE4Z2
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740362406839 maxt=1740369600000 ulid=01JMV57D0NFC8SNS44V1F4V2KJ
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740333606839 maxt=1740355200000 ulid=01JMV57D4S11TQKEZEE6X9KXYD
ts=2025-02-24T07:09:43.344Z caller=repair.go:56 level=info component=tsdb msg="Found healthy block" mint=1740369606839 maxt=1740376800000 ulid=01JMVC348H2TFQMTCMD4PZ21K9
ts=2025-02-24T07:09:43.364Z caller=head.go:561 level=info component=tsdb msg="Replaying on-disk memory mappable chunks if any"
ts=2025-02-24T07:09:43.366Z caller=head.go:605 level=info component=tsdb msg="On-disk memory mappable chunks replay completed" duration=1.841608ms
ts=2025-02-24T07:09:43.366Z caller=head.go:611 level=info component=tsdb msg="Replaying WAL, this may take a while"
ts=2025-02-24T07:09:43.379Z caller=head.go:647 level=info component=tsdb msg="WAL checkpoint loaded"
ts=2025-02-24T07:09:43.407Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=966 maxSegment=971
ts=2025-02-24T07:09:43.438Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=967 maxSegment=971
ts=2025-02-24T07:09:43.470Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=968 maxSegment=971
ts=2025-02-24T07:09:43.476Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=969 maxSegment=971
ts=2025-02-24T07:09:43.477Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=970 maxSegment=971
ts=2025-02-24T07:09:43.477Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segment=971 maxSegment=971
ts=2025-02-24T07:09:43.477Z caller=head.go:719 level=info component=tsdb msg="WAL replay completed" checkpoint_replay_duration=12.993042ms wal_replay_duration=98.185066ms wbl_replay_duration=212ns total_replay_duration=113.060854ms
ts=2025-02-24T07:09:43.479Z caller=main.go:1014 level=info fs_type=EXT4_SUPER_MAGIC
ts=2025-02-24T07:09:43.479Z caller=main.go:1017 level=info msg="TSDB started"
ts=2025-02-24T07:09:43.479Z caller=main.go:1197 level=info msg="Loading configuration file" filename=/etc/prometheus/prometheus.yml
ts=2025-02-24T07:09:43.480Z caller=main.go:1234 level=info msg="Completed loading of configuration file" filename=/etc/prometheus/prometheus.yml totalDuration=670.122µs db_storage=1.515µs remote_storage=1.859µs web_handler=670ns query_engine=832ns scrape=307.178µs scrape_sd=62.351µs notify=899ns notify_sd=2.521µs rules=1.404µs tracing=5.007µs
ts=2025-02-24T07:09:43.480Z caller=main.go:978 level=info msg="Server is ready to receive web requests."
ts=2025-02-24T07:09:43.480Z caller=manager.go:944 level=info component="rule manager" msg="Starting rule manager..."
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# history | grep prometheus
  218  wget https://github.com/prometheus/prometheus/releases/download/v2.39.4/prometheus-2.39.4.linux-amd64.tar.gz
  219  tar xvf prometheus-2.39.4.linux-amd64.tar.gz
  220  sudo mv prometheus-2.39.4.linux-amd64/prometheus /usr/local/bin/
  221  wget https://github.com/prometheus/prometheus/releases/download/v2.39.4/prometheus-2.39.4.linux-amd64.tar.gz
  223  wget https://github.com/prometheus/prometheus/releases/download/v2.40.0/prometheus-2.40.0.linux-amd64.tar.gz
  225  tar xvf prometheus-2.40.0.linux-amd64.tar.gz
  226  sudo mv prometheus-2.40.0.linux-amd64/prometheus /usr/local/bin/
  227  sudo mv prometheus-2.40.0.linux-amd64/promtool /usr/local/bin/
  228  sudo mv prometheus-2.40.0.linux-amd64/consoles /etc/prometheus/
  229  sudo mv prometheus-2.40.0.linux-amd64/console_libraries /etc/prometheus/
  230  sudo mkdir -p /etc/prometheus
  231  sudo mkdir -p /var/lib/prometheus
  232  sudo nano /etc/prometheus/prometheus.yml
  233  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  234  ps -ef | grep prometheus
  266  sudo nano /etc/prometheus/prometheus.yml
  267  sudo systemctl restart prometheus
  268  /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  270  sudo systemctl restart prometheus
  271  sudo nano /etc/prometheus/prometheus.yml
  272  sudo systemctl restart prometheus
  273  /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  274  nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  278  wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz
  367  ps -ef | grep prometheus
  369  ps -ef | grep prometheus
  370  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  371  ps -ef | grep prometheus
  372  history | grep prometheus
  373  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  376  history | grep prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875390 3875339  0 12:39 pts/3    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875391 3875390  0 12:39 pts/1    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875392 3875391  1 12:39 pts/1    00:00:00 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875418 3875339  0 12:40 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# cat /etc/prometheus/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'node'
    static_configs:
      - targets: ['192.168.61.138:9216']
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
× mongodb_exporter.service
     Loaded: not-found (Reason: Unit mongodb_exporter.service not found.)
     Active: failed (Result: exit-code) since Tue 2024-12-24 14:57:51 IST; 2 months 1 day ago
   Main PID: 401478 (code=exited, status=1/FAILURE)
        CPU: 21ms

Notice: journal has been rotated since unit was started, output may be incomplete.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo curl http://localhost:9216/metrics
# HELP collector_scrape_time_ms Time taken for scrape by collector
# TYPE collector_scrape_time_ms gauge
collector_scrape_time_ms{collector="general",exporter="mongodb"} 0
# HELP go_gc_duration_seconds A summary of the wall-time pause (stop-the-world) duration in garbage collection cycles.
# TYPE go_gc_duration_seconds summary
go_gc_duration_seconds{quantile="0"} 6.787e-05
go_gc_duration_seconds{quantile="0.25"} 8.9688e-05
go_gc_duration_seconds{quantile="0.5"} 0.0001091
go_gc_duration_seconds{quantile="0.75"} 0.000140026
go_gc_duration_seconds{quantile="1"} 0.000359753
go_gc_duration_seconds_sum 272.996662048
go_gc_duration_seconds_count 2.958664e+06
# HELP go_gc_gogc_percent Heap size target percentage configured by the user, otherwise 100. This value is set by the GOGC environment variable, and the runtime/debug.SetGCPercent function. Sourced from /gc/gogc:percent
# TYPE go_gc_gogc_percent gauge
go_gc_gogc_percent 100
# HELP go_gc_gomemlimit_bytes Go runtime memory limit configured by the user, otherwise math.MaxInt64. This value is set by the GOMEMLIMIT environment variable, and the runtime/debug.SetMemoryLimit function. Sourced from /gc/gomemlimit:bytes
# TYPE go_gc_gomemlimit_bytes gauge
go_gc_gomemlimit_bytes 9.223372036854776e+18
# HELP go_goroutines Number of goroutines that currently exist.
# TYPE go_goroutines gauge
go_goroutines 8
# HELP go_info Information about the Go environment.
# TYPE go_info gauge
go_info{version="go1.23.3"} 1
# HELP go_memstats_alloc_bytes Number of bytes allocated in heap and currently in use. Equals to /memory/classes/heap/objects:bytes.
# TYPE go_memstats_alloc_bytes gauge
go_memstats_alloc_bytes 5.402632e+06
# HELP go_memstats_alloc_bytes_total Total number of bytes allocated in heap until now, even if released already. Equals to /gc/heap/allocs:bytes.
# TYPE go_memstats_alloc_bytes_total counter
go_memstats_alloc_bytes_total 2.99843117405792e+14
# HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table. Equals to /memory/classes/profiling/buckets:bytes.
# TYPE go_memstats_buck_hash_sys_bytes gauge
go_memstats_buck_hash_sys_bytes 4.196277e+06
# HELP go_memstats_frees_total Total number of heap objects frees. Equals to /gc/heap/frees:objects + /gc/heap/tiny/allocs:objects.
# TYPE go_memstats_frees_total counter
go_memstats_frees_total 1.772954849206e+12
# HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata. Equals to /memory/classes/metadata/other:bytes.
# TYPE go_memstats_gc_sys_bytes gauge
go_memstats_gc_sys_bytes 1.3188888e+07
# HELP go_memstats_heap_alloc_bytes Number of heap bytes allocated and currently in use, same as go_memstats_alloc_bytes. Equals to /memory/classes/heap/objects:bytes.
# TYPE go_memstats_heap_alloc_bytes gauge
go_memstats_heap_alloc_bytes 5.402632e+06
# HELP go_memstats_heap_idle_bytes Number of heap bytes waiting to be used. Equals to /memory/classes/heap/released:bytes + /memory/classes/heap/free:bytes.
# TYPE go_memstats_heap_idle_bytes gauge
go_memstats_heap_idle_bytes 9.80525056e+08
# HELP go_memstats_heap_inuse_bytes Number of heap bytes that are in use. Equals to /memory/classes/heap/objects:bytes + /memory/classes/heap/unused:bytes
# TYPE go_memstats_heap_inuse_bytes gauge
go_memstats_heap_inuse_bytes 8.413184e+06
# HELP go_memstats_heap_objects Number of currently allocated objects. Equals to /gc/heap/objects:objects.
# TYPE go_memstats_heap_objects gauge
go_memstats_heap_objects 19328
# HELP go_memstats_heap_released_bytes Number of heap bytes released to OS. Equals to /memory/classes/heap/released:bytes.
# TYPE go_memstats_heap_released_bytes gauge
go_memstats_heap_released_bytes 9.65640192e+08
# HELP go_memstats_heap_sys_bytes Number of heap bytes obtained from system. Equals to /memory/classes/heap/objects:bytes + /memory/classes/heap/unused:bytes + /memory/classes/heap/released:bytes + /memory/classes/heap/free:bytes.
# TYPE go_memstats_heap_sys_bytes gauge
go_memstats_heap_sys_bytes 9.8893824e+08
# HELP go_memstats_last_gc_time_seconds Number of seconds since 1970 of last garbage collection.
# TYPE go_memstats_last_gc_time_seconds gauge
go_memstats_last_gc_time_seconds 1.7403811862211475e+09
# HELP go_memstats_mallocs_total Total number of heap objects allocated, both live and gc-ed. Semantically a counter version for go_memstats_heap_objects gauge. Equals to /gc/heap/allocs:objects + /gc/heap/tiny/allocs:objects.
# TYPE go_memstats_mallocs_total counter
go_memstats_mallocs_total 1.772954868534e+12
# HELP go_memstats_mcache_inuse_bytes Number of bytes in use by mcache structures. Equals to /memory/classes/metadata/mcache/inuse:bytes.
# TYPE go_memstats_mcache_inuse_bytes gauge
go_memstats_mcache_inuse_bytes 2400
# HELP go_memstats_mcache_sys_bytes Number of bytes used for mcache structures obtained from system. Equals to /memory/classes/metadata/mcache/inuse:bytes + /memory/classes/metadata/mcache/free:bytes.
# TYPE go_memstats_mcache_sys_bytes gauge
go_memstats_mcache_sys_bytes 15600
# HELP go_memstats_mspan_inuse_bytes Number of bytes in use by mspan structures. Equals to /memory/classes/metadata/mspan/inuse:bytes.
# TYPE go_memstats_mspan_inuse_bytes gauge
go_memstats_mspan_inuse_bytes 140320
# HELP go_memstats_mspan_sys_bytes Number of bytes used for mspan structures obtained from system. Equals to /memory/classes/metadata/mspan/inuse:bytes + /memory/classes/metadata/mspan/free:bytes.
# TYPE go_memstats_mspan_sys_bytes gauge
go_memstats_mspan_sys_bytes 1.875168e+07
# HELP go_memstats_next_gc_bytes Number of heap bytes when next garbage collection will take place. Equals to /gc/heap/goal:bytes.
# TYPE go_memstats_next_gc_bytes gauge
go_memstats_next_gc_bytes 1.0361672e+07
# HELP go_memstats_other_sys_bytes Number of bytes used for other system allocations. Equals to /memory/classes/other:bytes.
# TYPE go_memstats_other_sys_bytes gauge
go_memstats_other_sys_bytes 1.961835e+06
# HELP go_memstats_stack_inuse_bytes Number of bytes obtained from system for stack allocator in non-CGO environments. Equals to /memory/classes/heap/stacks:bytes.
# TYPE go_memstats_stack_inuse_bytes gauge
go_memstats_stack_inuse_bytes 884736
# HELP go_memstats_stack_sys_bytes Number of bytes obtained from system for stack allocator. Equals to /memory/classes/heap/stacks:bytes + /memory/classes/os-stacks:bytes.
# TYPE go_memstats_stack_sys_bytes gauge
go_memstats_stack_sys_bytes 884736
# HELP go_memstats_sys_bytes Number of bytes obtained from system. Equals to /memory/classes/total:byte.
# TYPE go_memstats_sys_bytes gauge
go_memstats_sys_bytes 1.027937256e+09
# HELP go_sched_gomaxprocs_threads The current runtime.GOMAXPROCS setting, or the number of operating system threads that can execute user-level Go code simultaneously. Sourced from /sched/gomaxprocs:threads
# TYPE go_sched_gomaxprocs_threads gauge
go_sched_gomaxprocs_threads 2
# HELP go_threads Number of OS threads created.
# TYPE go_threads gauge
go_threads 7
# HELP mongodb_up Whether MongoDB is up.
# TYPE mongodb_up gauge
mongodb_up{cluster_role=""} 0
# HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.
# TYPE process_cpu_seconds_total counter
process_cpu_seconds_total 927048.44
# HELP process_max_fds Maximum number of open file descriptors.
# TYPE process_max_fds gauge
process_max_fds 524288
# HELP process_network_receive_bytes_total Number of bytes received by the process over the network.
# TYPE process_network_receive_bytes_total counter
process_network_receive_bytes_total 8.66351935387e+11
# HELP process_network_transmit_bytes_total Number of bytes sent by the process over the network.
# TYPE process_network_transmit_bytes_total counter
process_network_transmit_bytes_total 1.101422049994e+12
# HELP process_open_fds Number of open file descriptors.
# TYPE process_open_fds gauge
process_open_fds 9
# HELP process_resident_memory_bytes Resident memory size in bytes.
# TYPE process_resident_memory_bytes gauge
process_resident_memory_bytes 5.632e+07
# HELP process_start_time_seconds Start time of the process since unix epoch in seconds.
# TYPE process_start_time_seconds gauge
process_start_time_seconds 1.73640547919e+09
# HELP process_virtual_memory_bytes Virtual memory size in bytes.
# TYPE process_virtual_memory_bytes gauge
process_virtual_memory_bytes 2.249383936e+09
# HELP process_virtual_memory_max_bytes Maximum amount of virtual memory available in bytes.
# TYPE process_virtual_memory_max_bytes gauge
process_virtual_memory_max_bytes 1.8446744073709552e+19
root@dev-mongodb-poc3:~# cd ~
root@dev-mongodb-poc3:~# sudo curl http://localhost:9216/metrics
# HELP collector_scrape_time_ms Time taken for scrape by collector
# TYPE collector_scrape_time_ms gauge
collector_scrape_time_ms{collector="general",exporter="mongodb"} 0
# HELP go_gc_duration_seconds A summary of the wall-time pause (stop-the-world) duration in garbage collection cycles.
# TYPE go_gc_duration_seconds summary
go_gc_duration_seconds{quantile="0"} 6.787e-05
go_gc_duration_seconds{quantile="0.25"} 8.9688e-05
go_gc_duration_seconds{quantile="0.5"} 0.0001091
go_gc_duration_seconds{quantile="0.75"} 0.000140026
go_gc_duration_seconds{quantile="1"} 0.000359753
go_gc_duration_seconds_sum 272.996662048
go_gc_duration_seconds_count 2.958664e+06
# HELP go_gc_gogc_percent Heap size target percentage configured by the user, otherwise 100. This value is set by the GOGC environment variable, and the runtime/debug.SetGCPercent function. Sourced from /gc/gogc:percent
# TYPE go_gc_gogc_percent gauge
go_gc_gogc_percent 100
# HELP go_gc_gomemlimit_bytes Go runtime memory limit configured by the user, otherwise math.MaxInt64. This value is set by the GOMEMLIMIT environment variable, and the runtime/debug.SetMemoryLimit function. Sourced from /gc/gomemlimit:bytes
# TYPE go_gc_gomemlimit_bytes gauge
go_gc_gomemlimit_bytes 9.223372036854776e+18
# HELP go_goroutines Number of goroutines that currently exist.
# TYPE go_goroutines gauge
go_goroutines 8
# HELP go_info Information about the Go environment.
# TYPE go_info gauge
go_info{version="go1.23.3"} 1
# HELP go_memstats_alloc_bytes Number of bytes allocated in heap and currently in use. Equals to /memory/classes/heap/objects:bytes.
# TYPE go_memstats_alloc_bytes gauge
go_memstats_alloc_bytes 6.396928e+06
# HELP go_memstats_alloc_bytes_total Total number of bytes allocated in heap until now, even if released already. Equals to /gc/heap/allocs:bytes.
# TYPE go_memstats_alloc_bytes_total counter
go_memstats_alloc_bytes_total 2.99843118400088e+14
# HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table. Equals to /memory/classes/profiling/buckets:bytes.
# TYPE go_memstats_buck_hash_sys_bytes gauge
go_memstats_buck_hash_sys_bytes 4.196277e+06
# HELP go_memstats_frees_total Total number of heap objects frees. Equals to /gc/heap/frees:objects + /gc/heap/tiny/allocs:objects.
# TYPE go_memstats_frees_total counter
go_memstats_frees_total 1.772954850083e+12
# HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata. Equals to /memory/classes/metadata/other:bytes.
# TYPE go_memstats_gc_sys_bytes gauge
go_memstats_gc_sys_bytes 1.3190936e+07
# HELP go_memstats_heap_alloc_bytes Number of heap bytes allocated and currently in use, same as go_memstats_alloc_bytes. Equals to /memory/classes/heap/objects:bytes.
# TYPE go_memstats_heap_alloc_bytes gauge
go_memstats_heap_alloc_bytes 6.396928e+06
# HELP go_memstats_heap_idle_bytes Number of heap bytes waiting to be used. Equals to /memory/classes/heap/released:bytes + /memory/classes/heap/free:bytes.
# TYPE go_memstats_heap_idle_bytes gauge
go_memstats_heap_idle_bytes 9.79714048e+08
# HELP go_memstats_heap_inuse_bytes Number of heap bytes that are in use. Equals to /memory/classes/heap/objects:bytes + /memory/classes/heap/unused:bytes
# TYPE go_memstats_heap_inuse_bytes gauge
go_memstats_heap_inuse_bytes 9.224192e+06
# HELP go_memstats_heap_objects Number of currently allocated objects. Equals to /gc/heap/objects:objects.
# TYPE go_memstats_heap_objects gauge
go_memstats_heap_objects 26930
# HELP go_memstats_heap_released_bytes Number of heap bytes released to OS. Equals to /memory/classes/heap/released:bytes.
# TYPE go_memstats_heap_released_bytes gauge
go_memstats_heap_released_bytes 9.65640192e+08
# HELP go_memstats_heap_sys_bytes Number of heap bytes obtained from system. Equals to /memory/classes/heap/objects:bytes + /memory/classes/heap/unused:bytes + /memory/classes/heap/released:bytes + /memory/classes/heap/free:bytes.
# TYPE go_memstats_heap_sys_bytes gauge
go_memstats_heap_sys_bytes 9.8893824e+08
# HELP go_memstats_last_gc_time_seconds Number of seconds since 1970 of last garbage collection.
# TYPE go_memstats_last_gc_time_seconds gauge
go_memstats_last_gc_time_seconds 1.7403811862211475e+09
# HELP go_memstats_mallocs_total Total number of heap objects allocated, both live and gc-ed. Semantically a counter version for go_memstats_heap_objects gauge. Equals to /gc/heap/allocs:objects + /gc/heap/tiny/allocs:objects.
# TYPE go_memstats_mallocs_total counter
go_memstats_mallocs_total 1.772954877013e+12
# HELP go_memstats_mcache_inuse_bytes Number of bytes in use by mcache structures. Equals to /memory/classes/metadata/mcache/inuse:bytes.
# TYPE go_memstats_mcache_inuse_bytes gauge
go_memstats_mcache_inuse_bytes 2400
# HELP go_memstats_mcache_sys_bytes Number of bytes used for mcache structures obtained from system. Equals to /memory/classes/metadata/mcache/inuse:bytes + /memory/classes/metadata/mcache/free:bytes.
# TYPE go_memstats_mcache_sys_bytes gauge
go_memstats_mcache_sys_bytes 15600
# HELP go_memstats_mspan_inuse_bytes Number of bytes in use by mspan structures. Equals to /memory/classes/metadata/mspan/inuse:bytes.
# TYPE go_memstats_mspan_inuse_bytes gauge
go_memstats_mspan_inuse_bytes 150560
# HELP go_memstats_mspan_sys_bytes Number of bytes used for mspan structures obtained from system. Equals to /memory/classes/metadata/mspan/inuse:bytes + /memory/classes/metadata/mspan/free:bytes.
# TYPE go_memstats_mspan_sys_bytes gauge
go_memstats_mspan_sys_bytes 1.875168e+07
# HELP go_memstats_next_gc_bytes Number of heap bytes when next garbage collection will take place. Equals to /gc/heap/goal:bytes.
# TYPE go_memstats_next_gc_bytes gauge
go_memstats_next_gc_bytes 1.0361672e+07
# HELP go_memstats_other_sys_bytes Number of bytes used for other system allocations. Equals to /memory/classes/other:bytes.
# TYPE go_memstats_other_sys_bytes gauge
go_memstats_other_sys_bytes 1.959787e+06
# HELP go_memstats_stack_inuse_bytes Number of bytes obtained from system for stack allocator in non-CGO environments. Equals to /memory/classes/heap/stacks:bytes.
# TYPE go_memstats_stack_inuse_bytes gauge
go_memstats_stack_inuse_bytes 884736
# HELP go_memstats_stack_sys_bytes Number of bytes obtained from system for stack allocator. Equals to /memory/classes/heap/stacks:bytes + /memory/classes/os-stacks:bytes.
# TYPE go_memstats_stack_sys_bytes gauge
go_memstats_stack_sys_bytes 884736
# HELP go_memstats_sys_bytes Number of bytes obtained from system. Equals to /memory/classes/total:byte.
# TYPE go_memstats_sys_bytes gauge
go_memstats_sys_bytes 1.027937256e+09
# HELP go_sched_gomaxprocs_threads The current runtime.GOMAXPROCS setting, or the number of operating system threads that can execute user-level Go code simultaneously. Sourced from /sched/gomaxprocs:threads
# TYPE go_sched_gomaxprocs_threads gauge
go_sched_gomaxprocs_threads 2
# HELP go_threads Number of OS threads created.
# TYPE go_threads gauge
go_threads 7
# HELP mongodb_up Whether MongoDB is up.
# TYPE mongodb_up gauge
mongodb_up{cluster_role=""} 0
# HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.
# TYPE process_cpu_seconds_total counter
process_cpu_seconds_total 927048.49
# HELP process_max_fds Maximum number of open file descriptors.
# TYPE process_max_fds gauge
process_max_fds 524288
# HELP process_network_receive_bytes_total Number of bytes received by the process over the network.
# TYPE process_network_receive_bytes_total counter
process_network_receive_bytes_total 8.66352103914e+11
# HELP process_network_transmit_bytes_total Number of bytes sent by the process over the network.
# TYPE process_network_transmit_bytes_total counter
process_network_transmit_bytes_total 1.101422501757e+12
# HELP process_open_fds Number of open file descriptors.
# TYPE process_open_fds gauge
process_open_fds 9
# HELP process_resident_memory_bytes Resident memory size in bytes.
# TYPE process_resident_memory_bytes gauge
process_resident_memory_bytes 5.632e+07
# HELP process_start_time_seconds Start time of the process since unix epoch in seconds.
# TYPE process_start_time_seconds gauge
process_start_time_seconds 1.73640547919e+09
# HELP process_virtual_memory_bytes Virtual memory size in bytes.
# TYPE process_virtual_memory_bytes gauge
process_virtual_memory_bytes 2.249383936e+09
# HELP process_virtual_memory_max_bytes Maximum amount of virtual memory available in bytes.
# TYPE process_virtual_memory_max_bytes gauge
process_virtual_memory_max_bytes 1.8446744073709552e+19
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# cd /etc/prometheus/
root@dev-mongodb-poc3:/etc/prometheus# sudo vi prometheus.yml
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# sudo ufw allow 9090
Rule added
Rule added (v6)
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# ps -ef | grep prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875390 3875339  0 12:39 pts/3    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875391 3875390  0 12:39 pts/1    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875392 3875391  0 12:39 pts/1    00:00:00 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875840 3875339  0 12:47 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# kill -9 3875390
root@dev-mongodb-poc3:/etc/prometheus#
[1]+  Killed                  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus  (wd: ~)
(wd now: /etc/prometheus)
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# ps -ef | grep prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875849 3875339  0 12:47 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
[1] 3875852
root@dev-mongodb-poc3:/etc/prometheus# nohup: ignoring input and appending output to 'nohup.out'

root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# ps -ef | grep prometheus
root     1446033       1 23 Jan09 ?        10-17:30:48 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875852 3875339  0 12:47 pts/3    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875853 3875852  0 12:47 pts/1    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875854 3875853  4 12:47 pts/1    00:00:00 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875863 3875339  0 12:48 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:/etc/prometheus# sudo vi prometheus.yml
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# ps -ef | grep prometheus
root     1446033       1 23 Jan09 ?        10-17:30:50 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
root     3875852 3875339  0 12:47 pts/3    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875853 3875852  0 12:47 pts/1    00:00:00 sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3875854 3875853  0 12:47 pts/1    00:00:01 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root     3877249 3875339  0 13:16 pts/3    00:00:00 grep --color=auto prometheus
root@dev-mongodb-poc3:/etc/prometheus# kill -9 3875852
root@dev-mongodb-poc3:/etc/prometheus#
[1]+  Killed                  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
[1] 3877261
root@dev-mongodb-poc3:/etc/prometheus# nohup: ignoring input and appending output to 'nohup.out'

root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# history
    1  cd /mongo/logs/
    2  ls
    3  ll -lhrt
    4  tail -30 mongod.log
    5  cd ..
    6  ll -lhrt
    7  sudo chown -R mongodb.mongodb mongo-keyfile
    8  exit
    9  mkdir /grafana
   10  cd grafana
   11  df -h
   12  cd /grafana/
   13  ls
   14  sudo apt install -y software-properties-common
   15  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
   16  sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7BB9C1A86D0B0D2D
   17  sudo apt update
   18  sudo apt install grafana
   19  sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7BB9C1A86D0B0D2D
   20  curl https://packages.grafana.com/gpg.key | sudo tee /etc/apt/trusted.gpg.d/grafana.asc
   21  sudo nano /etc/apt/sources.list.d/grafana.list
   22  sudo apt updat
   23  sudo apt update
   24  sudo apt install grafana
   25  sudo systemctl start grafana-server
   26  sudo systemctl enable grafana-server
   27  sudo ufw allow 3000/tcp
   28  sudo ufw reload
   29  sudo ufw enable
   30  sudo ufw status
   31  sudo ufw allow 27017/tcp
   32  sudo ufw allow ssh
   33  sudo ufw allow 3000/tcp
   34  sudo ufw status
   35  sudo ufw enable
   36  sudo ufw status
   37  ps -ef | grep grafana
   38  sudo systemctl status grafana-server
   39  hostname
   40  hostname -i
   41  hostname -I
   42  mongosh -u superAdmin -p
   43  grafana-cli plugins install grafana-mongodb-datasource
   44  sudo systemctl restart grafana-server
   45  grafana-cli plugins list
   46  grafana-server -v
   47  which grafana-server
   48  sudo grafana-cli plugins install grafana-mongodb-datasource
   49  sudo systemctl restart grafana-server
   50  sudo journalctl -u grafana-server -f
   51  sudo tail -f /var/log/grafana/grafana.log
   52  vi /etc/grafana/grafana.ini
   53  sudo systemctl restart grafana-server
   54  cat /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource/plugin.json
   55  sudo rm -rf /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource
   56  grafana-cli plugins install maikuroashi-mongodb-datasource
   57  ls /usr/local/var/lib/grafana/plugins
   58  sudo nano /etc/grafana/grafana.ini
   59  sudo ls -l /var/lib/grafana/plugins
   60  sudo chown -R grafana:grafana /var/lib/grafana/plugins/grafana-mongodb-datasource
   61  sudo chmod -R 755 /var/lib/grafana/plugins/grafana-mongodb-datasource
   62  sudo systemctl restart grafana-server
   63  sudo ls -l /var/lib/grafana/plugins
   64  sudo rm -rf /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource
   65  sudo systemctl restart grafana-server
   66  grafana-cli plugins remove grafana-mongodb-datasource
   67  sudo systemctl restart grafana-server
   68  sudo ls -l /var/lib/grafana/plugins
   69  grafana-cli plugins install grafana-simple-json-datasource
   70  sudo systemctl restart grafana-server
   71  sudo ls -l /var/lib/grafana/plugins
   72  sudo systemctl restart grafana-server
   73  grafana-cli plugins install grafana-mongodb-datasource
   74  sudo systemctl restart grafana-server
   75  grafana-cli plugins list
   76  sudo /usr/share/grafana/bin/grafana-cli plugins install grafana-mongodb-datasource
   77  sudo systemctl restart grafana-server
   78  sudo journalctl -u grafana-server -f
   79  grafana-server -v
   80  sudo apt-get remove --purge grafana
   81  sudo apt-get install grafana=9.6.3-1
   82  sudo apt-get autoremove
   83  sudo apt-get install software-properties-common
   84  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
   85  curl https://packages.grafana.com/gpg.key | sudo apt-key add -
   86  sudo apt-get update
   87  sudo apt-get install grafana=9.6.3
   88  apt-cache show grafana
   89  sudo apt-get remove grafana-enterprise
   90  sudo apt-get install -y software-properties-common
   91  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
   92  sudo apt-get update
   93  sudo dpkg -i grafana_9.6.3_amd64.deb
   94  ls
   95  wget https://dl.grafana.com/oss/release/grafana_9.6.3_amd64.deb
   96  wget https://github.com/grafana/grafana/releases/download/v9.6.3/grafana_9.6.3_amd64.deb
   97  sudo apt-get install -y software-properties-common
   98  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
   99  sudo apt-get update
  100  sudo apt-get install grafana=9.6.3
  101  wget https://github.com/grafana/grafana/releases/download/v9.6.3/grafana_9.6.3_amd64.deb
  102  cd /tmp
  103  wget https://github.com/grafana/grafana/releases/download/v9.6.3/grafana_9.6.3_amd64.deb
  104  sudo systemctl stop grafana-server
  105  sudo apt-get remove --purge grafana
  106  sudo apt-get autoremove --purge
  107  sudo rm -rf /etc/grafana
  108  sudo rm -rf /var/lib/grafana
  109  sudo rm -rf /var/log/grafana
  110  sudo rm -rf /usr/share/grafana
  111  cd /grafana/
  112  ll -hrt
  113  sudo apt update && sudo apt upgrade -y
  114  sudo apt install -y apt-transport-https software-properties-common wget
  115  sudo wget -q -O - https://packages.grafana.com/gpg.key | sudo gpg --dearmor -o /usr/share/keyrings/grafana.gpg
  116  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
  117  sudo apt update
  118  sudo apt install grafana -y
  119  sudo systemctl start grafana-server
  120  sudo systemctl enable grafana-server
  121  sudo systemctl status grafana-server
  122  grafana-cli plugins install grafana-simple-json-datasource
  123  sudo systemctl restart grafana-server
  124  mkdir mongodb-backend
  125  cd mongodb-backend
  126  npm init -y
  127  apt install npm
  128  sudo apt update
  129  sudo apt install -y nodejs npm
  130  node -v
  131  npm -v
  132  npm init -y
  133  npm install express mongodb body-parser
  134  sudo apt remove nodejs npm
  135  curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -
  136  sudo apt install -y nodejs
  137  node -v
  138  npm -v
  139  sudo apt-get remove --purge libnode-dev
  140  sudo apt-get remove --purge nodejs
  141  sudo apt-get autoremove
  142  sudo apt-get clean
  143  curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -
  144  sudo apt-get install -y nodejs
  145  curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
  146  sudo apt-get install -y nodejs
  147  node -v
  148  npm -v
  149  npm install express mongodb body-parser
  150  touch index.js
  151  vi index.js
  152  node index.js
  153  sudo lsof -i :3000
  154  sudo nano /etc/grafana/grafana.ini
  155  sudo vi /etc/grafana/grafana.ini
  156  sudo systemctl restart grafana-server
  157  node index.js
  158  sudo vi /etc/grafana/grafana.ini
  159  vi index.js
  160  node index.js
  161  sudo systemctl restart grafana-server
  162  node index.js
  163  sudo systemctl restart grafana-server
  164  curl http://192.168.61.138:3000/query
  165  curl http://192.168.61.138:3001/query
  166  curl http://localhost:3001/query
  167  curl http://192.168.61.138:3001/query
  168  node index.js
  169  curl http://192.168.61.138:3001/query
  170  curl http://192.168.61.138:3000/query
  171  node index.js
  172  sudo ufw allow 3001/tcp
  173  curl http://localhost:3001/query
  174  curl http://localhost:3000/query
  175  curl http://192.168.61.138:3001/query
  176  curl http://192.168.61.138:3000/query
  177  vi node,js
  178  vi node.js
  179  vi index.js
  180  node index.js
  181  curl http://localhost:3001/query
  182  curl http://192.168.61.138:3001/query
  183  sudo systemctl restart grafana-server
  184  curl http://localhost:3001/query
  185  root@dev-mongodb-poc3:/grafana/mongodb-backend# curl http://localhost:3001/query
  186  curl: (7) Failed to connect to localhost port 3001 after 0 ms: Connection refused
  187  root@dev-mongodb-poc3:/grafana/mongodb-backend# curl http://192.168.61.138:3001/query
  188  curl: (7) Failed to connect to 192.168.61.138 port 3001 after 0 ms: Connection refused
  189  root@dev-mongodb-poc3:/grafana/mongodb-backend#
  190  sudo ufw status
  191  sudo ufw allow 3001/tcp
  192  node index.js
  193  vi index.js
  194  cat index.js | grep 'app.listen(port'
  195  curl http://localhost:3001/query
  196  curl http://192.168.61.138:3001/query
  197  sudo lsof -i :3001
  198  cat index.js
  199  node -v
  200  vi minimal.js
  201  node minimal.js
  202  curl http://localhost:3001/test
  203  vi minimal.js
  204  cat minimal.js | grep 'app.listen(port'
  205  sudo lsof -i :3001
  206  vi minimal.js
  207  node minimal.js
  208  ls
  209  cd ..
  210  sudo apt-get update
  211  sudo apt-get install postgresql postgresql-contrib
  212  sudo systemctl start postgresql
  213  sudo systemctl enable postgresql
  214  sudo -u postgres psql
  215  systemctl status postgres
  216  systemctl status postgresql
  217  sudo apt-get update
  218  wget https://github.com/prometheus/prometheus/releases/download/v2.39.4/prometheus-2.39.4.linux-amd64.tar.gz
  219  tar xvf prometheus-2.39.4.linux-amd64.tar.gz
  220  sudo mv prometheus-2.39.4.linux-amd64/prometheus /usr/local/bin/
  221  wget https://github.com/prometheus/prometheus/releases/download/v2.39.4/prometheus-2.39.4.linux-amd64.tar.gz
  222  sudo apt-get update
  223  wget https://github.com/prometheus/prometheus/releases/download/v2.40.0/prometheus-2.40.0.linux-amd64.tar.gz
  224  tar xvf
  225  tar xvf prometheus-2.40.0.linux-amd64.tar.gz
  226  sudo mv prometheus-2.40.0.linux-amd64/prometheus /usr/local/bin/
  227  sudo mv prometheus-2.40.0.linux-amd64/promtool /usr/local/bin/
  228  sudo mv prometheus-2.40.0.linux-amd64/consoles /etc/prometheus/
  229  sudo mv prometheus-2.40.0.linux-amd64/console_libraries /etc/prometheus/
  230  sudo mkdir -p /etc/prometheus
  231  sudo mkdir -p /var/lib/prometheus
  232  sudo nano /etc/prometheus/prometheus.yml
  233  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  234  ps -ef | grep prometheus
  235  sudo ufw allow 9090/tcp
  236  sudo ufw
  237  sudo ufw status
  238  ls
  239  wget https://github.com/percona/mongodb_exporter/releases/download/v0.20.7/mongodb_exporter-0.20.7.linux-amd64.tar.gz
  240  tar xvf mongodb_exporter-0.20.7.linux-amd64.tar.gz
  241  sudo mv mongodb_exporter-0.20.7.linux-amd64/mongodb_exporter /usr/local/bin/
  242  mongosh mongodb://admin:'6uper@dm!n'@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  243  mongosh mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  244  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  245  sudo ufw allow 9216/tcp
  246  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  247  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0
  248  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0 --web.listen-address=127.0.0.1:9216
  249  sudo lsof -i :9216
  250  sudo kill 93736
  251  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=127.0.0.1:9216
  252  sudo lsof -i :9216
  253  sudo kill 93736
  254  sudo lsof -i :9216
  255  sudo kill -9 93736
  256  sudo lsof -i
  257  sudo lsof -i :9216
  258  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=127.0.0.1:9216
  259  sudo lsof -i :9216
  260  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  261  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  262  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  263  exit
  264  cd /grafana/
  265  ll -lhrt
  266  sudo nano /etc/prometheus/prometheus.yml
  267  sudo systemctl restart prometheus
  268  /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  269  sudo lsof -i
  270  sudo systemctl restart prometheus
  271  sudo nano /etc/prometheus/prometheus.yml
  272  sudo systemctl restart prometheus
  273  /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  274  nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  275  cat nohup.out
  276  sudo lsof -i :9090
  277  sudo systemctl status
  278  wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz
  279  tar xvf node_exporter-1.3.1.linux-amd64.tar.gz
  280  sudo mv node_exporter-1.3.1.linux-amd64/node_exporter /usr/local/bin/
  281  nohup /usr/local/bin/node_exporter
  282  nohup /usr/local/bin/node_exporter &
  283  exit
  284  cd /mongo/logs/
  285  ls
  286  ll -lhrt
  287  ssh touadmin@192.168.61.137
  288  crontab -l
  289  exit
  290  sudo passwd venkata
  291  exit
  292  sudo passwd venkata
  293  exit
  294  cd /mongo/
  295  ls
  296  vi mongod.conf
  297  sudo systemctl start mongod
  298  cd /mongo/opsmanager/mongodb-mms/bin/
  299  exit
  300  cd /mongo/
  301  ll -lhrt
  302  rm -rf data/
  303  rm -rf data
  304  ll -lhrt
  305  ps -ef | grep mongo
  306  rm -rf data
  307  sudo systemctl start mongod
  308  ps -ef | grep mongo
  309  mongosh
  310  mongosh -u superAdmin
  311  mongosh
  312  ps -ef | grep mongo
  313  history
  314  ps -ef | grep mongo
  315  kill -9 422977
  316  ps -ef | grep mongo
  317  sudo systemctl stop mongod
  318  ps -ef | grep mongo
  319  kill -9 1446005
  320  ps -ef | grep mongo
  321  ll -lhrt
  322  rm -rf data/
  323  rm -rf -f data/
  324  cd data/
  325  ll -lhrt
  326  sudo systemctl start mongod
  327  sudo systemctl status mongod
  328  mongosh
  329  ls
  330  cd ..
  331  ls
  332  vi mongod.conf
  333  sudo systemctl restart mongod
  334  mongosh
  335  vi mongod.conf
  336  sudo systemctl restart mongod
  337  mongosh
  338  mongosh -u opsmanager_user -p
  339  telnet 198.168.61.138 27017
  340  tcp   0   0 0.0.0.0:27017  0.0.0.0:*  LISTEN
  341  ls
  342  vi mongod.conf
  343  sudo systemctl restart mongod
  344  sudo ufw allow from 192.168.61.138 to any port 27017
  345  sudo iptables -A INPUT -p tcp --dport 27017 -j ACCEPT
  346  sudo ss -tulnp | grep 27017
  347  nc -zv 198.168.61.138 27017
  348  ps -ef | grep mongo
  349  mongosh
  350  mongosh -u opsmanager_user -p
  351  vi mongod.conf
  352  sudo systemctl restart mongod
  353  mongosh
  354  vi mongod.conf
  355  sudo systemctl restart mongod
  356  mongosh -u admin
  357  cd data/
  358  ls
  359  exit
  360  cd /mongo/
  361  ls
  362  cp mongod.conf mongod.conf-self-signed
  363  vi mongod.conf
  364  systemctl restart  mongod
  365  systemctl status mongod
  366  ps -ef | grep mongo
  367  ps -ef | grep prometheus
  368  kill -9 93190
  369  ps -ef | grep prometheus
  370  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  371  ps -ef | grep prometheus
  372  history | grep prometheus
  373  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  374  ls
  375  cat nohup.out
  376  history | grep prometheus
  377  ps -ef | grep prometheus
  378  cat /etc/prometheus/prometheus.yml
  379  sudo systemctl status mongodb_exporter.service
  380  sudo curl http://localhost:9216/metrics
  381  cd ~
  382  sudo curl http://localhost:9216/metrics
  383  cd /etc/prometheus/
  384  sudo vi prometheus.yml
  385  sudo ufw allow 9090
  386  ps -ef | grep prometheus
  387  kill -9 3875390
  388  ps -ef | grep prometheus
  389  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  390  ps -ef | grep prometheus
  391  sudo vi /lib/systemd/system/mongodb_exporter.service
  392  sudo vi prometheus.yml
  393  ps -ef | grep prometheus
  394  kill -9 3875852
  395  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  396  history
root@dev-mongodb-poc3:/etc/prometheus# history  | grep mongo
    1  cd /mongo/logs/
    4  tail -30 mongod.log
    7  sudo chown -R mongodb.mongodb mongo-keyfile
   42  mongosh -u superAdmin -p
   43  grafana-cli plugins install grafana-mongodb-datasource
   48  sudo grafana-cli plugins install grafana-mongodb-datasource
   54  cat /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource/plugin.json
   55  sudo rm -rf /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource
   56  grafana-cli plugins install maikuroashi-mongodb-datasource
   60  sudo chown -R grafana:grafana /var/lib/grafana/plugins/grafana-mongodb-datasource
   61  sudo chmod -R 755 /var/lib/grafana/plugins/grafana-mongodb-datasource
   64  sudo rm -rf /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource
   66  grafana-cli plugins remove grafana-mongodb-datasource
   73  grafana-cli plugins install grafana-mongodb-datasource
   76  sudo /usr/share/grafana/bin/grafana-cli plugins install grafana-mongodb-datasource
  124  mkdir mongodb-backend
  125  cd mongodb-backend
  133  npm install express mongodb body-parser
  149  npm install express mongodb body-parser
  185  root@dev-mongodb-poc3:/grafana/mongodb-backend# curl http://localhost:3001/query
  187  root@dev-mongodb-poc3:/grafana/mongodb-backend# curl http://192.168.61.138:3001/query
  189  root@dev-mongodb-poc3:/grafana/mongodb-backend#
  239  wget https://github.com/percona/mongodb_exporter/releases/download/v0.20.7/mongodb_exporter-0.20.7.linux-amd64.tar.gz
  240  tar xvf mongodb_exporter-0.20.7.linux-amd64.tar.gz
  241  sudo mv mongodb_exporter-0.20.7.linux-amd64/mongodb_exporter /usr/local/bin/
  242  mongosh mongodb://admin:'6uper@dm!n'@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  243  mongosh mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  244  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  246  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  247  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0
  248  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0 --web.listen-address=127.0.0.1:9216
  251  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=127.0.0.1:9216
  258  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=127.0.0.1:9216
  260  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  261  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  262  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  284  cd /mongo/logs/
  294  cd /mongo/
  296  vi mongod.conf
  297  sudo systemctl start mongod
  298  cd /mongo/opsmanager/mongodb-mms/bin/
  300  cd /mongo/
  305  ps -ef | grep mongo
  307  sudo systemctl start mongod
  308  ps -ef | grep mongo
  309  mongosh
  310  mongosh -u superAdmin
  311  mongosh
  312  ps -ef | grep mongo
  314  ps -ef | grep mongo
  316  ps -ef | grep mongo
  317  sudo systemctl stop mongod
  318  ps -ef | grep mongo
  320  ps -ef | grep mongo
  326  sudo systemctl start mongod
  327  sudo systemctl status mongod
  328  mongosh
  332  vi mongod.conf
  333  sudo systemctl restart mongod
  334  mongosh
  335  vi mongod.conf
  336  sudo systemctl restart mongod
  337  mongosh
  338  mongosh -u opsmanager_user -p
  342  vi mongod.conf
  343  sudo systemctl restart mongod
  348  ps -ef | grep mongo
  349  mongosh
  350  mongosh -u opsmanager_user -p
  351  vi mongod.conf
  352  sudo systemctl restart mongod
  353  mongosh
  354  vi mongod.conf
  355  sudo systemctl restart mongod
  356  mongosh -u admin
  360  cd /mongo/
  362  cp mongod.conf mongod.conf-self-signed
  363  vi mongod.conf
  364  systemctl restart  mongod
  365  systemctl status mongod
  366  ps -ef | grep mongo
  379  sudo systemctl status mongodb_exporter.service
  391  sudo vi /lib/systemd/system/mongodb_exporter.service
  397  history  | grep mongo
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# cd /mongo/
root@dev-mongodb-poc3:/mongo# ls
apt-get  bin  data  home  logs  mongobackups  mongod.conf  mongod.conf-self-signed  mongo-keyfile  mongoscripts  source  sudo  update
root@dev-mongodb-poc3:/mongo# mkdir mongodb-exporter
root@dev-mongodb-poc3:/mongo# cd mongodb-exporter
root@dev-mongodb-poc3:/mongo/mongodb-exporter# wget https://github.com/percona/mongodb_exporter/releases/download/v0.7.1/mongodb_exporter-0.7.1.linux-amd64.tar.gz
--2025-02-24 13:20:00--  https://github.com/percona/mongodb_exporter/releases/download/v0.7.1/mongodb_exporter-0.7.1.linux-amd64.tar.gz
Resolving github.com (github.com)... 20.207.73.82
Connecting to github.com (github.com)|20.207.73.82|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://objects.githubusercontent.com/github-production-release-asset-2e65be/55603028/e8b05800-8c64-11e9-87a9-da9332481460?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=releaseassetproduction%2F20250224%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250224T075000Z&X-Amz-Expires=300&X-Amz-Signature=66a9eeedc7aff270d021fb1621e281fad78d22f9519946a8d570657348d46a2e&X-Amz-SignedHeaders=host&response-content-disposition=attachment%3B%20filename%3Dmongodb_exporter-0.7.1.linux-amd64.tar.gz&response-content-type=application%2Foctet-stream [following]
--2025-02-24 13:20:00--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/55603028/e8b05800-8c64-11e9-87a9-da9332481460?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=releaseassetproduction%2F20250224%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250224T075000Z&X-Amz-Expires=300&X-Amz-Signature=66a9eeedc7aff270d021fb1621e281fad78d22f9519946a8d570657348d46a2e&X-Amz-SignedHeaders=host&response-content-disposition=attachment%3B%20filename%3Dmongodb_exporter-0.7.1.linux-amd64.tar.gz&response-content-type=application%2Foctet-stream
Resolving objects.githubusercontent.com (objects.githubusercontent.com)... 185.199.110.133, 185.199.108.133, 185.199.109.133, ...
Connecting to objects.githubusercontent.com (objects.githubusercontent.com)|185.199.110.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 6670517 (6.4M) [application/octet-stream]
Saving to: ‘mongodb_exporter-0.7.1.linux-amd64.tar.gz’

mongodb_exporter-0.7.1.linux-amd64.tar. 100%[==============================================================================>]   6.36M  5.09MB/s    in 1.2s

2025-02-24 13:20:03 (5.09 MB/s) - ‘mongodb_exporter-0.7.1.linux-amd64.tar.gz’ saved [6670517/6670517]

root@dev-mongodb-poc3:/mongo/mongodb-exporter# ls
mongodb_exporter-0.7.1.linux-amd64.tar.gz
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter# tar xvzf mongodb_exporter-0.7.1.linux-amd64.tar.gz
CHANGELOG.md
LICENSE
README.md
mongodb_exporter
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter# sudo mv mongodb_exporter /usr/local/bin/
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter# mongosh -u superAdmin -p
Enter password: **********
Current Mongosh Log ID: 67bc24ec57dcd03d21c1c18b
Connecting to:          mongodb://<credentials>@127.0.0.1:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.3.3
MongoServerSelectionError: connection <monitor> to 127.0.0.1:27017 closed
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter# mongosh -u superAdmin -p
Enter password: **********
Current Mongosh Log ID: 67bc24fe6dbbd463eac1c18b
Connecting to:          mongodb://<credentials>@127.0.0.1:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.3.3
MongoServerSelectionError: connection <monitor> to 127.0.0.1:27017 closed
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter# mongosh -u superAdmin -p
Enter password: **********
Current Mongosh Log ID: 67bc25172c00fc09d8c1c18b
Connecting to:          mongodb://<credentials>@127.0.0.1:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.3.3
MongoServerSelectionError: connection <monitor> to 127.0.0.1:27017 closed
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter# ps -ef | grep mongo
root     1446033       1 23 Jan09 ?        10-17:30:50 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
mongodb  2461894       1  1 Feb04 ?        09:04:01 /mongo/bin/mongod --config /mongo/mongod.conf
root     3878196 3875339  0 13:21 pts/3    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:/mongo/mongodb-exporter#
root@dev-mongodb-poc3:/mongo/mongodb-exporter# ps -ef | grep mongo
root     1446033       1 23 Jan09 ?        10-17:30:55 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
mongodb  2461894       1  1 Feb04 ?        09:05:21 /mongo/bin/mongod --config /mongo/mongod.conf
root     3881780 3875339  0 14:36 pts/3    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:/mongo/mongodb-exporter# cd /lib/systemd/system/
root@dev-mongodb-poc3:/lib/systemd/system# sudo vi mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl daemon-reload
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl start mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl status mongodb_exporter.service
× mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:37:59 IST; 5s ago
    Process: 3881916 ExecStart=/usr/local/bin/mongodb_exporter (code=exited, status=1/FAILURE)
   Main PID: 3881916 (code=exited, status=1/FAILURE)
        CPU: 11ms

Feb 24 14:37:59 dev-mongodb-poc3 systemd[1]: mongodb_exporter.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:37:59 dev-mongodb-poc3 systemd[1]: Stopped MongoDB Exporter.
Feb 24 14:37:59 dev-mongodb-poc3 systemd[1]: mongodb_exporter.service: Start request repeated too quickly.
Feb 24 14:37:59 dev-mongodb-poc3 systemd[1]: mongodb_exporter.service: Failed with result 'exit-code'.
Feb 24 14:37:59 dev-mongodb-poc3 systemd[1]: Failed to start MongoDB Exporter.
root@dev-mongodb-poc3:/lib/systemd/system# ps -ef | grep mongo
root     1446033       1 23 Jan09 ?        10-17:30:55 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://prometheus_user:4gr@fanA@localhost:27017/admin --collect-all --compatible-mode
mongodb  2461894       1  1 Feb04 ?        09:05:23 /mongo/bin/mongod --config /mongo/mongod.conf
root     3881968 3875339  0 14:38 pts/3    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# kill -9 1446033
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# ps -ef | grep mongo
mongodb  2461894       1  1 Feb04 ?        09:05:23 /mongo/bin/mongod --config /mongo/mongod.conf
root     3881998 3875339  0 14:39 pts/3    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl start mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# ps -ef | grep mongo
mongodb  2461894       1  1 Feb04 ?        09:05:23 /mongo/bin/mongod --config /mongo/mongod.conf
root     3882003       1  0 14:39 ?        00:00:00 /usr/local/bin/mongodb_exporter
root     3882011 3875339  0 14:39 pts/3    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 14:39:27 IST; 31s ago
   Main PID: 3882003 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 3.0M
        CPU: 29ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3882003 /usr/local/bin/mongodb_exporter

Feb 24 14:39:27 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 14:39:27 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:27+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 14:39:27 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:27+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 14:39:27 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:27+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 14:39:27 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:27+05:30" level=error msg="Can't create mongo session to mongodb://localhos>
Feb 24 14:39:27 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:27+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
Feb 24 14:39:31 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:31+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 14:39:31 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:31+05:30" level=error msg="Can't create mongo session to mongodb://localhos>
Feb 24 14:39:46 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:46+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 14:39:46 dev-mongodb-poc3 mongodb_exporter[3882003]: time="2025-02-24T14:39:46+05:30" level=error msg="Can't create mongo session to mongodb://localhos>

root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# exit
logout
touadmin@dev-mongodb-poc3:~$ sudo su -
[sudo] password for touadmin:
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep mongo
mongodb  2461894       1  1 Feb04 ?        09:05:25 /mongo/bin/mongod --config /mongo/mongod.conf
root     3882003       1  0 14:39 ?        00:00:00 /usr/local/bin/mongodb_exporter
root     3882042 3882030  0 14:40 pts/2    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl stop mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# cd ~
sudo curl http://localhost:9216/metrics
curl: (7) Failed to connect to localhost port 9216 after 0 ms: Connection refused
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo curl http://192.168.61.138:9216/metrics~
curl: (7) Failed to connect to 192.168.61.138 port 9216 after 0 ms: Connection refused
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl start mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 14:42:06 IST; 4s ago
   Main PID: 3882067 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 8ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3882067 /usr/local/bin/mongodb_exporter

Feb 24 14:42:06 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 14:42:06 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T14:42:06+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 14:42:06 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T14:42:06+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 14:42:06 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T14:42:06+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 14:42:06 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T14:42:06+05:30" level=error msg="Can't create mongo session to mongodb://localhos>
Feb 24 14:42:06 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T14:42:06+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /etc/systemd/system/prometheus.service
root@dev-mongodb-poc3:~# sudo systemctl restart prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl enable prometheus
Created symlink /etc/systemd/system/multi-user.target.wants/prometheus.service ? /etc/systemd/system/prometheus.service.
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:45:50 IST; 27s ago
   Main PID: 3882137 (code=exited, status=217/USER)
        CPU: 2ms

Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /etc/systemd/system/prometheus.service
root@dev-mongodb-poc3:~# sudo id prometheus
id: ‘prometheus’: no such user
root@dev-mongodb-poc3:~# sudo useradd --no-create-home --shell /bin/false prometheus
root@dev-mongodb-poc3:~# sudo chown -R prometheus:prometheus /etc/prometheus /var/lib/prometheus
root@dev-mongodb-poc3:~# journalctl -u prometheus.service -xe
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ An ExecStart= process belonging to unit prometheus.service has exited.
¦¦
¦¦ The process' exit code is 'exited' and its exit status is 217.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
¦¦ Subject: Unit failed
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ The unit prometheus.service has entered the 'failed' state with result 'exit-code'.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
¦¦ Subject: Automatic restarting of a unit has been scheduled
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ Automatic restarting of the unit prometheus.service has been scheduled, as the result for
¦¦ the configured Restart= setting for the unit.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
¦¦ Subject: A stop job for unit prometheus.service has finished
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ A stop job for unit prometheus.service has finished.
¦¦
¦¦ The job identifier is 153404 and the job result is done.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
¦¦ Subject: Unit failed
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ The unit prometheus.service has entered the 'failed' state with result 'exit-code'.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
¦¦ Subject: A start job for unit prometheus.service has failed
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ A start job for unit prometheus.service has finished with a failure.
¦¦
¦¦ The job identifier is 153404 and the job result is failed.

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:48:23 IST; 5s ago
    Process: 3882334 ExecStart=/usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/ --web.console.t>
   Main PID: 3882334 (code=exited, status=1/FAILURE)
        CPU: 80ms

Feb 24 14:48:23 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=1/FAILURE
Feb 24 14:48:23 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:48:23 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:48:23 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:48:23 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:48:23 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:48:23 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo journalctl -u prometheus.service -n 100
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882134]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882134]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 2.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882135]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882135]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 3.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882136]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882136]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 4.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882137]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882137]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
Feb 24 14:48:22 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.426Z caller=main.go:512 level=info msg="No time or size retention was set so usin>
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.427Z caller=main.go:556 level=info msg="Starting Prometheus Server" mode=server v>
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.427Z caller=main.go:561 level=info build_context="(go=go1.19.3, user=root@79e0ee4>
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.427Z caller=main.go:562 level=info host_details="(Linux 5.15.0-126-generic #136-U>
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.427Z caller=main.go:563 level=info fd_limits="(soft=524288, hard=524288)"
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.427Z caller=main.go:564 level=info vm_limits="(soft=unlimited, hard=unlimited)"
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.432Z caller=web.go:559 level=info component=web msg="Start listening for connecti>
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.432Z caller=main.go:807 level=error msg="Unable to start web listener" err="liste>

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9090
COMMAND       PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
prometheu 3877263 root    7u  IPv6 16379258      0t0  TCP *:9090 (LISTEN)
prometheu 3877263 root   63u  IPv4 16379275      0t0  TCP dev-mongodb-poc3:47346->dev-mongodb-poc3:9090 (ESTABLISHED)
prometheu 3877263 root   64u  IPv6 16378625      0t0  TCP dev-mongodb-poc3:9090->dev-mongodb-poc3:47346 (ESTABLISHED)
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl restart prometheus
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:51:13 IST; 1s ago
    Process: 3882403 ExecStart=/usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/ --web.console.t>
   Main PID: 3882403 (code=exited, status=1/FAILURE)
        CPU: 77ms

Feb 24 14:51:13 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:51:13 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:51:13 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:51:13 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:51:13 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /etc/systemd/system/prometheus.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl restart prometheus
Warning: The unit file, source configuration file or drop-ins of prometheus.service changed on disk. Run 'systemctl daemon-reload' to reload units.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl restart prometheus
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:53:36 IST; 2s ago
    Process: 3882536 ExecStart=/usr/local/bin/prometheus (code=exited, status=2)
   Main PID: 3882536 (code=exited, status=2)
        CPU: 73ms

Feb 24 14:53:35 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# journalctl -u prometheus.service -xe
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ An ExecStart= process belonging to unit prometheus.service has exited.
¦¦
¦¦ The process' exit code is 'exited' and its exit status is 2.
Feb 24 14:53:35 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
¦¦ Subject: Unit failed
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ The unit prometheus.service has entered the 'failed' state with result 'exit-code'.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
¦¦ Subject: Automatic restarting of a unit has been scheduled
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ Automatic restarting of the unit prometheus.service has been scheduled, as the result for
¦¦ the configured Restart= setting for the unit.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
¦¦ Subject: A stop job for unit prometheus.service has finished
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ A stop job for unit prometheus.service has finished.
¦¦
¦¦ The job identifier is 155457 and the job result is done.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
¦¦ Subject: Unit failed
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ The unit prometheus.service has entered the 'failed' state with result 'exit-code'.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
¦¦ Subject: A start job for unit prometheus.service has failed
¦¦ Defined-By: systemd
¦¦ Support: http://www.ubuntu.com/support
¦¦
¦¦ A start job for unit prometheus.service has finished with a failure.
¦¦
¦¦ The job identifier is 155457 and the job result is failed.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:53:36 IST; 1min 19s ago
    Process: 3882536 ExecStart=/usr/local/bin/prometheus (code=exited, status=2)
   Main PID: 3882536 (code=exited, status=2)
        CPU: 73ms

Feb 24 14:53:35 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:53:36 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo -u prometheus /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/ --web.console.libraries=/usr/share/prometheus/console_libraries --web.console.templates=/usr/share/prometheus/consoles
ts=2025-02-24T09:25:30.080Z caller=main.go:512 level=info msg="No time or size retention was set so using the default time retention" duration=15d
ts=2025-02-24T09:25:30.080Z caller=main.go:556 level=info msg="Starting Prometheus Server" mode=server version="(version=2.40.0, branch=HEAD, revision=c08d76b363f0d8052f3d2298df06b616af30900e)"
ts=2025-02-24T09:25:30.080Z caller=main.go:561 level=info build_context="(go=go1.19.3, user=root@79e0ee4d5b14, date=20221107-18:11:08)"
ts=2025-02-24T09:25:30.080Z caller=main.go:562 level=info host_details="(Linux 5.15.0-126-generic #136-Ubuntu SMP Wed Nov 6 10:38:22 UTC 2024 x86_64 dev-mongodb-poc3 (none))"
ts=2025-02-24T09:25:30.081Z caller=main.go:563 level=info fd_limits="(soft=1048576, hard=1048576)"
ts=2025-02-24T09:25:30.081Z caller=main.go:564 level=info vm_limits="(soft=unlimited, hard=unlimited)"
ts=2025-02-24T09:25:30.083Z caller=web.go:559 level=info component=web msg="Start listening for connections" address=0.0.0.0:9090
ts=2025-02-24T09:25:30.084Z caller=main.go:807 level=error msg="Unable to start web listener" err="listen tcp 0.0.0.0:9090: bind: address already in use"
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9091
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl restart prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:56:11 IST; 2s ago
    Process: 3882618 ExecStart=/usr/local/bin/prometheus (code=exited, status=2)
   Main PID: 3882618 (code=exited, status=2)
        CPU: 75ms

Feb 24 14:56:11 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=2/INVALIDARGUMENT
Feb 24 14:56:11 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:56:11 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:56:11 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:56:11 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:56:11 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:56:11 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart prometheus
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:56:31 IST; 2s ago
    Process: 3882697 ExecStart=/usr/local/bin/prometheus (code=exited, status=2)
   Main PID: 3882697 (code=exited, status=2)
        CPU: 69ms

Feb 24 14:56:31 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:56:31 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:56:31 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:56:31 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:56:31 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9090
COMMAND       PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
prometheu 3877263 root    7u  IPv6 16379258      0t0  TCP *:9090 (LISTEN)
prometheu 3877263 root   63u  IPv4 16379275      0t0  TCP dev-mongodb-poc3:47346->dev-mongodb-poc3:9090 (ESTABLISHED)
prometheu 3877263 root   64u  IPv6 16378625      0t0  TCP dev-mongodb-poc3:9090->dev-mongodb-poc3:47346 (ESTABLISHED)
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9091
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo kill -9 3877263
root@dev-mongodb-poc3:~# sudo lsof -i :9090
root@dev-mongodb-poc3:~# sudo systemctl start prometheus
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:58:48 IST; 7s ago
    Process: 3882766 ExecStart=/usr/local/bin/prometheus (code=exited, status=2)
   Main PID: 3882766 (code=exited, status=2)
        CPU: 63ms

Feb 24 14:58:48 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:58:48 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:58:48 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:58:48 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:58:48 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:58:48 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /etc/systemd/system/prometheus.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl restart prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 14:59:33 IST; 2s ago
    Process: 3882849 ExecStart=/usr/local/bin/prometheus (code=exited, status=2)
   Main PID: 3882849 (code=exited, status=2)
        CPU: 70ms

Feb 24 14:59:33 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:59:33 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:59:33 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:59:33 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:59:33 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:59:33 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9090
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9091
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo journalctl -u prometheus
Feb 24 14:45:48 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:48 dev-mongodb-poc3 systemd[3882133]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:48 dev-mongodb-poc3 systemd[3882133]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:48 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:48 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 1.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882134]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882134]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 2.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882135]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882135]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 3.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882136]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882136]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 4.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882137]: prometheus.service: Failed to determine user credentials: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[3882137]: prometheus.service: Failed at step USER spawning /usr/local/bin/prometheus: No such process
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Main process exited, code=exited, status=217/USER
Feb 24 14:45:49 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 14:45:50 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
Feb 24 14:48:22 dev-mongodb-poc3 systemd[1]: Started Prometheus.
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.426Z caller=main.go:512 level=info msg="No time or size retention was set so usin>
Feb 24 14:48:22 dev-mongodb-poc3 prometheus[3882313]: ts=2025-02-24T09:18:22.427Z caller=main.go:556 level=info msg="Starting Prometheus Server" mode=server v>

root@dev-mongodb-poc3:~# sudo systemctl disable prometheus
Removed /etc/systemd/system/multi-user.target.wants/prometheus.service.
root@dev-mongodb-poc3:~# sudo systemctl enable prometheus
Created symlink /etc/systemd/system/multi-user.target.wants/prometheus.service ? /etc/systemd/system/prometheus.service.
root@dev-mongodb-poc3:~# sudo systemctl start prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
× prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: failed (Result: exit-code) since Mon 2025-02-24 15:01:00 IST; 3s ago
    Process: 3882984 ExecStart=/usr/local/bin/prometheus (code=exited, status=2)
   Main PID: 3882984 (code=exited, status=2)
        CPU: 62ms

Feb 24 15:01:00 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 15:01:00 dev-mongodb-poc3 systemd[1]: prometheus.service: Scheduled restart job, restart counter is at 5.
Feb 24 15:01:00 dev-mongodb-poc3 systemd[1]: Stopped Prometheus.
Feb 24 15:01:00 dev-mongodb-poc3 systemd[1]: prometheus.service: Start request repeated too quickly.
Feb 24 15:01:00 dev-mongodb-poc3 systemd[1]: prometheus.service: Failed with result 'exit-code'.
Feb 24 15:01:00 dev-mongodb-poc3 systemd[1]: Failed to start Prometheus.
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ls -l /etc/prometheus
total 64
drwxr-xr-x 2 prometheus prometheus  4096 Nov  8  2022 console_libraries
-rw-r--r-- 1 prometheus prometheus   616 Nov  8  2022 index.html.example
-rw-r--r-- 1 prometheus prometheus  2675 Nov  8  2022 node-cpu.html
-rw-r--r-- 1 prometheus prometheus  3522 Nov  8  2022 node-disk.html
-rw-r--r-- 1 prometheus prometheus  1453 Nov  8  2022 node.html
-rw-r--r-- 1 prometheus prometheus  5783 Nov  8  2022 node-overview.html
-rw------- 1 prometheus prometheus 18154 Feb 24 14:30 nohup.out
-rw-r--r-- 1 prometheus prometheus  1334 Nov  8  2022 prometheus.html
-rw-r--r-- 1 prometheus prometheus  4103 Nov  8  2022 prometheus-overview.html
-rw-r--r-- 1 prometheus prometheus   246 Feb 24 13:16 prometheus.yml
root@dev-mongodb-poc3:~# ls -l /var/lib/prometheus
total 112
drwxr-xr-x 3 prometheus prometheus  4096 Feb  9 22:30 01JKNTEZQHWH3AFZTJC2TMEDAT
drwxr-xr-x 3 prometheus prometheus  4096 Feb 10 16:30 01JKQR8GXF73KXV3GH9Q1HG0EP
drwxr-xr-x 3 prometheus prometheus  4096 Feb 11 10:30 01JKSP227H6WMP5YYJ6GER76HD
drwxr-xr-x 3 prometheus prometheus  4096 Feb 12 04:30 01JKVKVKDPT3J1Q45PYCBBY5S0
drwxr-xr-x 3 prometheus prometheus  4096 Feb 12 22:30 01JKXHN4RST628JEX0E738HERR
drwxr-xr-x 3 prometheus prometheus  4096 Feb 13 16:30 01JKZFENY08N21QQ58HEZ2Z8SN
drwxr-xr-x 3 prometheus prometheus  4096 Feb 14 10:30 01JM1D877RYTZCT5RTTJZW1FN5
drwxr-xr-x 3 prometheus prometheus  4096 Feb 15 04:30 01JM3B1RD1PC2NMPDPHYV2BXM8
drwxr-xr-x 3 prometheus prometheus  4096 Feb 15 22:30 01JM58V9QPR4BZ1D0KYP4YPXY6
drwxr-xr-x 3 prometheus prometheus  4096 Feb 16 16:30 01JM76MTX2BXHG2S4SVVA7HCTH
drwxr-xr-x 3 prometheus prometheus  4096 Feb 17 10:30 01JM94EC86QD6EC36CJA8ZSMPG
drwxr-xr-x 3 prometheus prometheus  4096 Feb 18 04:30 01JMB27XGBWZZ5GY8BW1BVDY5W
drwxr-xr-x 3 prometheus prometheus  4096 Feb 18 22:30 01JMD01EQR158XDCW8GNDHBA7M
drwxr-xr-x 3 prometheus prometheus  4096 Feb 19 16:30 01JMEXTZYGABGXAEC3F0FP8280
drwxr-xr-x 3 prometheus prometheus  4096 Feb 20 10:30 01JMGVMH7CJQKD1CY9KQ49QFZ7
drwxr-xr-x 3 prometheus prometheus  4096 Feb 21 04:30 01JMJSE2EVMVXD16NTNFWA7G28
drwxr-xr-x 3 prometheus prometheus  4096 Feb 21 22:30 01JMMQ7KRNE3R15NBRQZBR1VP8
drwxr-xr-x 3 prometheus prometheus  4096 Feb 22 16:30 01JMPN14YEZ9WQ1RHKAHJC204G
drwxr-xr-x 3 prometheus prometheus  4096 Feb 23 10:30 01JMRJTP86VVEKS1K2J4RW0NPB
drwxr-xr-x 3 prometheus prometheus  4096 Feb 24 04:30 01JMTGM7ECWATJ7ZECFAFPZ9DE
drwxr-xr-x 3 prometheus prometheus  4096 Feb 24 08:30 01JMTYBNRJQ13W8WGM2R8NE4Z2
drwxr-xr-x 3 prometheus prometheus  4096 Feb 24 10:30 01JMV57D0NFC8SNS44V1F4V2KJ
drwxr-xr-x 3 prometheus prometheus  4096 Feb 24 10:30 01JMV57D4S11TQKEZEE6X9KXYD
drwxr-xr-x 3 prometheus prometheus  4096 Feb 24 12:30 01JMVC348H2TFQMTCMD4PZ21K9
drwxr-xr-x 3 prometheus prometheus  4096 Feb 24 14:30 01JMVJYQPECPKK178Q37Q1APCZ
drwxr-xr-x 2 prometheus prometheus  4096 Feb 24 14:30 chunks_head
-rw-r--r-- 1 prometheus prometheus     0 Feb 24 13:16 lock
-rw-r--r-- 1 prometheus prometheus 20001 Feb 24 14:55 queries.active
drwxr-xr-x 3 prometheus prometheus  4096 Feb 24 14:30 wal
root@dev-mongodb-poc3:~# sudo chown -R prometheus:prometheus /etc/prometheus
root@dev-mongodb-poc3:~# sudo chown -R prometheus:prometheus /var/lib/prometheus
root@dev-mongodb-poc3:~# sudo vi /etc/systemd/system/prometheus.service
root@dev-mongodb-poc3:~# sudo systemctl disable prometheus
Removed /etc/systemd/system/multi-user.target.wants/prometheus.service.
root@dev-mongodb-poc3:~# sudo vi /etc/systemd/system/prometheus.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl disable prometheus
root@dev-mongodb-poc3:~# sudo systemctl enable prometheus
Created symlink /etc/systemd/system/multi-user.target.wants/prometheus.service ? /etc/systemd/system/prometheus.service.
root@dev-mongodb-poc3:~# sudo systemctl start prometheus
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status prometheus
? prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:04:17 IST; 14s ago
   Main PID: 3883199 (prometheus)
      Tasks: 8 (limit: 9351)
     Memory: 30.0M
        CPU: 199ms
     CGroup: /system.slice/prometheus.service
             +-3883199 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/ --web.console.templates>

Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.355Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.371Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.372Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.372Z caller=head.go:719 level=info component=tsdb msg="WAL replay completed" chec>
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.376Z caller=main.go:1014 level=info fs_type=EXT4_SUPER_MAGIC
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.376Z caller=main.go:1017 level=info msg="TSDB started"
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.376Z caller=main.go:1197 level=info msg="Loading configuration file" filename=/et>
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.377Z caller=main.go:1234 level=info msg="Completed loading of configuration file">
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.377Z caller=main.go:978 level=info msg="Server is ready to receive web requests."
Feb 24 15:04:17 dev-mongodb-poc3 prometheus[3883199]: ts=2025-02-24T09:34:17.378Z caller=manager.go:944 level=info component="rule manager" msg="Starting rule>

root@dev-mongodb-poc3:~# sudo ufw allow 9091
Rule added
Rule added (v6)
root@dev-mongodb-poc3:~# sudo ufw status
Status: active

To                         Action      From
--                         ------      ----
3000/tcp                   ALLOW       Anywhere
27017/tcp                  ALLOW       Anywhere
22/tcp                     ALLOW       Anywhere
3001/tcp                   ALLOW       Anywhere
9090/tcp                   ALLOW       Anywhere
9216/tcp                   ALLOW       Anywhere
8080/tcp                   ALLOW       Anywhere
27017                      ALLOW       192.168.61.138
27017                      ALLOW       Anywhere
80/tcp                     ALLOW       Anywhere
3306                       ALLOW       Anywhere
9090                       ALLOW       Anywhere
9091                       ALLOW       Anywhere
3000/tcp (v6)              ALLOW       Anywhere (v6)
27017/tcp (v6)             ALLOW       Anywhere (v6)
22/tcp (v6)                ALLOW       Anywhere (v6)
3001/tcp (v6)              ALLOW       Anywhere (v6)
9090/tcp (v6)              ALLOW       Anywhere (v6)
9216/tcp (v6)              ALLOW       Anywhere (v6)
8080/tcp (v6)              ALLOW       Anywhere (v6)
27017 (v6)                 ALLOW       Anywhere (v6)
80/tcp (v6)                ALLOW       Anywhere (v6)
3306 (v6)                  ALLOW       Anywhere (v6)
9090 (v6)                  ALLOW       Anywhere (v6)
9091 (v6)                  ALLOW       Anywhere (v6)

root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 14:42:06 IST; 25min ago
   Main PID: 3882067 (mongodb_exporte)
      Tasks: 7 (limit: 9351)
     Memory: 5.8M
        CPU: 351ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3882067 /usr/local/bin/mongodb_exporter

Feb 24 15:06:01 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:06:01+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 15:06:01 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:06:01+05:30" level=error msg="Can't create mongo session to mongodb://localhos>
Feb 24 15:06:16 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:06:16+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 15:06:16 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:06:16+05:30" level=error msg="Can't create mongo session to mongodb://localhos>
Feb 24 15:06:31 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:06:31+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 15:06:31 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:06:31+05:30" level=error msg="Can't create mongo session to mongodb://localhos>
Feb 24 15:06:46 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:06:46+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 15:06:46 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:06:46+05:30" level=error msg="Can't create mongo session to mongodb://localhos>
Feb 24 15:07:01 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:07:01+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 15:07:01 dev-mongodb-poc3 mongodb_exporter[3882067]: time="2025-02-24T15:07:01+05:30" level=error msg="Can't create mongo session to mongodb://localhos>

root@dev-mongodb-poc3:~# env | grep mongodb
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep mongo
mongodb  2461894       1  1 Feb04 ?        09:05:53 /mongo/bin/mongod --config /mongo/mongod.conf
root     3882067       1  0 14:42 ?        00:00:00 /usr/local/bin/mongodb_exporter
root     3883313 3882030  0 15:09 pts/2    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:~# env | grep mongodb
root@dev-mongodb-poc3:~# export MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.165:27017
root@dev-mongodb-poc3:~# env | grep mongodb
MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.165:27017
root@dev-mongodb-poc3:~# cd /lib/systemd/system/
root@dev-mongodb-poc3:/lib/systemd/system# sudo nano mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl daemon-reload
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl start mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:11:20 IST; 5s ago
   Main PID: 3883393 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 10ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3883393 /usr/local/bin/mongodb_exporter

Feb 24 15:11:20 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:11:20 dev-mongodb-poc3 mongodb_exporter[3883393]: time="2025-02-24T15:11:20+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:11:20 dev-mongodb-poc3 mongodb_exporter[3883393]: time="2025-02-24T15:11:20+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:11:20 dev-mongodb-poc3 mongodb_exporter[3883393]: time="2025-02-24T15:11:20+05:30" level=error msg="Cannot connect to server using url mongodb://loc>
Feb 24 15:11:20 dev-mongodb-poc3 mongodb_exporter[3883393]: time="2025-02-24T15:11:20+05:30" level=error msg="Can't create mongo session to mongodb://localhos>
Feb 24 15:11:20 dev-mongodb-poc3 mongodb_exporter[3883393]: time="2025-02-24T15:11:20+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>

root@dev-mongodb-poc3:/lib/systemd/system# sudo nano /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo nano /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl daemon-reload
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:13:54 IST; 4s ago
   Main PID: 3883485 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.4M
        CPU: 12ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3883485 /usr/local/bin/mongodb_exporter

Feb 24 15:13:54 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:13:54 dev-mongodb-poc3 mongodb_exporter[3883485]: time="2025-02-24T15:13:54+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:13:54 dev-mongodb-poc3 mongodb_exporter[3883485]: time="2025-02-24T15:13:54+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:13:54 dev-mongodb-poc3 mongodb_exporter[3883485]: time="2025-02-24T15:13:54+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:13:54 dev-mongodb-poc3 mongodb_exporter[3883485]: time="2025-02-24T15:13:54+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:13:54 dev-mongodb-poc3 mongodb_exporter[3883485]: time="2025-02-24T15:13:54+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>

root@dev-mongodb-poc3:/lib/systemd/system# mongo --username promusr --password p60mUsr --host 192.168.61.165 --port 27017
Command 'mongo' not found, did you mean:
  command 'mono' from deb mono-runtime (6.8.0.105+dfsg-3.2)
Try: apt install <deb name>
root@dev-mongodb-poc3:/lib/systemd/system# mongosh --username promusr --password p60mUsr --host 192.168.61.165 --port 27017
Current Mongosh Log ID: 67bc3f94a92708c8cdc1c18b
Connecting to:          mongodb://<credentials>@192.168.61.165:27017/?directConnection=true&appName=mongosh+2.3.3
Using MongoDB:          8.0.3
Using Mongosh:          2.3.3
mongosh 2.4.0 is available for download: https://www.mongodb.com/try/download/shell

For mongosh info see: https://www.mongodb.com/docs/mongodb-shell/

------
   The server generated these startup warnings when booting
   2025-02-05T16:23:23.549+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-05T16:23:23.549+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-05T16:23:23.549+05:30: We suggest setting the contents of sysfsFile to 0.
   2025-02-05T16:23:23.549+05:30: vm.max_map_count is too low
   2025-02-05T16:23:23.549+05:30: We suggest setting swappiness to 0 or 1, as swapping can cause performance problems.
------

smsrwaiss0 [direct: primary] test> telnet 192.168.61.165 27017
Uncaught:
SyntaxError: Missing semicolon. (1:6)

> 1 | telnet 192.168.61.165 27017
    |       ^
  2 |

smsrwaiss0 [direct: primary] test> exit
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# telnet 192.168.61.165 27017
Trying 192.168.61.165...
Connected to 192.168.61.165.
Escape character is '^]'.
^C^[^C^X^Z^H^H^H^^^66^H^H^
Connection closed by foreign host.
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl daemon-reload
sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:16:27 IST; 10s ago
   Main PID: 3883579 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 2.3M
        CPU: 11ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3883579 /usr/local/bin/mongodb_exporter

Feb 24 15:16:27 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
Feb 24 15:16:31 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:31+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:16:31 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:31+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
lines 1-18/18 (END)
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# env | grep mongodb
MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.165:27017
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# journalctl -u mongodb_exporter.service -f
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.165:27017: no reachable servers" source="connection.go:86"
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.165:27017" source="mongodb_collector.go:202"
Feb 24 15:16:27 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:27+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
Feb 24 15:16:31 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:31+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.165:27017: no reachable servers" source="connection.go:86"
Feb 24 15:16:31 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:31+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.165:27017" source="mongodb_collector.go:202"
Feb 24 15:16:46 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:46+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.165:27017: no reachable servers" source="connection.go:86"
Feb 24 15:16:46 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:16:46+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.165:27017" source="mongodb_collector.go:202"
Feb 24 15:17:01 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:17:01+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.165:27017: no reachable servers" source="connection.go:86"
Feb 24 15:17:01 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:17:01+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.165:27017" source="mongodb_collector.go:202"
Feb 24 15:17:16 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:17:16+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.165:27017: no reachable servers" source="connection.go:86"
Feb 24 15:17:16 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:17:16+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.165:27017" source="mongodb_collector.go:202"
nc -zv 192.168.61.165 27017

root@dev-mongodb-poc3:/lib/systemd/system# nc -zv 192.168.61.165 27017
Connection to 192.168.61.165 27017 port [tcp/*] succeeded!
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# /usr/local/bin/mongodb_exporter --mongodb.uri="mongodb://promusr:p60mUsr@192.168.61.165:27017" --log.level=debug
INFO[0000] Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)  source="mongodb_exporter.go:106"
INFO[0000] Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)  source="mongodb_exporter.go:107"
ERRO[0000] Cannot connect to server using url mongodb://****:****@192.168.61.165:27017: no reachable servers  source="connection.go:86"
ERRO[0000] Can't create mongo session to mongodb://****:****@192.168.61.165:27017  source="mongodb_collector.go:202"
INFO[0000] Starting HTTP server for http://:9216/metrics ...  source="server.go:121"
FATA[0000] listen tcp :9216: bind: address already in use  source="server.go:122"
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# env | grep mongodb
MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.165:27017
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# ps -ef | grep mogno
root     3883620 3882030  0 15:19 pts/2    00:00:00 grep --color=auto mogno
root@dev-mongodb-poc3:/lib/systemd/system# ps -ef | grep mongo
mongodb  2461894       1  1 Feb04 ?        09:06:04 /mongo/bin/mongod --config /mongo/mongod.conf
root     3883579       1  0 15:16 ?        00:00:00 /usr/local/bin/mongodb_exporter
root     3883622 3882030  0 15:19 pts/2    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# vi /mongo/mongod.conf
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# systemctl status mongod
? mongod.service - MongoDB Database Server
     Loaded: loaded (/lib/systemd/system/mongod.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2025-02-04 13:24:13 IST; 2 weeks 6 days ago
       Docs: https://docs.mongodb.org/manual
   Main PID: 2461894 (mongod)
     Memory: 1.6G
        CPU: 9h 6min 21.355s
     CGroup: /system.slice/mongod.service
             +-2461894 /mongo/bin/mongod --config /mongo/mongod.conf

Feb 04 13:24:13 dev-mongodb-poc3 systemd[1]: Started MongoDB Database Server.
Feb 04 13:24:13 dev-mongodb-poc3 mongod[2461894]: {"t":{"$date":"2025-02-04T07:54:13.872Z"},"s":"I",  "c":"CONTROL",  "id":7484500, "ctx":"main","msg":"Enviro>

root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# systemctl restart mongod
root@dev-mongodb-poc3:/lib/systemd/system# systemctl status mongod
? mongod.service - MongoDB Database Server
     Loaded: loaded (/lib/systemd/system/mongod.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:20:49 IST; 58s ago
       Docs: https://docs.mongodb.org/manual
   Main PID: 3883645 (mongod)
     Memory: 222.8M
        CPU: 3.260s
     CGroup: /system.slice/mongod.service
             +-3883645 /mongo/bin/mongod --config /mongo/mongod.conf

Feb 24 15:20:49 dev-mongodb-poc3 systemd[1]: Started MongoDB Database Server.
Feb 24 15:20:49 dev-mongodb-poc3 mongod[3883645]: {"t":{"$date":"2025-02-24T09:50:49.156Z"},"s":"I",  "c":"CONTROL",  "id":7484500, "ctx":"main","msg":"Enviro>
lines 1-12/12 (END)

root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# mongosh
Current Mongosh Log ID: 67bc41614cdbdcc48ac1c18b
Connecting to:          mongodb://127.0.0.1:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.3.3
Using MongoDB:          8.0.3
Using Mongosh:          2.3.3
mongosh 2.4.0 is available for download: https://www.mongodb.com/try/download/shell

For mongosh info see: https://www.mongodb.com/docs/mongodb-shell/

mongopoc_rs0 [direct: primary] test>
(To exit, press Ctrl+C again or Ctrl+D or type .exit)
mongopoc_rs0 [direct: primary] test> exit
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# mongosh -u superAdmin -p
Enter password: **********
Current Mongosh Log ID: 67bc41a8c97cbc0849c1c18b
Connecting to:          mongodb://<credentials>@127.0.0.1:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.3.3
Using MongoDB:          8.0.3
Using Mongosh:          2.3.3
mongosh 2.4.0 is available for download: https://www.mongodb.com/try/download/shell

For mongosh info see: https://www.mongodb.com/docs/mongodb-shell/

------
   The server generated these startup warnings when booting
   2025-02-24T15:20:52.459+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-24T15:20:52.459+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-24T15:20:52.459+05:30: We suggest setting the contents of sysfsFile to 0.
   2025-02-24T15:20:52.459+05:30: vm.max_map_count is too low
   2025-02-24T15:20:52.459+05:30: We suggest setting swappiness to 0 or 1, as swapping can cause performance problems.
------

mongopoc_rs0 [direct: primary] test>

mongopoc_rs0 [direct: primary] test>

mongopoc_rs0 [direct: primary] test> show dbs
admin             248.00 KiB
config            232.00 KiB
dataexplorer       20.00 KiB
feedback           16.00 KiB
grafana            40.00 KiB
local             771.19 MiB
mongopoc            8.65 MiB
monitoringstatus  228.00 KiB
nds                 1.06 MiB
rwa               204.00 KiB
toupop            192.00 KiB
mongopoc_rs0 [direct: primary] test>

mongopoc_rs0 [direct: primary] test> use admin
switched to db admin
mongopoc_rs0 [direct: primary] admin> use admin
already on db admin
mongopoc_rs0 [direct: primary] admin> db.createUser({user: "promusr",pwd: "p60mUsr",roles: [{ role: "clusterMonitor", db: "admin" },{ role: "read", db: "local" }]})
{
  ok: 1,
  '$clusterTime': {
    clusterTime: Timestamp({ t: 1740390855, i: 2 }),
    signature: {
      hash: Binary.createFromBase64('IrScXjcLo5l6B3oyoFlypz6odso=', 0),
      keyId: Long('7442265295525249031')
    }
  },
  operationTime: Timestamp({ t: 1740390855, i: 2 })
}
mongopoc_rs0 [direct: primary] admin> db.getUsers()
{
  users: [
    {
      _id: 'admin.admin',
      userId: UUID('8b8581b9-00ee-499c-bd25-497210ec4b8d'),
      user: 'admin',
      db: 'admin',
      roles: [ { role: 'root', db: 'admin' } ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    },
    {
      _id: 'admin.backupUsr',
      userId: UUID('92156b5a-5dc0-429f-a53b-441a96512689'),
      user: 'backupUsr',
      db: 'admin',
      roles: [
        { role: 'read', db: 'local' },
        { role: 'backup', db: 'admin' },
        { role: 'read', db: 'admin' }
      ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    },
    {
      _id: 'admin.backupusr',
      userId: UUID('54f0a781-4a43-4989-a63d-f2ec0fa601a8'),
      user: 'backupusr',
      db: 'admin',
      roles: [
        { role: 'backup', db: 'admin' },
        { role: 'readWrite', db: 'admin' }
      ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    },
    {
      _id: 'admin.logrotator',
      userId: UUID('82720f66-bfcc-411d-8a0a-60af0f577678'),
      user: 'logrotator',
      db: 'admin',
      roles: [ { role: 'logRotateRole', db: 'admin' } ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    },
    {
      _id: 'admin.opsmanager_user',
      userId: UUID('83744e57-659b-4544-ab4c-f14ecbdabef6'),
      user: 'opsmanager_user',
      db: 'admin',
      roles: [
        { role: 'readWrite', db: 'mmsdbpings' },
        { role: 'readWrite', db: 'mmsdbautomation' },
        { role: 'readWrite', db: 'mmsdbserverlog' },
        { role: 'readWrite', db: 'mmsdb' }
      ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    },
    {
      _id: 'admin.pop_user',
      userId: UUID('d44bf192-c93c-4a6d-9072-065f1e500b80'),
      user: 'pop_user',
      db: 'admin',
      roles: [ { role: 'readWrite', db: 'toupop' } ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    },
    {
      _id: 'admin.prometheus_user',
      userId: UUID('e91c0e86-5da1-4c55-84a6-21f9b183bf05'),
      user: 'prometheus_user',
      db: 'admin',
      roles: [
        { role: 'clusterMonitor', db: 'admin' },
        { role: 'readAnyDatabase', db: 'admin' }
      ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    },
    {
      _id: 'admin.promusr',
      userId: UUID('50a6a3d2-6069-4ad7-a003-2b9fd8b99149'),
      user: 'promusr',
      db: 'admin',
      roles: [
        { role: 'clusterMonitor', db: 'admin' },
        { role: 'read', db: 'local' }
      ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    },
    {
      _id: 'admin.superAdmin',
      userId: UUID('a9cb7ca0-f870-4652-9130-225de67648b2'),
      user: 'superAdmin',
      db: 'admin',
      roles: [ { role: 'root', db: 'admin' } ],
      mechanisms: [ 'SCRAM-SHA-1', 'SCRAM-SHA-256' ]
    }
  ],
  ok: 1,
  '$clusterTime': {
    clusterTime: Timestamp({ t: 1740390855, i: 2 }),
    signature: {
      hash: Binary.createFromBase64('IrScXjcLo5l6B3oyoFlypz6odso=', 0),
      keyId: Long('7442265295525249031')
    }
  },
  operationTime: Timestamp({ t: 1740390855, i: 2 })
}
mongopoc_rs0 [direct: primary] admin> exit
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# env | grep mongodb
MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.165:27017
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# export MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.138:27017
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# env | grep mongodb
MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.138:27017
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl daemon-reload
root@dev-mongodb-poc3:/lib/systemd/system# systemctl restart mongod
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl daemon-reload
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl start mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:16:27 IST; 9min ago
   Main PID: 3883579 (mongodb_exporte)
      Tasks: 8 (limit: 9351)
     Memory: 5.8M
        CPU: 195ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3883579 /usr/local/bin/mongodb_exporter

Feb 24 15:25:31 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:25:31+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:25:31 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:25:31+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:25:41 dev-mongodb-poc3 systemd[1]: /lib/systemd/system/mongodb_exporter.service:3: Unknown key name 'User' in section 'Unit', ignoring.
Feb 24 15:25:46 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:25:46+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:25:46 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:25:46+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:26:01 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:26:01+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:26:01 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:26:01+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:26:10 dev-mongodb-poc3 systemd[1]: /lib/systemd/system/mongodb_exporter.service:3: Unknown key name 'User' in section 'Unit', ignoring.
Feb 24 15:26:16 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:26:16+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:26:16 dev-mongodb-poc3 mongodb_exporter[3883579]: time="2025-02-24T15:26:16+05:30" level=error msg="Can't create mongo session to mongodb://****:***>

root@dev-mongodb-poc3:/lib/systemd/system# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system#
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl daemon-reload
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:28:43 IST; 3s ago
   Main PID: 3884939 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 2.3M
        CPU: 12ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3884939 /usr/local/bin/mongodb_exporter

Feb 24 15:28:43 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:28:43 dev-mongodb-poc3 mongodb_exporter[3884939]: time="2025-02-24T15:28:43+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:28:43 dev-mongodb-poc3 mongodb_exporter[3884939]: time="2025-02-24T15:28:43+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:28:43 dev-mongodb-poc3 mongodb_exporter[3884939]: time="2025-02-24T15:28:43+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:28:43 dev-mongodb-poc3 mongodb_exporter[3884939]: time="2025-02-24T15:28:43+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:28:43 dev-mongodb-poc3 mongodb_exporter[3884939]: time="2025-02-24T15:28:43+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
Feb 24 15:28:46 dev-mongodb-poc3 mongodb_exporter[3884939]: time="2025-02-24T15:28:46+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:28:46 dev-mongodb-poc3 mongodb_exporter[3884939]: time="2025-02-24T15:28:46+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
lines 1-18/18 (END)client_loop: send disconnect: Connection reset by peer
                                                                                                                                                              ?

 ? 2025-02-24 ? ? 15:29.19 ? ? /home/mobaxterm ?
                                                                                                                                                              ?

 ? 2025-02-24 ? ? 15:29.21 ? ? /home/mobaxterm ?
                                                                                                                                                              ?

 ? 2025-02-24 ? ? 15:29.21 ? ? /home/mobaxterm ?
                                                                                                                                                              ?

 ? 2025-02-24 ? ? 15:29.21 ? ? /home/mobaxterm ?
                                                                                                                                                              ?

 ? 2025-02-24 ? ? 15:29.21 ? ? /home/mobaxterm ? ssh touadmin@192.168.61.138
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-126-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Mon Feb 24 03:29:26 PM IST 2025

  System load:  0.23               Processes:              213
  Usage of /:   31.0% of 47.88GB   Users logged in:        0
  Memory usage: 13%                IPv4 address for ens34: 192.168.61.138
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

39 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


*** System restart required ***
Last login: Mon Feb 24 12:12:34 2025 from 192.168.62.60
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$ cd /lib/systemd/system
touadmin@dev-mongodb-poc3:/lib/systemd/system$ ls
 apparmor.service                         mdmon@.service                           ssh@.service
 apport-autoreport.path                   ModemManager.service                     ssh.socket
 apport-autoreport.service                modprobe@.service                        suspend.target
 apport-autoreport.timer                  mongodb_exporter.service                 suspend-then-hibernate.target
 apport-forward@.service                  mongodb_exporter.servicees               swap.target
 apport-forward.socket                    mongod.service                           sys-fs-fuse-connections.mount
 apt-daily.service                        motd-news.service                        sysinit.target
 apt-daily.timer                          motd-news.timer                          sysinit.target.wants
 apt-daily-upgrade.service                multipathd.service                       sys-kernel-config.mount
 apt-daily-upgrade.timer                  multipathd.socket                        sys-kernel-debug.mount
 apt-news.service                         multipath-tools-boot.service             sys-kernel-tracing.mount
 auth-rpcgss-module.service               multipath-tools.service                  syslog.socket
 autovt@.service                          multi-user.target                        sysstat-collect.service
 basic.target                             multi-user.target.wants                  sysstat-collect.timer
 blk-availability.service                 networkd-dispatcher.service              sysstat.service
 blockdev@.target                         network-online.target                    sysstat-summary.service
 bluetooth.target                         network-pre.target                       sysstat-summary.timer
 bolt.service                             network.target                           systemd-ask-password-console.path
 boot-complete.target                     nfs-blkmap.service                       systemd-ask-password-console.service
 cloud-config.service                     nfs-client.target                        systemd-ask-password-plymouth.path
 cloud-config.target                      nfs-common.service                       systemd-ask-password-plymouth.service
 cloud-final.service                      nfsdcld.service                          systemd-ask-password-wall.path
 cloud-init-hotplugd.service              nfs-idmapd.service                       systemd-ask-password-wall.service
 cloud-init-hotplugd.socket               nfs-kernel-server.service                systemd-backlight@.service
 cloud-init-local.service                 nfs-mountd.service                       systemd-binfmt.service
 cloud-init.service                       nfs-server.service                       systemd-bless-boot.service
 cloud-init.target                        nfs-utils.service                        systemd-boot-check-no-failures.service
 console-getty.service                    nftables.service                         systemd-boot-system-token.service
 console-setup.service                    node_exporter.service                    systemd-exit.service
 container-getty@.service                 nss-lookup.target                        systemd-fsckd.service
 cron.service                             nss-user-lookup.target                   systemd-fsckd.socket
 cryptdisks-early.service                 open-iscsi.service                       systemd-fsck-root.service
 cryptdisks.service                       open-vm-tools.service                    systemd-fsck@.service
 cryptsetup-pre.target                    packagekit-offline-update.service        systemd-halt.service
 cryptsetup.target                        packagekit.service                       systemd-hibernate-resume@.service
 ctrl-alt-del.target                      paths.target                             systemd-hibernate.service
 dbus-org.freedesktop.hostname1.service   pg_basebackup@.service                   systemd-hostnamed.service
 dbus-org.freedesktop.locale1.service     pg_basebackup@.timer                     systemd-hybrid-sleep.service
 dbus-org.freedesktop.login1.service      pg_compresswal@.service                  systemd-initctl.service
 dbus-org.freedesktop.timedate1.service   pg_compresswal@.timer                    systemd-initctl.socket
 dbus.service                             pg_dump@.service                         systemd-journald-audit.socket
 dbus.socket                              pg_dump@.timer                           systemd-journald-dev-log.socket
 debug-shell.service                      pg_receivewal@.service                   systemd-journald.service
 default.target                           plymouth-halt.service                    systemd-journald@.service
 dev-hugepages.mount                      plymouth-kexec.service                   systemd-journald.socket
 dev-mqueue.mount                         plymouth-log.service                     systemd-journald@.socket
 dmesg.service                            plymouth-poweroff.service                systemd-journald-varlink@.socket
 dm-event.service                         plymouth-quit.service                    systemd-journal-flush.service
 dm-event.socket                          plymouth-quit-wait.service               systemd-kexec.service
 dpkg-db-backup.service                   plymouth-read-write.service              systemd-localed.service
 dpkg-db-backup.timer                     plymouth-reboot.service                  systemd-localed.service.d
 e2scrub_all.service                      plymouth.service                         systemd-logind.service
 e2scrub_all.timer                        plymouth-start.service                   systemd-machine-id-commit.service
 e2scrub_fail@.service                    plymouth-switch-root-initramfs.service   systemd-modules-load.service
 e2scrub_reap.service                     plymouth-switch-root.service             systemd-networkd.service
 e2scrub@.service                         polkit.service                           systemd-networkd.socket
 emergency.service                        pollinate.service                        systemd-networkd-wait-online.service
 emergency.target                         portmap.service                          systemd-network-generator.service
 esm-cache.service                        postgresql.service                       systemd-poweroff.service
 exit.target                              postgresql@.service                      systemd-pstore.service
 finalrd.service                          poweroff.target                          systemd-quotacheck.service
 final.target                             poweroff.target.wants                    systemd-random-seed.service
 first-boot-complete.target               printer.target                           systemd-reboot.service
 friendly-recovery.service                proc-fs-nfsd.mount                       systemd-remount-fs.service
 friendly-recovery.target                 procps.service                           systemd-resolved.service
 fstrim.service                           proc-sys-fs-binfmt_misc.automount        systemd-rfkill.service
 fstrim.timer                             proc-sys-fs-binfmt_misc.mount            systemd-rfkill.socket
 fwupd-offline-update.service             quotaon.service                          systemd-suspend.service
 fwupd-refresh.service                    rc-local.service                         systemd-suspend-then-hibernate.service
 fwupd-refresh.timer                      rc-local.service.d                       systemd-sysctl.service
 fwupd.service                            rc.service                               systemd-sysext.service
 getty-pre.target                         rcS.service                              systemd-sysusers.service
 getty@.service                           reboot.target                            systemd-timedated.service
 getty-static.service                     reboot.target.wants                      systemd-timesyncd.service
 getty.target                             remote-cryptsetup.target                 systemd-time-wait-sync.service
 getty.target.wants                       remote-fs-pre.target                     systemd-tmpfiles-clean.service
 gpu-manager.service                      remote-fs.target                         systemd-tmpfiles-clean.timer
 grafana-server.service                   remote-veritysetup.target                systemd-tmpfiles-setup-dev.service
 graphical.target                         rescue.service                           systemd-tmpfiles-setup.service
 graphical.target.wants                   rescue-ssh.target                        systemd-udevd-control.socket
 grub-common.service                      rescue.target                            systemd-udevd-kernel.socket
 grub-initrd-fallback.service             rescue.target.wants                      systemd-udevd.service
 halt.target                              rpcbind.service                          systemd-udev-settle.service
 halt.target.wants                        rpcbind.socket                           systemd-udev-trigger.service
 hibernate.target                         rpcbind.target                           systemd-update-utmp-runlevel.service
 hwclock.service                          rpc-gssd.service                         systemd-update-utmp.service
 hybrid-sleep.target                      rpc_pipefs.target                        systemd-user-sessions.service
 initrd-cleanup.service                   rpc-statd-notify.service                 systemd-volatile-root.service
 initrd-fs.target                         rpc-statd.service                       'system-systemd\x2dcryptsetup.slice'
 initrd-parse-etc.service                 rpc-svcgssd.service                      system-update-cleanup.service
 initrd-root-device.target                rsync.service                            system-update-pre.target
 initrd-root-device.target.wants          rsyslog.service                          system-update.target
 initrd-root-fs.target                    runlevel0.target                         system-update.target.wants
 initrd-switch-root.service               runlevel1.target                         thermald.service
 initrd-switch-root.target                runlevel1.target.wants                   timers.target
 initrd-switch-root.target.wants          runlevel2.target                         timers.target.wants
 initrd.target                            runlevel2.target.wants                   time-set.target
 initrd-udevadm-cleanup-db.service        runlevel3.target                         time-sync.target
 initrd-usr-fs.target                     runlevel3.target.wants                   ua-reboot-cmds.service
 irqbalance.service                       runlevel4.target                         ua-timer.service
 iscsid.service                           runlevel4.target.wants                   ua-timer.timer
 iscsid.socket                            runlevel5.target                         ubuntu-advantage.service
 kexec.target                             runlevel5.target.wants                   udev.service
 kexec.target.wants                       runlevel6.target                         udisks2.service
 keyboard-setup.service                   screen-cleanup.service                   ufw.service
 kmod.service                             secureboot-db.service                    umount.target
 kmod-static-nodes.service                serial-getty@.service                    unattended-upgrades.service
 local-fs-pre.target                      setvtrgb.service                         update-notifier-download.service
 local-fs.target                          shutdown.target                          update-notifier-download.timer
 local-fs.target.wants                    sigpwr.target                            update-notifier-motd.service
 logrotate.service                        sleep.target                             update-notifier-motd.timer
 logrotate.timer                          slices.target                            upower.service
 lvm2-lvmpolld.service                    smartcard.target                         usb-gadget.target
 lvm2-lvmpolld.socket                     snapd.apparmor.service                   usb_modeswitch@.service
 lvm2-monitor.service                     snapd.autoimport.service                 usbmuxd.service
 lvm2-pvscan@.service                     snapd.core-fixup.service                 user-runtime-dir@.service
 lvm2.service                             snapd.failure.service                    user@.service
 lxd-agent.service                        snapd.mounts-pre.target                  user@.service.d
 machine.slice                            snapd.mounts.target                      user.slice
 man-db.service                           snapd.recovery-chooser-trigger.service   user-.slice.d
 man-db.timer                             snapd.seeded.service                     uuidd.service
 mdadm-grow-continue@.service             snapd.service                            uuidd.socket
 mdadm-last-resort@.service               snapd.snap-repair.service                var-lib-nfs-rpc_pipefs.mount
 mdadm-last-resort@.timer                 snapd.snap-repair.timer                  veritysetup-pre.target
 mdcheck_continue.service                 snapd.socket                             veritysetup.target
 mdcheck_continue.timer                   snapd.system-shutdown.service            vgauth.service
 mdcheck_start.service                    sockets.target                           x11-common.service
 mdcheck_start.timer                      sockets.target.wants                     xfs_scrub_all.service
 mdmonitor-oneshot.service                sound.target                             xfs_scrub_all.timer
 mdmonitor-oneshot.timer                  sshd-keygen@.service.d                   xfs_scrub_fail@.service
 mdmonitor.service                        ssh.service                              xfs_scrub@.service
touadmin@dev-mongodb-poc3:/lib/systemd/system$
touadmin@dev-mongodb-poc3:/lib/systemd/system$ vi mongodb_exporter.servicees
touadmin@dev-mongodb-poc3:/lib/systemd/system$ sudo vi mongodb_exporter.servicees
[sudo] password for touadmin:
touadmin@dev-mongodb-poc3:/lib/systemd/system$
touadmin@dev-mongodb-poc3:/lib/systemd/system$
touadmin@dev-mongodb-poc3:/lib/systemd/system$ history
    1  hostaname
    2  hostname
    3  sudo apt update
    4  cd /
    5  ls
    6  sudo mkdir mongo
    7  cd mongo/
    8  sudo mkdir data
    9  sudo mkdir logs
   10  ls
   11  cd
   12  sudo apt install nfs-kernel-server
   13  sudo systemctl status nfs-kernel-server.service
   14  sudo apt update
   15  sudo apt install nfs-common
   16  sudo mount -t nfs 192.168.63.143:/mongo_prod1/data /mongo/data/
   17  df -h
   18  sudo mount -t nfs 192.168.63.143:/mongo_prod1/logs /mongo/logs/
   19  df -h
   20  sudo nano /etc/fstab
   21  df -h
   22  hostnamectl
   23  sudo hostnamectl set-hostname dev-mongodb-poc3
   24  sudo nano /etc/hostname
   25  sudo nano /etc/hosts
   26  sudo rebbot
   27  sudo reboot
   28  cd
   29  sudo apt update
   30  sudo adduser venkat
   31  sudo usermod -aG sudo venkat
   32  su venkat
   33  cat /etc/mongod.conf
   34  exit
   35  cat /etc/mongod.conf
   36  exit
   37  clear
   38  df -h
   39  cd /mongo/data
   40  ls
   41  clear
   42  df -h
   43  ps -efa | grep mongo
   44  cat /etc/lsb-release
   45  sudo apt update
   46  sudo wget -qO - https://www.mongodb.org/static/pgp/server-7.0.asc | sudo tee /etc/apt/trusted.gpg.d/mongodb.asc
   47  sudo echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list
   48  deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse
   49  sudo echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list
   50  ===============================
   51  sudo apt update
   52  sudo apt-get install -y gnupg curl
   53  sudo curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | sudo gpg --dearmor -o /usr/share/keyrings/mongodb-server-8.0.gpg
   54  sudo apt-get update
   55  sudo apt-get install -y mongodb-org
   56  chmod sudo chown -R mongodb:mongodb /mongo/data
   57  sudo chown -R mongodb:mongodb /mongo/data
   58  sudo chown -R mongodb:mongodb /mongo/logs
   59  sudo cat /etc/mongod.conf | grep dbPath
   60  sudo cat /etc/mongod.conf | grep path
   61  sudo vi /etc/mongod.conf
   62  sudo cat /etc/mongod.conf | grep dbPath
   63  sudo cat /etc/mongod.conf | grep path
   64  sudo cat /etc/mongod.conf | grep bindIp
   65  sudo vi /etc/mongod.conf
   66  sudo cat /etc/mongod.conf | grep bindIp
   67  sudo systemctl enable mongod
   68  sudo systemctl start mongod
   69  sudo systemctl status mongod
   70  mongosh
   71  ll -lhrt
   72  cd ../logs/
   73  ls
   74  exit
   75  clear
   76  cd /tmp
   77  ls
   78  cd /etc/ssl/
   79  ls
   80  sudo mkdir mongodb
   81  ls
   82  cd mongodb/
   83  ls
   84  sudo mv /tmp/mongo-keyfile /etc/ssl/mongodb/
   85  ls
   86  sudo vi /etc/mongod.conf
   87  sudo cat /etc/mongod.conf  | grep replSetName
   88  chmod 600 /etc/ssl/mongodb/mongo-keyfile
   89  sudo chown mongodb:mongodb /etc/ssl/mongodb/mongo-keyfile
   90  sudo vi /etc/mongod.conf
   91  sudo systemctl start mongod
   92  sudo systemctl status mongod
   93  mongosh
   94  sudo systemctl restart  mongod
   95  mongosh -u superAdmin -p
   96  clear
   97  mongosh -u superAdmin -p
   98  vi /etc/mongod.conf
   99  mongosh -u superAdmin -p
  100  sudo mkdir /mongo/mongoscripts
  101  chown -R mongodb:mongodb /mongo/mongoscripts/
  102  sudo chown -R mongodb:mongodb /mongo/mongoscripts/
  103  cd /mongo/mongoscripts/
  104  ll -lhrt
  105  sudo chown -R touadmin:touadmin /mongo/mongoscripts/
  106  ll -lhrt
  107  sudo chown -R mongodb:mongodb /mongo/mongoscripts/
  108  cd /mongo/logs/
  109  ll -lhrt
  110  cd ..
  111  ll -lhrt
  112  sudo chown -R mongodb:mongodb /mongo/mongoscripts/
  113  sudo chown -R mongodb:mongodb /mongo
  114  l- lhrt
  115  ll- lhrt
  116  ll -lhrt
  117  sh /mongo/mongoscripts/mongo_log_rotation.sh
  118  sudo sh /mongo/mongoscripts/mongo_log_rotation.sh
  119  cd /mongo/logs/
  120  ll -lhrt
  121  sudo rm -rf mongod.log.2024-11-29T10-16-45
  122  ll -lhrt
  123  sudo visudo
  124  crontab -l
  125  crontab -e
  126  crontab -l
  127  crontab -e
  128  crontab -l
  129  sudo visudo
  130  ll -lhrt
  131  crontab -l
  132  ll -lhrt
  133  crontab -e
  134  sudo rm -rf mongod.log.2024-11-29T10-36-01.gz mongod.log.2024-11-29T10-35-01.gz mongod.log.2024-11-29T10-34-01.gz mongod.log.2024-11-29T10-33-01.gz mongod.log.2024-11-29T10-32-02.gz mongod.log.2024-11-29T10-31-01.gz mongod.log.2024-11-29T10-30-01.gz mongod.log.2024-11-29T10-29-01.gz mongod.log.2024-11-29T10-28-01.gz mongod.log.2024-11-29T10-27-01.gz
  135  ll -lhrt
  136  crontab -l
  137  ll -lhrt
  138  sudo visudo
  139  sudo vi /mongo/mongoscripts/mongo_log_rotation.sh
  140  crontab -l
  141  sudo vi /mongo/mongoscripts/mongo_log_rotation.sh
  142  exit
  143  cd /mongo/logs/
  144  ll -lhrt
  145  mongosh
  146  mongosh -u superAdmin -p
  147  cd /mongo/
  148  ls
  149  clear
  150  sudo mkdir /mongo/mongobackups
  151  cd /mongo/mongobackups/
  152  cd ../mongoscripts/
  153  ls
  154  sudo chmod -R 755 /mongo/mongobackups
  155  sudo chown -R touadmin. /mongo/mongobackups
  156  l -lhrt
  157  rm -rf mongo_log_rotation.sh
  158  sudo rm -rf mongo_log_rotation.sh
  159  ll -lhrt
  160  sudo mv /tmp/mongo_log_rotation.sh /mongo/mongoscripts/
  161  crontab -e
  162  ls
  163  sudo vi mongo_log_rotation.sh
  164  crontab -e
  165  crontab -l
  166  crontab -e
  167  crontab -l
  168  crontab -e
  169  crontab -l
  170  crontab -e
  171  crontab -l
  172  crontab -e
  173  crontab -l
  174  ll -lhrt
  175  ll- lhrt
  176  ll -lhrt
  177  mv /tmp/mongodb_daily_backup.sh /mongo/mongoscripts/
  178  sudo mv /tmp/mongodb_daily_backup.sh /mongo/mongoscripts/
  179  ll -lhrt
  180  vi mongodb_daily_backup.sh
  181  exit
  182  clear
  183  systemctl status mongod
  184  systemctl stop mongod
  185  systemctl status mongod
  186  sudo systemctl status mongod
  187  sudo systemctl stop mongod
  188  sudo apt-get purge mongodb-org*
  189  cd /mongo/
  190  l -lhrt
  191  ll -lhrt
  192  cd logs/
  193  ll -lhrt
  194  gzip mongod.log
  195  sudo gzip mongod.log
  196  ll -lhrt
  197  mv mongod.log.gz mongod.log.2024-12-03T00-00-01.gz
  198  sudo mv mongod.log.gz mongod.log.2024-12-03T00-00-01.gz
  199  ll -lhrt
  200  cd ../data/
  201  ll -lhrt
  202  sudo rm -r collection-2-16445857119155385604.wt
  203  ll -lhrt
  204  sudo rm -r *.wt
  205  ll -lhrt
  206  sudo rm -r WiredTiger storage.bson WiredTiger.lock  mongod.lock
  207  ll -lhrt
  208  sudo rm -r WiredTiger.turtle journal/ diagnostic.data/
  209  ll -lhrt
  210  sudo deluser --remove-home mongodb
  211  sudo delgroup mongodb
  212  sudo apt-get update
  213  sudo rm /etc/apt/sources.list.d/mongodb-org-*.list
  214  sudo rm /etc/apt/trusted.gpg.d/mongodb.asc
  215  sudo rm /usr/share/keyrings/mongodb-server-8.0.gpg
  216  sudo rm /etc/apt/trusted.gpg.d/mongodb.asc
  217  sudo rm /usr/share/keyrings/mongodb-server-8.0.gpg
  218  systemctl status mongod
  219  ll -lhrt
  220  cd ..
  221  ll -lhrt
  222  sudo apt update
  223  sudo apt-get install -y gnupg curl
  224  sudo curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | sudo gpg --dearmor -o /usr/share/keyrings/mongodb-server-8.0.gpg
  225  sudo echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list
  226  sudo cp /etc/mongod.conf /mongo/mongod.conf
  227  sudo vi /mongo/mongod.conf
  228  sudo chown mongodb:mongodb /mongo/mongod.conf
  229  sudo groupadd mongodb
  230  sudo mkdir /mongo/home
  231  sudo apt update
  232  sudo apt-get install -y gnupg curl
  233  sudo curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | sudo gpg --dearmor -o /usr/share/keyrings/mongodb-server-8.0.gpg
  234  cd /mongo/
  235  ll -lhrt
  236  sudo echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list sudo apt-get update
  237  sudo apt-get update
  238  sudo apt-get install -y mongodb-org
  239  sudo groupadd mongodb
  240  sudo useradd -r -g mongodb -d /mongo/home -s /usr/sbin/nologin mongodb
  241  sudo chown -R mongodb:mongodb /mongo/home
  242  sudo vi /mongo/mongod.conf
  243  sudo chown mongodb:mongodb /mongo/mongod.conf
  244  sudo chmod 600 /mongo/mongod.conf
  245  sudo chown -R mongodb:mongodb /mongo/data
  246  sudo chown -R mongodb:mongodb /mongo/logs
  247  sudo vi /lib/systemd/system/mongod.service
  248  sudo mkdir -p /mongo/bin
  249  sudo mv /usr/bin/mongod /mongo/bin/
  250  sudo mv /usr/bin/mongos /mongo/bin/
  251  sudo mv /usr/bin/mongo* /mongo/bin/
  252  echo 'export PATH=/mongo/bin:$PATH' | sudo tee -a /etc/profile source /etc/profile
  253  echo $PATH which mongod
  254  echo $PATH
  255  which mongod
  256  echo 'export PATH=/mongo/bin:$PATH' | sudo tee -a /etc/profile
  257  source /etc/profile
  258  echo $PATH
  259  which mongod
  260  sudo vi /lib/systemd/system/mongod.service
  261  sudo cat /lib/systemd/system/mongod.service | grep ExecStart
  262  sudo systemctl daemon-reload
  263  sudo systemctl start mongod
  264  sudo systemctl enable mongod
  265  sudo systemctl status mongod
  266  vi /mongo/mongod.conf
  267  sudo vi /mongo/mongod.conf
  268  sudo mv /tmp/mongo-keyfile /mongo/
  269  ll | grep mongo-keyfile
  270  sudo chown mongodb:mongodb /mongo/mongo-keyfile
  271  sudo chmod 400 /mongo/mongo-keyfile
  272  sudo systemctl restart mongod
  273  sudo systemctl status mongod
  274  mongosh
  275  mongosh -u superAdmin -p
  276  ps -ef | grep mongo
  277  vi /mongo/mongod.conf
  278  sudo vi /mongo/mongod.conf
  279  mongosh -u superAdmin -p
  280  sudo adduser shivad
  281  sudo usermod -aG dbadmins shivad
  282  sudo groupadd dbadmins
  283  sudo usermod -aG dbadmins shivad
  284  groups shivad
  285  sudo adduser venkata
  286  sudo usermod -aG dbadmins venkata
  287  groups venkata
  288  sudo chown -R mongodb:dbadmins /mongo/data
  289  sudo chown -R mongodb:dbadmins /mongo/logs
  290  sudo chown mongodb:dbadmins /mongo/mongod.conf
  291  sudo chown mongodb:dbadmins /mongo/mongo-keyfile
  292  sudo chmod 770 /mongo/data
  293  sudo chmod 770 /mongo/logs
  294  sudo chmod 660 /mongo/mongod.conf
  295  sudo chmod 660 /mongo/mongo-keyfile
  296  sudo visudo
  297  sudo systemctl restart mongod
  298  sudo systemctl status mongod
  299  su - venkata
  300  exit
  301  sudo visudo
  302  ps -ef | grep mongod
  303  ps -ef | grep mongo
  304  sudo chown -R mongodb:dbadmins /mongo/logs/
  305  sudo chmod 770 /mongo/logs/
  306  sudo systemctl status mongod
  307  sudo systemctl restart mongod
  308  sudo systemctl status mongod
  309  cd /
  310  ll -lhrt
  311  cd mongo/
  312  ll -lhrt
  313  sudo cd /mongo/logs/
  314  sudo su -
  315  sudo systemctl restart mongod
  316  sudo systemctl status mongod
  317  cat /mongo/logs/mongod.log
  318  sudo cat /mongo/logs/mongod.log
  319  sudo chmod 400 /mongo/mongo-keyfile
  320  sudo chown mongodb:mongodb /mongo/mongo-keyfile
  321  sudo systemctl restart mongod
  322  sudo systemctl status mongod
  323  sudo visudo
  324  exit
  325  groups venkata
  326  sudo chown mongodb:dbadmins /mongo/mongo-keyfile
  327  sudo chmod 400 /mongo/mongo-keyfile
  328  sudo tail -f /mongo/logs/mongod.log
  329  groups shivad
  330  groups venkata
  331  ls -ld /mongo/data
  332  ls -ld /mongo/logs
  333  ls -l /mongo/mongod.conf
  334  ls -l /mongo/mongo-keyfile
  335  crontab -l
  336  crontab -e
  337  crontab -l
  338  vi /mongo/mongoscripts/mongo_log_rotation.sh
  339  vi /mongo/mongoscripts/mongodb_daily_backup.sh
  340  sudo apt-get install acl
  341  getfacl /mongo/logs/
  342  sudo -u venkata ls -ld /mongo/logs/
  343  exit
  344  clear
  345  sudo apt update
  346  df -h
  347  sudo su -
  348  exit
  349  sudo su -
  350  exit
  351  clear
  352  ps -ef | grep mongo
  353  cd /mongo/logs/
  354  su venkata
  355  crontab -l
  356  cd /mongo/logs/
  357  sudo cd /mongo/logs/
  358  cd /mongo/mongoscripts/
  359  ll -lhrt
  360  vi mongo_log_rotation.sh
  361  ls
  362  hostname -U
  363  hostname -I
  364  ls
  365  systemctl status mongodb-exporter.service
  366  sudo nano /etc/systemd/system/mongodb_exporter.service\
  367  sudo nano /etc/systemd/system/mongodb_exporter.service
  368  ls
  369  systemctl status mongodb-exporter.service
  370  systemctl daemon-reload
  371  hostname -I
  372  sudo rm -f /usr/local/bin/mongodb_exporter
  373  sudo systemctl stop mongodb_exporter
  374  sudo systemctl disable mongodb_exporter
  375  sudo systemctl daemon-reload
  376  sudo rm -f /usr/local/bin/mongodb_exporter
  377  ps aux | grep mongodb_exporter
  378  sytemctl status mongodb.serls
  379  ls
  380  rm -rf mongodb_exporter-0.40.0.linux-amd64
  381  rm -rf mongodb_exporter-0.40.0.linux-amd64.tar.gz
  382  ls
  383  sudo apt-get install -y gnupg curl
  384  curl -fsSL https://www.percona.com/downloads/RPM-GPG-KEY-percona | sudo gpg --dearmor -o /usr/share/keyrings/percona.gpg
  385  ls
  386  echo "deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/percona.list
  387  sudo apt-get update
  388  sudo apt-get install -y percona-mongodb-exporter
  389  cat /etc/apt/sources.list.d/percona.list
  390  deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt <distribution> main
  391  lsb_release -cs
  392  deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt jammy main
  393  +echo "deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt jammy main" | sudo tee /etc/apt/sources.list.d/percona.list
  394  echo "deb [signed-by=/usr/share/keyrings/percona.gpg] https://repo.percona.com/apt jammy main" | sudo tee /etc/apt/sources.list.d/percona.list
  395  wget https://repo.percona.com/apt/percona-release.gpg -O /usr/share/keyrings/percona.gpg
  396  sudo wget https://repo.percona.com/apt/percona-release.gpg -O /usr/share/keyrings/percona.gpg
  397  wget https://repo.percona.com/apt/percona-key.gpg -O /usr/share/keyrings/percona.gpg
  398  sudo wget https://repo.percona.com/apt/percona-key.gpg -O /usr/share/keyrings/percona.gpg
  399  wget https://github.com/percona/mongodb_exporter/releases/latest/download/mongodb_exporter.tar.gz
  400  sudo wget https://repo.percona.com/apt/percona-key.gpg -O /usr/share/keyrings/percona.gpg
  401  wget https://github.com/percona/mongodb_exporter/releases/download/v0.33.0/mongodb_exporter-0.33.0.linux-amd64.tar.gz
  402  tar -xvf mongodb_exporter-0.33.0.linux-amd64.tar.gz
  403  mongodb_exporter --version
  404  curl -LO https://github.com/percona/mongodb_exporter/releases/download/v0.43.0/mongodb_exporter-0.43.0.linux-amd64.tar.gz
  405  ls
  406  rm -rf mongodb_exporter-0.33.0.linux-amd64.tar.gz
  407  rm -rf mongodb_exporter-0.33.0.linux-amd64
  408  ls
  409  tar -xvzf mongodb_exporter-0.43.0.linux-amd64.tar.gz
  410  cd mongodb_exporter-0.43.0.linux-amd64/
  411  ls
  412  sudo mv mongodb_exporter /usr/local/bin/
  413  mongodb.uri='mongodb://prometheus_user:4gr@fanA@localhost:27017/admin'
  414  mongodb_exporter --version
  415  sudo nano /etc/systemd/system/mongodb_exporter.service
  416  sudo systemctl enable mongodb_exporter
  417  sudo systemctl start mongodb_exporter
  418  systemctl daemon-reload
  419  systemctl status mongodb_exporter.service\
  420  systemctl status mongodb_exporter.service
  421  systemctl status mongodb-exporter.service
  422  curl http://192.168.63.109:9216/metrics
  423  systemctl status mongodb mongodb-exporter.service
  424  cd /usr/local/bin/
  425  ls
  426  cd
  427  systemctl status  mongodb_exporter.service
  428  cd /etc/systemd/system/
  429  ls
  430  rm -rf mongodb_exporter.service
  431  sudo rm -rf mongodb_exporter.service
  432  systemctl status  mongodb
  433  ls
  434  sudo systemctl disable  mongodb_exporter.service
  435  sudo systemctl stop mongodb_exporter.service
  436  sudo systemctl daemon-reload
  437  sudo systemctl stop mongodb-
  438  sudo systemctl stop mongodb-exporter.service
  439  sudo systemctl start mongodb-exporter.service
  440  sudo systemctl enable mongodb-exporter.service
  441  sudo systemctl daemon-reload
  442  sudo systemctl status mongodb-exporter.service
  443  curl http://192.168.63.109:9216/metrics
  444  hostname -I
  445  curl http://192.168.63.109:9216/metrics
  446  hostname -I
  447  cd /etc/systemd/system/
  448  ls
  449  cat mongodb-exporter.service
  450  vi mongodb-exporter.service
  451  sudo vi mongodb-exporter.service
  452  sudo systemctl daemon-reload
  453  sudo systemctl restart mongodb-exporter.service
  454  hostname -I
  455  sudo systemctl restart mongodb-exporter.service
  456  sudo nano /etc/systemd/system/mongodb_exporter.service
  457  ls
  458  vi mongodb-ex
  459  sudo vi mongodb-exporter.service
  460  sudo nano mongodb-exporter.service
  461  sudo systemctl daemon-reload
  462  sudo systemctl restart mongodb-exporter.service
  463  sudo systemctl enable mongodb-exporter.service
  464  sudo systemctl status mongodb-exporter.service
  465  curl http://192.168.63.109:9216/metrics
  466  ls
  467  sudo su -
  468  ssh 192.168.61.135
  469  ssh 192.168.61.136
  470  exit
  471  cd /tmp
  472  ll -lhrt
  473  rm -rf mongodb-mms-8.0.2.500.20241205T1612Z.tar.gz.filepart
  474  ll -lhrt
  475  cd /mongo/
  476  ll -lhrt
  477  mongosh -u superAdmin -p
  478  mongosh -u superAdmin -p --host 192.168.61.13
  479  mongosh -u superAdmin -p --host 192.168.61.135
  480  sudo vi /mongo/opsmanager/mongodb-mms/conf/conf-mms.properties
  481  mongosh -u superAdmin -p --host 192.168.61.135
  482  mongosh -u superAdmin -p
  483  sudo su -
  484  exit
  485  sudo apt update && sudo apt upgrade -y
  486  sudo apt install curl gnupg -y
  487  sudo ufw allow 8080/tcp
  488  sudo ufw allow 27017/tcp
  489  sudo ufw enable
  490  mongo --eval "db.serverStatus()"
  491  mongosh --eval "db.serverStatus()"
  492  mongosh -u superAdmin -p --eval "db.serverStatus()"
  493  cd /mongo/
  494  ls
  495  sudo mkdir opsmanager
  496  cd opsmanager/
  497  cd ..
  498  chmod -R 777 opsmanager/
  499  sudo chmod -R 777 opsmanager/
  500  cd opsmanager/
  501  wget https://downloads.mongodb.com/on-prem-mms/rpm/latest/mongodb-mms-<version>.tar.gz
  502  wget https://downloads.mongodb.com/on-prem-mms/rpm/latest/mongodb-mms-8.0.4.tar.gz
  503  sudo wget https://downloads.mongodb.com/on-prem-mms/rpm/latest/mongodb-mms-8.0.4.tar.gz
  504  sudo wget https://www.mongodb.com/try/download/ops-manager#mongodb-ops-manager-download
  505  ls
  506  sudo wget https://downloads.mongodb.com/on-prem-mms/tar/mongodb-mms-8.0.2.500.20241205T1612Z.tar.gz
  507  ll -lhrt
  508  pwd
  509  tar -xvzf mongodb-mms-8.0.2.500.20241205T1612Z.tar.gz
  510  ls
  511  cd mongodb-mms/
  512  ls
  513  cd bin/
  514  ls
  515  ./start-mongodb-mms
  516  ./mms-gen-key
  517  sudo ./mms-gen-key
  518  ls
  519  ./start-mongodb-mms --enc-key-path /mms.key
  520  sh mms-gen-key
  521  sudo sh mms-gen-key
  522  ./start-mongodb-mms --enc-key-path ./mms.key
  523  pwd
  524  ls
  525  ./mms-gen-key
  526  ls -l /etc/mongodb-mms/gen.key
  527  sudo chmod 600 /etc/mongodb-mms/gen.key
  528  sudo chown <your-username>:<your-group> /etc/mongodb-mms/gen.key
  529  sudo chown mongodb:mongodb /etc/mongodb-mms/gen.key
  530  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  531  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key \
  532  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@127.0.0.1:27017/?authSource=admin
  533  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@192.168.61.135:27017/?authSource=admin
  534  ls /etc/mongodb-mms/
  535  sudo nano /etc/mongodb-mms/config.conf
  536  sudo find / -name "config.conf"
  537  cd ..
  538  ls
  539  cd conf/
  540  ls
  541  cd ..
  542  cd bin/
  543  ls
  544  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@192.168.61.188:27017/?authSource=admin
  545  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@192.168.61.138:27017/?authSource=admin
  546  pwd
  547  sudo vi /etc/mongodb-mms/config.con
  548  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  549  cd ..
  550  cd conf/
  551  ls
  552  vi conf-mms.properties
  553  cd ../bin/
  554  pwd
  555  vi /mongo/opsmanager/mongodb-mms/conf/conf-mms.properties
  556  vi /etc/
  557  sudo vi /etc/mongodb-mms/config.con
  558  sudo mv /etc/mongodb-mms/config.con /etc/mongodb-mms/config.conf
  559  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  560  systemctl status mongod
  561  systemctl stop mongod
  562  sudo systemctl stop mongod
  563  vi /etc/mongod.conf
  564  cd /mongo/data/
  565  sudo cd /mongo/data/
  566  sudo su
  567  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  568  mongosh
  569  mongosh -u superAdmin
  570  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  571  ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key --mongo-uri mongodb://opsmanager_user:0p$mnage6@127.0.0.1:27017/?authSource=admin
  572  pwd
  573  sudo ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  574  ps -ef | grep mongo
  575  sudo ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  576  sudo netstat -tulnp | grep 27017
  577  sudo ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  578  vi /etc/mongodb-mms/gen.key
  579  sudo vi /etc/mongodb-mms/gen.key
  580  sudo vi /etc/mongodb-mms/config.conf
  581  pwd
  582  cd .
  583  cd ..
  584  ls
  585  cd conf/
  586  ls
  587  vi mms.conf
  588  ls
  589  vi conf-mms.properties
  590  cd ../bin/
  591  sudo ./start-mongodb-mms --enc-key-path /etc/mongodb-mms/gen.key
  592  sudo ./start-mongodb-mms start
  593  mongodb-mms start
  594  ls
  595  ./mongodb-mms start
  596  sudo systemctl status mongod
  597  sudo netstat -tuln | grep 27017
  598  ping 198.168.61.138
  599  telnet 198.168.61.138 27017
  600  nc -zv 198.168.61.138 27017
  601  tail -f /mongo/opsmanager/mongodb-mms/logs/mms0.log
  602  sudo ufw allow 27017
  603  ./mongodb-mms start
  604  vi /mongo/opsmanager/mongodb-mms/config
  605  cd /mongo/opsmanager/mongodb-mms/
  606  ls
  607  cd conf/
  608  ls
  609  vi mms.conf
  610  vi conf-mms.properties
  611  sudo systemctl status mongod
  612  sudo systemctl stop mongod
  613  vi /mongo/mongod.conf
  614  ps -ef | grep mongo
  615  sudo vi /mongo/mongod.conf
  616  sudo systemctl start mongod
  617  mongosh
  618  mongosh -u admin
  619  mongosh -u superAdmin
  620  cd /mongo/
  621  ll -lhrt
  622  sudo rm -rf opsmanager/
  623  ll -lhrt
  624  cd /etc/
  625  ls
  626  exit
  627  ps -ef | grep mongo
  628  mongosh -u superAdmin -p
  629  exitxit
  630  exit
  631  ssh https://grafana.toucanint.com/
  632  ssh grafana.toucanint.com/
  633  ssh grafana.toucanint.com
  634  exit
  635  cd /etc/prometheus/
  636  ls
  637  vi prometheus.html
  638  cd
  639  cd /etc/systemd/system/
  640  ls
  641  vi mongodb-exporter.service
  642  sudo vi /etc/hosts
  643  ping grafana.toucandev.com
  644  sudo nano /etc/grafana/grafana.ini
  645  sudo vi  /etc/grafana/grafana.ini
  646  sudo systemctl restart grafana-server
  647  sudo vi /etc/hosts
  648  sudo ufw status
  649  sudo vi  /etc/grafana/grafana.ini
  650  sudo systemctl restart grafana-server
  651  sudo vi  /etc/grafana/grafana.ini
  652  sudo vi /etc/hosts
  653  nslookup  grafanatoucandev.com
  654  sudo ufw allow 80/tcp
  655  sudo netstat -tuln | grep 3000
  656  sudo systemctl restart grafana-server
  657  sudo journalctl -u grafana-server
  658  sudo vi /etc/hosts
  659  sudo vi  /etc/grafana/grafana.ini
  660  sudo systemctl restart grafana-server
  661  sudo vi  /etc/grafana/grafana.ini
  662  sudo vi /etc/hosts
  663  sudo systemctl restart grafana-server
  664  sudo vi /etc/hosts
  665  hostname
  666  hostname -i
  667  sudo vi  /etc/grafana/grafana.ini
  668  curl -I http://grafana.toucandev.com:3000
  669  sudo vi  /etc/grafana/grafana.ini
  670  sudo vi /etc/hosts
  671  sudo systemctl restart grafana-server
  672  curl -I http://grafana.toucandev.com:3000
  673  sudo netstat -tuln | grep 3000
  674  cat /etc/grafana/grafana.ini | grep http_addr
  675  sudo cat /etc/grafana/grafana.ini | grep http_addr
  676  sudo systemctl restart grafana-server
  677  curl -I http://192.168.61.138:3000
  678  curl -I http://grafana.toucandev.com:3000
  679  sudo ufw reload
  680  sudo ufw status
  681  hostname -I
  682  ps -ef | grep mongo
  683  sudo vi  /etc/grafana/grafana.ini
  684  sudo vi /etc/hosts
  685  ps -ef | grep mongo
  686  history
  687  exit
  688  ls
  689  hostaname -I
  690  hostname -I
  691  systemctl status node_exporter.service
  692  df -h
  693  ps -ef | grep mongod
  694  systemcrl status mongodb_ecporter
  695* systemcrl status mongodb_exporterz
  696  systemctl status mongodb_exporter
  697  systemctl status mongodb
  698  systemctl status exporter
  699  ps -ef | grep mongo
  700  ps -ef | grep prometheus
  701  vi /etc/prometheus/prometheus.yml
  702  history
  703  sudo su -
  704  cd /lib/systemd/system
  705  ls
  706  vi mongodb_exporter.servicees
  707  sudo vi mongodb_exporter.servicees
  708  history
touadmin@dev-mongodb-poc3:/lib/systemd/system$ sudo su -
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# history
    1  cd /mongo/logs/
    2  ls
    3  ll -lhrt
    4  tail -30 mongod.log
    5  cd ..
    6  ll -lhrt
    7  sudo chown -R mongodb.mongodb mongo-keyfile
    8  exit
    9  mkdir /grafana
   10  cd grafana
   11  df -h
   12  cd /grafana/
   13  ls
   14  sudo apt install -y software-properties-common
   15  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
   16  sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7BB9C1A86D0B0D2D
   17  sudo apt update
   18  sudo apt install grafana
   19  sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7BB9C1A86D0B0D2D
   20  curl https://packages.grafana.com/gpg.key | sudo tee /etc/apt/trusted.gpg.d/grafana.asc
   21  sudo nano /etc/apt/sources.list.d/grafana.list
   22  sudo apt updat
   23  sudo apt update
   24  sudo apt install grafana
   25  sudo systemctl start grafana-server
   26  sudo systemctl enable grafana-server
   27  sudo ufw allow 3000/tcp
   28  sudo ufw reload
   29  sudo ufw enable
   30  sudo ufw status
   31  sudo ufw allow 27017/tcp
   32  sudo ufw allow ssh
   33  sudo ufw allow 3000/tcp
   34  sudo ufw status
   35  sudo ufw enable
   36  sudo ufw status
   37  ps -ef | grep grafana
   38  sudo systemctl status grafana-server
   39  hostname
   40  hostname -i
   41  hostname -I
   42  mongosh -u superAdmin -p
   43  grafana-cli plugins install grafana-mongodb-datasource
   44  sudo systemctl restart grafana-server
   45  grafana-cli plugins list
   46  grafana-server -v
   47  which grafana-server
   48  sudo grafana-cli plugins install grafana-mongodb-datasource
   49  sudo systemctl restart grafana-server
   50  sudo journalctl -u grafana-server -f
   51  sudo tail -f /var/log/grafana/grafana.log
   52  vi /etc/grafana/grafana.ini
   53  sudo systemctl restart grafana-server
   54  cat /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource/plugin.json
   55  sudo rm -rf /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource
   56  grafana-cli plugins install maikuroashi-mongodb-datasource
   57  ls /usr/local/var/lib/grafana/plugins
   58  sudo nano /etc/grafana/grafana.ini
   59  sudo ls -l /var/lib/grafana/plugins
   60  sudo chown -R grafana:grafana /var/lib/grafana/plugins/grafana-mongodb-datasource
   61  sudo chmod -R 755 /var/lib/grafana/plugins/grafana-mongodb-datasource
   62  sudo systemctl restart grafana-server
   63  sudo ls -l /var/lib/grafana/plugins
   64  sudo rm -rf /usr/local/var/lib/grafana/plugins/maikuroashi-mongodb-datasource
   65  sudo systemctl restart grafana-server
   66  grafana-cli plugins remove grafana-mongodb-datasource
   67  sudo systemctl restart grafana-server
   68  sudo ls -l /var/lib/grafana/plugins
   69  grafana-cli plugins install grafana-simple-json-datasource
   70  sudo systemctl restart grafana-server
   71  sudo ls -l /var/lib/grafana/plugins
   72  sudo systemctl restart grafana-server
   73  grafana-cli plugins install grafana-mongodb-datasource
   74  sudo systemctl restart grafana-server
   75  grafana-cli plugins list
   76  sudo /usr/share/grafana/bin/grafana-cli plugins install grafana-mongodb-datasource
   77  sudo systemctl restart grafana-server
   78  sudo journalctl -u grafana-server -f
   79  grafana-server -v
   80  sudo apt-get remove --purge grafana
   81  sudo apt-get install grafana=9.6.3-1
   82  sudo apt-get autoremove
   83  sudo apt-get install software-properties-common
   84  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
   85  curl https://packages.grafana.com/gpg.key | sudo apt-key add -
   86  sudo apt-get update
   87  sudo apt-get install grafana=9.6.3
   88  apt-cache show grafana
   89  sudo apt-get remove grafana-enterprise
   90  sudo apt-get install -y software-properties-common
   91  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
   92  sudo apt-get update
   93  sudo dpkg -i grafana_9.6.3_amd64.deb
   94  ls
   95  wget https://dl.grafana.com/oss/release/grafana_9.6.3_amd64.deb
   96  wget https://github.com/grafana/grafana/releases/download/v9.6.3/grafana_9.6.3_amd64.deb
   97  sudo apt-get install -y software-properties-common
   98  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
   99  sudo apt-get update
  100  sudo apt-get install grafana=9.6.3
  101  wget https://github.com/grafana/grafana/releases/download/v9.6.3/grafana_9.6.3_amd64.deb
  102  cd /tmp
  103  wget https://github.com/grafana/grafana/releases/download/v9.6.3/grafana_9.6.3_amd64.deb
  104  sudo systemctl stop grafana-server
  105  sudo apt-get remove --purge grafana
  106  sudo apt-get autoremove --purge
  107  sudo rm -rf /etc/grafana
  108  sudo rm -rf /var/lib/grafana
  109  sudo rm -rf /var/log/grafana
  110  sudo rm -rf /usr/share/grafana
  111  cd /grafana/
  112  ll -hrt
  113  sudo apt update && sudo apt upgrade -y
  114  sudo apt install -y apt-transport-https software-properties-common wget
  115  sudo wget -q -O - https://packages.grafana.com/gpg.key | sudo gpg --dearmor -o /usr/share/keyrings/grafana.gpg
  116  sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"
  117  sudo apt update
  118  sudo apt install grafana -y
  119  sudo systemctl start grafana-server
  120  sudo systemctl enable grafana-server
  121  sudo systemctl status grafana-server
  122  grafana-cli plugins install grafana-simple-json-datasource
  123  sudo systemctl restart grafana-server
  124  mkdir mongodb-backend
  125  cd mongodb-backend
  126  npm init -y
  127  apt install npm
  128  sudo apt update
  129  sudo apt install -y nodejs npm
  130  node -v
  131  npm -v
  132  npm init -y
  133  npm install express mongodb body-parser
  134  sudo apt remove nodejs npm
  135  curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -
  136  sudo apt install -y nodejs
  137  node -v
  138  npm -v
  139  sudo apt-get remove --purge libnode-dev
  140  sudo apt-get remove --purge nodejs
  141  sudo apt-get autoremove
  142  sudo apt-get clean
  143  curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash -
  144  sudo apt-get install -y nodejs
  145  curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
  146  sudo apt-get install -y nodejs
  147  node -v
  148  npm -v
  149  npm install express mongodb body-parser
  150  touch index.js
  151  vi index.js
  152  node index.js
  153  sudo lsof -i :3000
  154  sudo nano /etc/grafana/grafana.ini
  155  sudo vi /etc/grafana/grafana.ini
  156  sudo systemctl restart grafana-server
  157  node index.js
  158  sudo vi /etc/grafana/grafana.ini
  159  vi index.js
  160  node index.js
  161  sudo systemctl restart grafana-server
  162  node index.js
  163  sudo systemctl restart grafana-server
  164  curl http://192.168.61.138:3000/query
  165  curl http://192.168.61.138:3001/query
  166  curl http://localhost:3001/query
  167  curl http://192.168.61.138:3001/query
  168  node index.js
  169  curl http://192.168.61.138:3001/query
  170  curl http://192.168.61.138:3000/query
  171  node index.js
  172  sudo ufw allow 3001/tcp
  173  curl http://localhost:3001/query
  174  curl http://localhost:3000/query
  175  curl http://192.168.61.138:3001/query
  176  curl http://192.168.61.138:3000/query
  177  vi node,js
  178  vi node.js
  179  vi index.js
  180  node index.js
  181  curl http://localhost:3001/query
  182  curl http://192.168.61.138:3001/query
  183  sudo systemctl restart grafana-server
  184  curl http://localhost:3001/query
  185  root@dev-mongodb-poc3:/grafana/mongodb-backend# curl http://localhost:3001/query
  186  curl: (7) Failed to connect to localhost port 3001 after 0 ms: Connection refused
  187  root@dev-mongodb-poc3:/grafana/mongodb-backend# curl http://192.168.61.138:3001/query
  188  curl: (7) Failed to connect to 192.168.61.138 port 3001 after 0 ms: Connection refused
  189  root@dev-mongodb-poc3:/grafana/mongodb-backend#
  190  sudo ufw status
  191  sudo ufw allow 3001/tcp
  192  node index.js
  193  vi index.js
  194  cat index.js | grep 'app.listen(port'
  195  curl http://localhost:3001/query
  196  curl http://192.168.61.138:3001/query
  197  sudo lsof -i :3001
  198  cat index.js
  199  node -v
  200  vi minimal.js
  201  node minimal.js
  202  curl http://localhost:3001/test
  203  vi minimal.js
  204  cat minimal.js | grep 'app.listen(port'
  205  sudo lsof -i :3001
  206  vi minimal.js
  207  node minimal.js
  208  ls
  209  cd ..
  210  sudo apt-get update
  211  sudo apt-get install postgresql postgresql-contrib
  212  sudo systemctl start postgresql
  213  sudo systemctl enable postgresql
  214  sudo -u postgres psql
  215  systemctl status postgres
  216  systemctl status postgresql
  217  sudo apt-get update
  218  wget https://github.com/prometheus/prometheus/releases/download/v2.39.4/prometheus-2.39.4.linux-amd64.tar.gz
  219  tar xvf prometheus-2.39.4.linux-amd64.tar.gz
  220  sudo mv prometheus-2.39.4.linux-amd64/prometheus /usr/local/bin/
  221  wget https://github.com/prometheus/prometheus/releases/download/v2.39.4/prometheus-2.39.4.linux-amd64.tar.gz
  222  sudo apt-get update
  223  wget https://github.com/prometheus/prometheus/releases/download/v2.40.0/prometheus-2.40.0.linux-amd64.tar.gz
  224  tar xvf
  225  tar xvf prometheus-2.40.0.linux-amd64.tar.gz
  226  sudo mv prometheus-2.40.0.linux-amd64/prometheus /usr/local/bin/
  227  sudo mv prometheus-2.40.0.linux-amd64/promtool /usr/local/bin/
  228  sudo mv prometheus-2.40.0.linux-amd64/consoles /etc/prometheus/
  229  sudo mv prometheus-2.40.0.linux-amd64/console_libraries /etc/prometheus/
  230  sudo mkdir -p /etc/prometheus
  231  sudo mkdir -p /var/lib/prometheus
  232  sudo nano /etc/prometheus/prometheus.yml
  233  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  234  ps -ef | grep prometheus
  235  sudo ufw allow 9090/tcp
  236  sudo ufw
  237  sudo ufw status
  238  ls
  239  wget https://github.com/percona/mongodb_exporter/releases/download/v0.20.7/mongodb_exporter-0.20.7.linux-amd64.tar.gz
  240  tar xvf mongodb_exporter-0.20.7.linux-amd64.tar.gz
  241  sudo mv mongodb_exporter-0.20.7.linux-amd64/mongodb_exporter /usr/local/bin/
  242  mongosh mongodb://admin:'6uper@dm!n'@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  243  mongosh mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  244  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  245  sudo ufw allow 9216/tcp
  246  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana
  247  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0
  248  mongodb_exporter --mongodb.uri=mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0 --web.listen-address=127.0.0.1:9216
  249  sudo lsof -i :9216
  250  sudo kill 93736
  251  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=127.0.0.1:9216
  252  sudo lsof -i :9216
  253  sudo kill 93736
  254  sudo lsof -i :9216
  255  sudo kill -9 93736
  256  sudo lsof -i
  257  sudo lsof -i :9216
  258  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=127.0.0.1:9216
  259  sudo lsof -i :9216
  260  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  261  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017,grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  262  mongodb_exporter --mongodb.uri="mongodb://admin:6uper%40dm%21n@192.168.61.135:27017/grafana?replicaSet=mongopoc_rs0" --web.listen-address=192.168.61.138:9216
  263  exit
  264  cd /grafana/
  265  ll -lhrt
  266  sudo nano /etc/prometheus/prometheus.yml
  267  sudo systemctl restart prometheus
  268  /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  269  sudo lsof -i
  270  sudo systemctl restart prometheus
  271  sudo nano /etc/prometheus/prometheus.yml
  272  sudo systemctl restart prometheus
  273  /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  274  nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  275  cat nohup.out
  276  sudo lsof -i :9090
  277  sudo systemctl status
  278  wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz
  279  tar xvf node_exporter-1.3.1.linux-amd64.tar.gz
  280  sudo mv node_exporter-1.3.1.linux-amd64/node_exporter /usr/local/bin/
  281  nohup /usr/local/bin/node_exporter
  282  nohup /usr/local/bin/node_exporter &
  283  exit
  284  cd /mongo/logs/
  285  ls
  286  ll -lhrt
  287  ssh touadmin@192.168.61.137
  288  crontab -l
  289  exit
  290  sudo passwd venkata
  291  exit
  292  sudo passwd venkata
  293  exit
  294  cd /mongo/
  295  ls
  296  vi mongod.conf
  297  sudo systemctl start mongod
  298  cd /mongo/opsmanager/mongodb-mms/bin/
  299  exit
  300  cd /mongo/
  301  ll -lhrt
  302  rm -rf data/
  303  rm -rf data
  304  ll -lhrt
  305  ps -ef | grep mongo
  306  rm -rf data
  307  sudo systemctl start mongod
  308  ps -ef | grep mongo
  309  mongosh
  310  mongosh -u superAdmin
  311  mongosh
  312  ps -ef | grep mongo
  313  history
  314  ps -ef | grep mongo
  315  kill -9 422977
  316  ps -ef | grep mongo
  317  sudo systemctl stop mongod
  318  ps -ef | grep mongo
  319  kill -9 1446005
  320  ps -ef | grep mongo
  321  ll -lhrt
  322  rm -rf data/
  323  rm -rf -f data/
  324  cd data/
  325  ll -lhrt
  326  sudo systemctl start mongod
  327  sudo systemctl status mongod
  328  mongosh
  329  ls
  330  cd ..
  331  ls
  332  vi mongod.conf
  333  sudo systemctl restart mongod
  334  mongosh
  335  vi mongod.conf
  336  sudo systemctl restart mongod
  337  mongosh
  338  mongosh -u opsmanager_user -p
  339  telnet 198.168.61.138 27017
  340  tcp   0   0 0.0.0.0:27017  0.0.0.0:*  LISTEN
  341  ls
  342  vi mongod.conf
  343  sudo systemctl restart mongod
  344  sudo ufw allow from 192.168.61.138 to any port 27017
  345  sudo iptables -A INPUT -p tcp --dport 27017 -j ACCEPT
  346  sudo ss -tulnp | grep 27017
  347  nc -zv 198.168.61.138 27017
  348  ps -ef | grep mongo
  349  mongosh
  350  mongosh -u opsmanager_user -p
  351  vi mongod.conf
  352  sudo systemctl restart mongod
  353  mongosh
  354  vi mongod.conf
  355  sudo systemctl restart mongod
  356  mongosh -u admin
  357  cd data/
  358  ls
  359  exit
  360  cd /mongo/
  361  ls
  362  cp mongod.conf mongod.conf-self-signed
  363  vi mongod.conf
  364  systemctl restart  mongod
  365  systemctl status mongod
  366  ps -ef | grep mongo
  367  ps -ef | grep prometheus
  368  kill -9 93190
  369  ps -ef | grep prometheus
  370  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus
  371  ps -ef | grep prometheus
  372  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  373  ls
  374  cat nohup.out
  375  history | grep prometheus
  376  ps -ef | grep prometheus
  377  cat /etc/prometheus/prometheus.yml
  378  sudo systemctl status mongodb_exporter.service
  379  sudo curl http://localhost:9216/metrics
  380  cd ~
  381  sudo curl http://localhost:9216/metrics
  382  cd /etc/prometheus/
  383  sudo vi prometheus.yml
  384  sudo ufw allow 9090
  385  ps -ef | grep prometheus
  386  kill -9 3875390
  387  ps -ef | grep prometheus
  388  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  389  ps -ef | grep prometheus
  390  sudo vi /lib/systemd/system/mongodb_exporter.service
  391  sudo vi prometheus.yml
  392  ps -ef | grep prometheus
  393  kill -9 3875852
  394  sudo nohup /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus &
  395  history
  396  history  | grep mongo
  397  cd /mongo/
  398  ls
  399  mkdir mongodb-exporter
  400  cd mongodb-exporter
  401  wget https://github.com/percona/mongodb_exporter/releases/download/v0.7.1/mongodb_exporter-0.7.1.linux-amd64.tar.gz
  402  ls
  403  tar xvzf mongodb_exporter-0.7.1.linux-amd64.tar.gz
  404  sudo mv mongodb_exporter /usr/local/bin/
  405  mongosh -u superAdmin -p
  406  ps -ef | grep mongo
  407  cd /lib/systemd/system/
  408  sudo vi mongodb_exporter.service
  409  sudo systemctl daemon-reload
  410  sudo systemctl start mongodb_exporter.service
  411  sudo systemctl status mongodb_exporter.service
  412  ps -ef | grep mongo
  413  kill -9 1446033
  414  ps -ef | grep mongo
  415  sudo systemctl start mongodb_exporter.service
  416  ps -ef | grep mongo
  417  sudo systemctl status mongodb_exporter.service
  418  exit
  419  ps -ef | grep mongo
  420  sudo systemctl stop mongodb_exporter.service
  421  cd ~
  422  sudo curl http://localhost:9216/metrics
  423  sudo curl http://192.168.61.138:9216/metrics~
  424  sudo systemctl start mongodb_exporter.service
  425  sudo systemctl status mongodb_exporter.service
  426  sudo vi mongodb_exporter.service
  427  sudo vi /etc/systemd/system/prometheus.service
  428  sudo systemctl restart prometheus
  429  sudo systemctl enable prometheus
  430  sudo systemctl status prometheus
  431  sudo vi /etc/systemd/system/prometheus.service
  432  sudo id prometheus
  433  sudo useradd --no-create-home --shell /bin/false prometheus
  434  sudo chown -R prometheus:prometheus /etc/prometheus /var/lib/prometheus
  435  journalctl -u prometheus.service -xe
  436  sudo systemctl daemon-reload
  437  sudo systemctl restart prometheus
  438  sudo systemctl status prometheus
  439  sudo journalctl -u prometheus.service -n 100
  440  sudo lsof -i :9090
  441  sudo systemctl restart prometheus
  442  sudo systemctl status prometheus
  443  sudo vi /etc/systemd/system/prometheus.service
  444  sudo systemctl restart prometheus
  445  sudo systemctl daemon-reload
  446  sudo systemctl restart prometheus
  447  sudo systemctl status prometheus
  448  journalctl -u prometheus.service -xe
  449  sudo systemctl status prometheus
  450  sudo -u prometheus /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/ --web.console.libraries=/usr/share/prometheus/console_libraries --web.console.templates=/usr/share/prometheus/consoles
  451  sudo lsof -i :9091
  452  sudo systemctl restart prometheus
  453  sudo systemctl status prometheus
  454  sudo systemctl daemon-reload
  455  sudo systemctl restart prometheus
  456  sudo systemctl status prometheus
  457  sudo lsof -i :9090
  458  sudo lsof -i :9091
  459  sudo kill -9 3877263
  460  sudo lsof -i :9090
  461  sudo systemctl start prometheus
  462  sudo systemctl status prometheus
  463  sudo vi /etc/systemd/system/prometheus.service
  464  sudo systemctl daemon-reload
  465  sudo systemctl restart prometheus
  466  sudo systemctl status prometheus
  467  sudo lsof -i :9090
  468  sudo lsof -i :9091
  469  sudo journalctl -u prometheus
  470  sudo systemctl disable prometheus
  471  sudo systemctl enable prometheus
  472  sudo systemctl start prometheus
  473  sudo systemctl status prometheus
  474  ls -l /etc/prometheus
  475  ls -l /var/lib/prometheus
  476  sudo chown -R prometheus:prometheus /etc/prometheus
  477  sudo chown -R prometheus:prometheus /var/lib/prometheus
  478  sudo vi /etc/systemd/system/prometheus.service
  479  sudo systemctl disable prometheus
  480  sudo vi /etc/systemd/system/prometheus.service
  481  sudo systemctl daemon-reload
  482  sudo systemctl disable prometheus
  483  sudo systemctl enable prometheus
  484  sudo systemctl start prometheus
  485  sudo systemctl status prometheus
  486  sudo ufw allow 9091
  487  sudo ufw status
  488  sudo systemctl status mongodb_exporter.service
  489  env | grep mongodb
  490  ps -ef | grep mongo
  491  env | grep mongodb
  492  export MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.165:27017
  493  env | grep mongodb
  494  cd /lib/systemd/system/
  495  sudo nano mongodb_exporter.service
  496  sudo systemctl daemon-reload
  497  sudo systemctl start mongodb_exporter.service
  498  sudo systemctl restart mongodb_exporter.service
  499  sudo systemctl status mongodb_exporter.service
  500  sudo nano /lib/systemd/system/mongodb_exporter.service
  501  sudo vi /lib/systemd/system/mongodb_exporter.service
  502  sudo systemctl daemon-reload
  503  sudo systemctl restart mongodb_exporter.service
  504  sudo systemctl status mongodb_exporter.service
  505  mongo --username promusr --password p60mUsr --host 192.168.61.165 --port 27017
  506  mongosh --username promusr --password p60mUsr --host 192.168.61.165 --port 27017
  507  telnet 192.168.61.165 27017
  508  sudo systemctl daemon-reload
  509  sudo systemctl restart mongodb_exporter.service
  510  sudo systemctl status mongodb_exporter.service
  511  env | grep mongodb
  512  journalctl -u mongodb_exporter.service -f
  513  nc -zv 192.168.61.165 27017
  514  /usr/local/bin/mongodb_exporter --mongodb.uri="mongodb://promusr:p60mUsr@192.168.61.165:27017" --log.level=debug
  515  env | grep mongodb
  516  ps -ef | grep mogno
  517  ps -ef | grep mongo
  518  vi /mongo/mongod.conf
  519  systemctl status mongod
  520  systemctl restart mongod
  521  systemctl status mongod
  522  mongosh
  523  mongosh -u superAdmin -p
  524  env | grep mongodb
  525  export MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.138:27017
  526  env | grep mongodb
  527  sudo systemctl daemon-reload
  528  systemctl restart mongod
  529  sudo systemctl daemon-reload
  530  sudo systemctl start mongodb_exporter.service
  531  sudo systemctl status mongodb_exporter.service
  532  sudo vi /lib/systemd/system/mongodb_exporter.service
  533  sudo systemctl daemon-reload
  534  sudo systemctl restart mongodb_exporter.service
  535  sudo systemctl status mongodb_exporter.service
  536  history
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:31:59 IST; 11s ago
   Main PID: 3885146 (mongodb_exporte)
      Tasks: 7 (limit: 9351)
     Memory: 2.3M
        CPU: 11ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885146 /usr/local/bin/mongodb_exporter

Feb 24 15:31:59 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:31:59 dev-mongodb-poc3 mongodb_exporter[3885146]: time="2025-02-24T15:31:59+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:31:59 dev-mongodb-poc3 mongodb_exporter[3885146]: time="2025-02-24T15:31:59+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:31:59 dev-mongodb-poc3 mongodb_exporter[3885146]: time="2025-02-24T15:31:59+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:31:59 dev-mongodb-poc3 mongodb_exporter[3885146]: time="2025-02-24T15:31:59+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:31:59 dev-mongodb-poc3 mongodb_exporter[3885146]: time="2025-02-24T15:31:59+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
Feb 24 15:32:01 dev-mongodb-poc3 mongodb_exporter[3885146]: time="2025-02-24T15:32:01+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:32:01 dev-mongodb-poc3 mongodb_exporter[3885146]: time="2025-02-24T15:32:01+05:30" level=error msg="Can't create mongo session to mongodb://****:***>

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep mongo
mongodb  3884717       1  1 15:26 ?        00:00:18 /mongo/bin/mongod --config /mongo/mongod.conf
root     3885146       1  0 15:31 ?        00:00:00 /usr/local/bin/mongodb_exporter
root     3885254 3885085  0 15:42 pts/1    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:43:51 IST; 4s ago
   Main PID: 3885316 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 9ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885316 /usr/local/bin/mongodb_exporter

Feb 24 15:43:51 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
 ESCOC

ndor preset: enabled)









:43:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exp>
:43:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
:43:51+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@localhost:27017: no reachable servers" source="connection.go:86"
:43:51+05:30" level=error msg="Can't create mongo session to mongodb://****:****@localhost:27017" source="mongodb_collector.go:202"
:43:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOC











v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exporter.go:106"
avis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
*:****@localhost:27017: no reachable servers" source="connection.go:86"
*@localhost:27017" source="mongodb_collector.go:202"
" source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOC











orter.go:106"




~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD











v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exporter.go:106"
avis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
*:****@localhost:27017: no reachable servers" source="connection.go:86"
*@localhost:27017" source="mongodb_collector.go:202"
" source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD

ndor preset: enabled)









:43:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exp>
:43:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
:43:51+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@localhost:27017: no reachable servers" source="connection.go:86"
:43:51+05:30" level=error msg="Can't create mongo session to mongodb://****:****@localhost:27017" source="mongodb_collector.go:202"
:43:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:43:51 IST; 4s ago
   Main PID: 3885316 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 9ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885316 /usr/local/bin/mongodb_exporter

Feb 24 15:43:51 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:43:51 IST; 4s ago
   Main PID: 3885316 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 9ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885316 /usr/local/bin/mongodb_exporter

Feb 24 15:43:51 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:43:51 IST; 4s ago
   Main PID: 3885316 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 9ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885316 /usr/local/bin/mongodb_exporter

Feb 24 15:43:51 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:43:51 IST; 4s ago
   Main PID: 3885316 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 9ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885316 /usr/local/bin/mongodb_exporter

Feb 24 15:43:51 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:43:51 IST; 4s ago
   Main PID: 3885316 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 9ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885316 /usr/local/bin/mongodb_exporter

Feb 24 15:43:51 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:43:51 dev-mongodb-poc3 mongodb_exporter[3885316]: time="2025-02-24T15:43:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~

root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
 ESCOC

ndor preset: enabled)






promusr:p60mUsr@localhost:27017


:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exp>
:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@localhost:27017: no reachable servers" source="connection.go:86"
:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:****@localhost:27017" source="mongodb_collector.go:202"
:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:47:21 IST; 2s ago
   Main PID: 3885421 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 7ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885421 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 15:47:21 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:47:21 dev-mongodb-poc3 mongodb_exporter[3885421]: time="2025-02-24T15:47:21+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:48:42 IST; 1s ago
   Main PID: 3885492 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.4M
        CPU: 8ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885492 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@192.168.61.138:27017

Feb 24 15:48:42 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 15:48:42 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T15:48:42+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 15:48:42 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T15:48:42+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 15:48:42 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T15:48:42+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 15:48:42 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T15:48:42+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 15:48:42 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T15:48:42+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
 ESCOC

ndor preset: enabled)






promusr:p60mUsr@192.168.61.138:27017


:48:42+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exp>
:48:42+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
:48:42+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.138:27017: no reachable servers" source="connection.go:86"
:48:42+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.138:27017" source="mongodb_collector.go:202"
:48:42+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOC











v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exporter.go:106"
avis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
*:****@192.168.61.138:27017: no reachable servers" source="connection.go:86"
*@192.168.61.138:27017" source="mongodb_collector.go:202"
" source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD

ndor preset: enabled)






promusr:p60mUsr@192.168.61.138:27017


:48:42+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exp>
:48:42+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
:48:42+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.138:27017: no reachable servers" source="connection.go:86"
:48:42+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.138:27017" source="mongodb_collector.go:202"
:48:42+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~

root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 15:48:42 IST; 12min ago
   Main PID: 3885492 (mongodb_exporte)
      Tasks: 7 (limit: 9351)
     Memory: 5.8M
        CPU: 238ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885492 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@192.168.61.138:27017

Feb 24 16:00:31 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:00:31+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:00:31 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:00:31+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:00:46 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:00:46+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:00:46 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:00:46+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:01:01 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:01:01+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:01:01 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:01:01+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:01:16 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:01:16+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:01:16 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:01:16+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:01:31 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:01:31+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:01:31 dev-mongodb-poc3 mongodb_exporter[3885492]: time="2025-02-24T16:01:31+05:30" level=error msg="Can't create mongo session to mongodb://****:***>

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:03:23 IST; 2s ago
   Main PID: 3885828 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 10ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885828 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 16:03:23 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
 ESCOC

ndor preset: enabled)






promusr:p60mUsr@localhost:27017


:03:23+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exp>
:03:23+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
:03:23+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@localhost:27017: no reachable servers" source="connection.go:86"
:03:23+05:30" level=error msg="Can't create mongo session to mongodb://****:****@localhost:27017" source="mongodb_collector.go:202"
:03:23+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:03:23 IST; 2s ago
   Main PID: 3885828 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 10ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885828 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 16:03:23 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:03:23 IST; 2s ago
   Main PID: 3885828 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 10ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885828 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 16:03:23 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:03:23 IST; 2s ago
   Main PID: 3885828 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 10ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885828 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 16:03:23 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:03:23 IST; 2s ago
   Main PID: 3885828 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 10ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885828 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 16:03:23 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:03:23 IST; 2s ago
   Main PID: 3885828 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 10ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885828 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 16:03:23 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:03:23 IST; 2s ago
   Main PID: 3885828 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 10ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885828 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 16:03:23 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:03:23 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:03:23+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep mongod
mongodb  3884717       1  1 15:26 ?        00:00:40 /mongo/bin/mongod --config /mongo/mongod.conf
root     3885828       1  0 16:03 ?        00:00:00 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017
root     3885853 3885703  0 16:04 pts/1    00:00:00 grep --color=auto mongod
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grep mongod
mongodb  3884717       1  1 15:26 ?        00:00:41 /mongo/bin/mongod --config /mongo/mongod.conf
root     3885828       1  0 16:03 ?        00:00:00 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017
root     3885868 3885703  0 16:05 pts/1    00:00:00 grep --color=auto mongod
root@dev-mongodb-poc3:~# vi /mongo/mongod.conf
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# systemctl restart mongod
root@dev-mongodb-poc3:~# systemctl status mongod
× mongod.service - MongoDB Database Server
     Loaded: loaded (/lib/systemd/system/mongod.service; enabled; vendor preset: enabled)
     Active: failed (Result: signal) since Mon 2025-02-24 16:06:37 IST; 7s ago
       Docs: https://docs.mongodb.org/manual
    Process: 3885891 ExecStart=/mongo/bin/mongod --config /mongo/mongod.conf (code=killed, signal=ABRT)
   Main PID: 3885891 (code=killed, signal=ABRT)
        CPU: 1.893s

Feb 24 16:06:34 dev-mongodb-poc3 systemd[1]: Started MongoDB Database Server.
Feb 24 16:06:34 dev-mongodb-poc3 mongod[3885891]: {"t":{"$date":"2025-02-24T10:36:34.601Z"},"s":"I",  "c":"CONTROL",  "id":7484500, "ctx":"main","msg":"Enviro>
Feb 24 16:06:37 dev-mongodb-poc3 systemd[1]: mongod.service: Main process exited, code=killed, status=6/ABRT
Feb 24 16:06:37 dev-mongodb-poc3 systemd[1]: mongod.service: Failed with result 'signal'.
Feb 24 16:06:37 dev-mongodb-poc3 systemd[1]: mongod.service: Consumed 1.893s CPU time.
lines 1-13/13 (END)

root@dev-mongodb-poc3:~# vi /mongo/mongod.conf
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# systemctl restart mongod
root@dev-mongodb-poc3:~# systemctl status mongod
? mongod.service - MongoDB Database Server
     Loaded: loaded (/lib/systemd/system/mongod.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:07:14 IST; 2s ago
       Docs: https://docs.mongodb.org/manual
   Main PID: 3885994 (mongod)
     Memory: 184.8M
        CPU: 1.081s
     CGroup: /system.slice/mongod.service
             +-3885994 /mongo/bin/mongod --config /mongo/mongod.conf

Feb 24 16:07:14 dev-mongodb-poc3 systemd[1]: Started MongoDB Database Server.
Feb 24 16:07:14 dev-mongodb-poc3 mongod[3885994]: {"t":{"$date":"2025-02-24T10:37:14.711Z"},"s":"I",  "c":"CONTROL",  "id":7484500, "ctx":"main","msg":"Enviro>
lines 1-12/12 (END)

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# client_loop: send disconnect: Connection reset by peer
                                                                                                                                                              ?

 ? 2025-02-24 ? ? 16:33.17 ? ? /home/mobaxterm ?
                                                                                                                                                              ?


 ? 2025-02-24 ? ? 16:50.51 ? ? /home/mobaxterm ?
                                                                                                                                                              ?


 ? 2025-02-24 ? ? 16:50.51 ? ? /home/mobaxterm ?
                                                                                                                                                              ?

 ? 2025-02-24 ? ? 16:50.52 ? ? /home/mobaxterm ? ssh touadmin@192.168.61.138
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-126-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Mon Feb 24 04:51:00 PM IST 2025

  System load:  0.0                Processes:              210
  Usage of /:   31.0% of 47.88GB   Users logged in:        0
  Memory usage: 13%                IPv4 address for ens34: 192.168.61.138
  Swap usage:   0%

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

39 updates can be applied immediately.
To see these additional updates run: apt list --upgradable

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status

New release '24.04.2 LTS' available.
Run 'do-release-upgrade' to upgrade to it.


*** System restart required ***
Last login: Mon Feb 24 16:01:02 2025 from 192.168.62.60
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$
touadmin@dev-mongodb-poc3:~$ sudo su -
[sudo] password for touadmin:
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# systemctl status mongod
? mongod.service - MongoDB Database Server
     Loaded: loaded (/lib/systemd/system/mongod.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:07:14 IST; 44min ago
       Docs: https://docs.mongodb.org/manual
   Main PID: 3885994 (mongod)
     Memory: 236.9M
        CPU: 45.594s
     CGroup: /system.slice/mongod.service
             +-3885994 /mongo/bin/mongod --config /mongo/mongod.conf

Feb 24 16:07:14 dev-mongodb-poc3 systemd[1]: Started MongoDB Database Server.
Feb 24 16:07:14 dev-mongodb-poc3 mongod[3885994]: {"t":{"$date":"2025-02-24T10:37:14.711Z"},"s":"I",  "c":"CONTROL",  "id":7484500, "ctx":"main","msg":"Enviro>

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 16:03:23 IST; 48min ago
   Main PID: 3885828 (mongodb_exporte)
      Tasks: 8 (limit: 9351)
     Memory: 6.0M
        CPU: 893ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3885828 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017

Feb 24 16:50:31 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:50:31+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:50:31 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:50:31+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:50:46 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:50:46+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:50:46 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:50:46+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:51:01 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:51:01+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:51:01 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:51:01+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:51:16 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:51:16+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:51:16 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:51:16+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 16:51:31 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:51:31+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 16:51:31 dev-mongodb-poc3 mongodb_exporter[3885828]: time="2025-02-24T16:51:31+05:30" level=error msg="Can't create mongo session to mongodb://****:***>

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# ps -ef | grepmongo
grepmongo: command not found
root@dev-mongodb-poc3:~# ps -ef | grep mongo
root     3885828       1  0 16:03 ?        00:00:00 /usr/local/bin/mongodb_exporter --mongodb.uri=mongodb://promusr:p60mUsr@localhost:27017
mongodb  3885994       1  1 16:07 ?        00:00:45 /mongo/bin/mongod --config /mongo/mongod.conf
root     3886660 3886623  0 16:51 pts/1    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# env | grep mongodb
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# export MONGODB_URI=mongodb://promusr:p60mUsr@localhost:27017
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# mongosh -u superAdmin -p --host localhost
Enter password: **********
Current Mongosh Log ID: 67bc574fdef9283148c1c18b
Connecting to:          mongodb://<credentials>@localhost:27017/?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.3.3
Using MongoDB:          8.0.3
Using Mongosh:          2.3.3
mongosh 2.4.0 is available for download: https://www.mongodb.com/try/download/shell

For mongosh info see: https://www.mongodb.com/docs/mongodb-shell/

------
   The server generated these startup warnings when booting
   2025-02-24T16:07:16.951+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-24T16:07:16.951+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-24T16:07:16.951+05:30: We suggest setting the contents of sysfsFile to 0.
   2025-02-24T16:07:16.951+05:30: vm.max_map_count is too low
   2025-02-24T16:07:16.951+05:30: We suggest setting swappiness to 0 or 1, as swapping can cause performance problems.
------

mongopoc_rs0 [direct: secondary] test> exit
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# export MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 17:00:51 IST; 6s ago
   Main PID: 3886821 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.4M
        CPU: 8ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3886821 /usr/local/bin/mongodb_exporter "--mongodb.uri=\$MONGODB_URI"

Feb 24 17:00:51 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=error msg="Cannot connect to server using url $MONGODB_URI:>
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=error msg="Can't create mongo session to $MONGODB_URI" sour>
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
 ESCOC

ndor preset: enabled)






_URI"


:00:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exp>
:00:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
:00:51+05:30" level=error msg="Cannot connect to server using url $MONGODB_URI: no reachable servers" source="connection.go:86"
:00:51+05:30" level=error msg="Can't create mongo session to $MONGODB_URI" source="mongodb_collector.go:202"
:00:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
 ESCOD
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 17:00:51 IST; 6s ago
   Main PID: 3886821 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.4M
        CPU: 8ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3886821 /usr/local/bin/mongodb_exporter "--mongodb.uri=\$MONGODB_URI"

Feb 24 17:00:51 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=error msg="Cannot connect to server using url $MONGODB_URI:>
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=error msg="Can't create mongo session to $MONGODB_URI" sour>
Feb 24 17:00:51 dev-mongodb-poc3 mongodb_exporter[3886821]: time="2025-02-24T17:00:51+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~

root@dev-mongodb-poc3:~# ps -ef | grep mongo
mongodb  3885994       1  1 16:07 ?        00:00:56 /mongo/bin/mongod --config /mongo/mongod.conf
root     3886821       1  0 17:00 ?        00:00:00 /usr/local/bin/mongodb_exporter --mongodb.uri=$MONGODB_URI
root     3886839 3886623  0 17:02 pts/1    00:00:00 grep --color=auto mongo
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# cat /mongo/mongod.conf
storage:
  dbPath: /mongo/data
systemLog:
  destination: file
  path: /mongo/logs/mongod.log
  logAppend: true

net:
 bindIp: 127.0.0.1, 192.168.61.138
 port: 27017
 #tls:
 # mode: requireTLS
 # certificateKeyFile: /etc/mongo/ssl/fullchain.pem
 # CAFile: /etc/mongo/ssl/ca.crt
 # allowInvalidHostnames: true
 # allowInvalidCertificates: true

security:
  authorization: enabled
  keyFile: /mongo/mongo-keyfile

replication:
  replSetName: mongopoc_rs0

processManagement:
  timeZoneInfo: /usr/share/zoneinfo

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# env | grep mongodb
MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.135:27017,192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# export MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0
root@dev-mongodb-poc3:~# env | grep mongodb
MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0
root@dev-mongodb-poc3:~# mongosh MONGODB_URI
Current Mongosh Log ID: 67bc59e108aa4e10c9c1c18b
Connecting to:          mongodb://127.0.0.1:27017/MONGODB_URI?directConnection=true&serverSelectionTimeoutMS=2000&appName=mongosh+2.3.3
Using MongoDB:          8.0.3
Using Mongosh:          2.3.3
mongosh 2.4.0 is available for download: https://www.mongodb.com/try/download/shell

For mongosh info see: https://www.mongodb.com/docs/mongodb-shell/

mongopoc_rs0 [direct: secondary] MONGODB_URI>

mongopoc_rs0 [direct: secondary] MONGODB_URI>

mongopoc_rs0 [direct: secondary] MONGODB_URI>

mongopoc_rs0 [direct: secondary] MONGODB_URI> show dbs
MongoServerError[Unauthorized]: Command listDatabases requires authentication
mongopoc_rs0 [direct: secondary] MONGODB_URI> exit
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# mongosh $MONGODB_URI
Current Mongosh Log ID: 67bc5a1a0a96ce3e46c1c18b
Connecting to:          mongodb://<credentials>@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0&appName=mongosh+2.3.3
Using MongoDB:          8.0.3
Using Mongosh:          2.3.3
mongosh 2.4.0 is available for download: https://www.mongodb.com/try/download/shell

For mongosh info see: https://www.mongodb.com/docs/mongodb-shell/

------
   The server generated these startup warnings when booting
   2025-02-24T15:22:00.421+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-24T15:22:00.421+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-24T15:22:00.421+05:30: We suggest setting the contents of sysfsFile to 0.
   2025-02-24T15:22:00.421+05:30: vm.max_map_count is too low
   2025-02-24T15:22:00.421+05:30: We suggest setting swappiness to 0 or 1, as swapping can cause performance problems.
------

mongopoc_rs0 [primary] test> exit
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# /usr/local/bin/mongodb_exporter --mongodb.uri=$MONGODB_URI
INFO[0000] Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)  source="mongodb_exporter.go:106"
INFO[0000] Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)  source="mongodb_exporter.go:107"
ERRO[0000] Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017: no reachable servers  source="connection.go:86"
ERRO[0000] Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017  source="mongodb_collector.go:202"
INFO[0000] Starting HTTP server for http://:9216/metrics ...  source="server.go:121"
FATA[0000] listen tcp :9216: bind: address already in use  source="server.go:122"
root@dev-mongodb-poc3:~# telnet 192.168.61.137 27017
Trying 192.168.61.137...
Connected to 192.168.61.137.
Escape character is '^]'.
^C^[6^^^^C^Z^ZConnection closed by foreign host.
root@dev-mongodb-poc3:~# telnet 192.168.61.138 27017
Trying 192.168.61.138...
Connected to 192.168.61.138.
Escape character is '^]'.
^[^[
^C^Z^ZConnection closed by foreign host.
root@dev-mongodb-poc3:~# sudo lsof -i :9216
COMMAND       PID       USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
prometheu 3883199 prometheus   54u  IPv4 16433614      0t0  TCP dev-mongodb-poc3:50150->dev-mongodb-poc3:9216 (ESTABLISHED)
mongodb_e 3886821       root    3u  IPv6 16433555      0t0  TCP *:9216 (LISTEN)
mongodb_e 3886821       root    5u  IPv6 16433615      0t0  TCP dev-mongodb-poc3:9216->dev-mongodb-poc3:50150 (ESTABLISHED)
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# kill -9 3886821
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9216
COMMAND       PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
mongodb_e 3888965 root    3u  IPv6 16441432      0t0  TCP *:9216 (LISTEN)
root@dev-mongodb-poc3:~# kill -9 3888965
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 17:20:02 IST; 7s ago
   Main PID: 3889035 (mongodb_exporte)
      Tasks: 5 (limit: 9351)
     Memory: 1.5M
        CPU: 8ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3889035 /usr/local/bin/mongodb_exporter "--mongodb.uri=\$MONGODB_URI"

Feb 24 17:20:02 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 17:20:02 dev-mongodb-poc3 mongodb_exporter[3889035]: time="2025-02-24T17:20:02+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 17:20:02 dev-mongodb-poc3 mongodb_exporter[3889035]: time="2025-02-24T17:20:02+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 17:20:02 dev-mongodb-poc3 mongodb_exporter[3889035]: time="2025-02-24T17:20:02+05:30" level=error msg="Cannot connect to server using url $MONGODB_URI:>
Feb 24 17:20:02 dev-mongodb-poc3 mongodb_exporter[3889035]: time="2025-02-24T17:20:02+05:30" level=error msg="Can't create mongo session to $MONGODB_URI" sour>
Feb 24 17:20:02 dev-mongodb-poc3 mongodb_exporter[3889035]: time="2025-02-24T17:20:02+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ...>
 ESCOC

ndor preset: enabled)






_URI"


:20:02+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)" source="mongodb_exp>
:20:02+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)" source="mongodb_exporter.go:107"
:20:02+05:30" level=error msg="Cannot connect to server using url $MONGODB_URI: no reachable servers" source="connection.go:86"
:20:02+05:30" level=error msg="Can't create mongo session to $MONGODB_URI" source="mongodb_collector.go:202"
:20:02+05:30" level=info msg="Starting HTTP server for http://:9216/metrics ..." source="server.go:121"
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# /usr/local/bin/mongodb_exporter --mongodb.uri=$MONGODB_URI
INFO[0000] Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)  source="mongodb_exporter.go:106"
INFO[0000] Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)  source="mongodb_exporter.go:107"
ERRO[0000] Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017: no reachable servers  source="connection.go:86"
ERRO[0000] Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017  source="mongodb_collector.go:202"
INFO[0000] Starting HTTP server for http://:9216/metrics ...  source="server.go:121"
FATA[0000] listen tcp :9216: bind: address already in use  source="server.go:122"
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# telnet 192.168.61.137 27017
Trying 192.168.61.137...
Connected to 192.168.61.137.
Escape character is '^]'.
^X
^Z^Z^CConnection closed by foreign host.
root@dev-mongodb-poc3:~# telnet 192.168.61.138 27017
Trying 192.168.61.138...
Connected to 192.168.61.138.
Escape character is '^]'.
^X^C^C^C^ZConnection closed by foreign host.
root@dev-mongodb-poc3:~# env | grep mongodb
MONGODB_URI=mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0
root@dev-mongodb-poc3:~# mongo mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0
Command 'mongo' not found, did you mean:
  command 'mono' from deb mono-runtime (6.8.0.105+dfsg-3.2)
Try: apt install <deb name>
root@dev-mongodb-poc3:~# mongosh mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0
Current Mongosh Log ID: 67bc5d761e89b95866c1c18b
Connecting to:          mongodb://<credentials>@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0&appName=mongosh+2.3.3
Using MongoDB:          8.0.3
Using Mongosh:          2.3.3
mongosh 2.4.0 is available for download: https://www.mongodb.com/try/download/shell

For mongosh info see: https://www.mongodb.com/docs/mongodb-shell/

------
   The server generated these startup warnings when booting
   2025-02-24T15:22:00.421+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-24T15:22:00.421+05:30: For customers running the current memory allocator, we suggest changing the contents of the following sysfsFile
   2025-02-24T15:22:00.421+05:30: We suggest setting the contents of sysfsFile to 0.
   2025-02-24T15:22:00.421+05:30: vm.max_map_count is too low
   2025-02-24T15:22:00.421+05:30: We suggest setting swappiness to 0 or 1, as swapping can cause performance problems.
------

mongopoc_rs0 [primary] test> exit
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# /usr/local/bin/mongodb_exporter --mongodb.uri="mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0"
INFO[0000] Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)  source="mongodb_exporter.go:106"
INFO[0000] Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)  source="mongodb_exporter.go:107"
ERRO[0000] Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017: no reachable servers  source="connection.go:86"
ERRO[0000] Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017  source="mongodb_collector.go:202"
INFO[0000] Starting HTTP server for http://:9216/metrics ...  source="server.go:121"
FATA[0000] listen tcp :9216: bind: address already in use  source="server.go:122"
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9216
COMMAND       PID       USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
prometheu 3883199 prometheus   54u  IPv4 16440542      0t0  TCP dev-mongodb-poc3:60824->dev-mongodb-poc3:9216 (ESTABLISHED)
mongodb_e 3889035       root    3u  IPv6 16440522      0t0  TCP *:9216 (LISTEN)
mongodb_e 3889035       root    5u  IPv6 16440543      0t0  TCP dev-mongodb-poc3:9216->dev-mongodb-poc3:60824 (ESTABLISHED)
root@dev-mongodb-poc3:~# sudo kill 3889035
root@dev-mongodb-poc3:~# /usr/local/bin/mongodb_exporter --mongodb.uri="mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017/?replicaSet=mongopoc_rs0" --web.listen-address=:9220
INFO[0000] Starting mongodb_exporter (version=0.7.1, branch=v0.7.1, revision=3002738d50f689c8204f70f6cceb8150b98fa869)  source="mongodb_exporter.go:106"
INFO[0000] Build context (go=go1.11.10, user=travis@build.travis-ci.org, date=20190611-18:50:27)  source="mongodb_exporter.go:107"
ERRO[0000] Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017: no reachable servers  source="connection.go:86"
ERRO[0000] Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017  source="mongodb_collector.go:202"
INFO[0000] Starting HTTP server for http://:9220/metrics ...  source="server.go:121"

ERRO[0096] Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017: no reachable servers  source="connection.go:86"
ERRO[0096] Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017  source="mongodb_collector.go:202"

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9220
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo vi /lib/systemd/system/mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl daemon-reload
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 17:29:35 IST; 6s ago
   Main PID: 3889341 (mongodb_exporte)
      Tasks: 6 (limit: 9351)
     Memory: 1.5M
        CPU: 9ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3889341 /usr/local/bin/mongodb_exporter "--mongodb.uri=mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017>

Feb 24 17:29:35 dev-mongodb-poc3 systemd[1]: Started MongoDB Exporter.
Feb 24 17:29:35 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:35+05:30" level=info msg="Starting mongodb_exporter (version=0.7.1, branch=>
Feb 24 17:29:35 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:35+05:30" level=info msg="Build context (go=go1.11.10, user=travis@build.tr>
Feb 24 17:29:35 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:35+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 17:29:35 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:35+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 17:29:35 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:35+05:30" level=info msg="Starting HTTP server for http://:9220/metrics ...>

root@dev-mongodb-poc3:~# sudo systemctl status mongodb_exporter.service
? mongodb_exporter.service - MongoDB Exporter
     Loaded: loaded (/lib/systemd/system/mongodb_exporter.service; disabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 17:29:35 IST; 45s ago
   Main PID: 3889341 (mongodb_exporte)
      Tasks: 7 (limit: 9351)
     Memory: 5.6M
        CPU: 53ms
     CGroup: /system.slice/mongodb_exporter.service
             +-3889341 /usr/local/bin/mongodb_exporter "--mongodb.uri=mongodb://promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017>

Feb 24 17:29:51 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:51+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 17:29:51 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:51+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 17:29:52 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:52+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 17:29:52 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:52+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 17:29:53 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:53+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 17:29:53 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:53+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 17:29:53 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:53+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 17:29:53 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:29:53+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
Feb 24 17:30:01 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:30:01+05:30" level=error msg="Cannot connect to server using url mongodb://***>
Feb 24 17:30:01 dev-mongodb-poc3 mongodb_exporter[3889341]: time="2025-02-24T17:30:01+05:30" level=error msg="Can't create mongo session to mongodb://****:***>
 ESCOC

ndor preset: enabled)






/promusr:p60mUsr@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017/?replicaSet=mongopoc_rs0" --web.listen-address=:9220

:29:51+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017: no reach>
:29:51+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017" source="mongo>
:29:52+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017: no reach>
:29:52+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017" source="mongo>
:29:53+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017: no reach>
:29:53+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017" source="mongo>
:29:53+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017: no reach>
:29:53+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017" source="mongo>
:30:01+05:30" level=error msg="Cannot connect to server using url mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017: no reach>
:30:01+05:30" level=error msg="Can't create mongo session to mongodb://****:****@192.168.61.137:27017,192.168.61.138:27017,192.168.61.135:27017" source="mongo>
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~
~

root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9220
COMMAND       PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
mongodb_e 3889341 root    3u  IPv6 16442653      0t0  TCP *:9220 (LISTEN)
mongodb_e 3889341 root    5u  IPv6 16442671      0t0  TCP dev-mongodb-poc3:9220->192.168.62.60:57773 (ESTABLISHED)
mongodb_e 3889341 root    6u  IPv6 16442678      0t0  TCP dev-mongodb-poc3:9220->192.168.62.60:57774 (ESTABLISHED)
mongodb_e 3889341 root    7u  IPv6 16444110      0t0  TCP dev-mongodb-poc3:9220->192.168.62.60:57775 (ESTABLISHED)
root@dev-mongodb-poc3:~# sudo systemctl stop mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl stop mongodb_exporter.service
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo lsof -i :9220
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo systemctl restart mongodb_exporter.service
root@dev-mongodb-poc3:~# sudo lsof -i :9220
COMMAND       PID USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
mongodb_e 3889393 root    3u  IPv6 16442952      0t0  TCP *:9220 (LISTEN)
mongodb_e 3889393 root    5u  IPv6 16442954      0t0  TCP dev-mongodb-poc3:9220->192.168.62.60:57840 (ESTABLISHED)
mongodb_e 3889393 root    6u  IPv6 16444425      0t0  TCP dev-mongodb-poc3:9220->192.168.62.60:57838 (ESTABLISHED)
mongodb_e 3889393 root    7u  IPv6 16444426      0t0  TCP dev-mongodb-poc3:9220->192.168.62.60:57839 (ESTABLISHED)
root@dev-mongodb-poc3:~# cd ~
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# sudo curl http://localhost:9220
<html>
<head>
        <title>MongoDB exporter</title>
</head>
<body>
        <h1>MongoDB exporter</h1>
        <p><a href="/metrics">Metrics</a></p>
</body>
</html>root@dev-mongodb-poc3:~# sudo curl http://localhost:9220/metrics
# HELP go_gc_duration_seconds A summary of the GC invocation durations.
# TYPE go_gc_duration_seconds summary
go_gc_duration_seconds{quantile="0"} 0
go_gc_duration_seconds{quantile="0.25"} 0
go_gc_duration_seconds{quantile="0.5"} 0
go_gc_duration_seconds{quantile="0.75"} 0
go_gc_duration_seconds{quantile="1"} 0
go_gc_duration_seconds_sum 0
go_gc_duration_seconds_count 0
# HELP go_goroutines Number of goroutines that currently exist.
# TYPE go_goroutines gauge
go_goroutines 20
# HELP go_memstats_alloc_bytes Number of bytes allocated and still in use.
# TYPE go_memstats_alloc_bytes gauge
go_memstats_alloc_bytes 1.872496e+06
# HELP go_memstats_alloc_bytes_total Total number of bytes allocated, even if freed.
# TYPE go_memstats_alloc_bytes_total counter
go_memstats_alloc_bytes_total 1.872496e+06
# HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table.
# TYPE go_memstats_buck_hash_sys_bytes gauge
go_memstats_buck_hash_sys_bytes 1.443598e+06
# HELP go_memstats_frees_total Total number of frees.
# TYPE go_memstats_frees_total counter
go_memstats_frees_total 675
# HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata.
# TYPE go_memstats_gc_sys_bytes gauge
go_memstats_gc_sys_bytes 2.234368e+06
# HELP go_memstats_heap_alloc_bytes Number of heap bytes allocated and still in use.
# TYPE go_memstats_heap_alloc_bytes gauge
go_memstats_heap_alloc_bytes 1.872496e+06
# HELP go_memstats_heap_idle_bytes Number of heap bytes waiting to be used.
# TYPE go_memstats_heap_idle_bytes gauge
go_memstats_heap_idle_bytes 6.3913984e+07
# HELP go_memstats_heap_inuse_bytes Number of heap bytes that are in use.
# TYPE go_memstats_heap_inuse_bytes gauge
go_memstats_heap_inuse_bytes 2.736128e+06
# HELP go_memstats_heap_objects Number of allocated objects.
# TYPE go_memstats_heap_objects gauge
go_memstats_heap_objects 7181
# HELP go_memstats_heap_released_bytes_total Total number of heap bytes released to OS.
# TYPE go_memstats_heap_released_bytes_total counter
go_memstats_heap_released_bytes_total 0
# HELP go_memstats_heap_sys_bytes Number of heap bytes obtained from system.
# TYPE go_memstats_heap_sys_bytes gauge
go_memstats_heap_sys_bytes 6.6650112e+07
# HELP go_memstats_last_gc_time_seconds Number of seconds since 1970 of last garbage collection.
# TYPE go_memstats_last_gc_time_seconds gauge
go_memstats_last_gc_time_seconds 0
# HELP go_memstats_lookups_total Total number of pointer lookups.
# TYPE go_memstats_lookups_total counter
go_memstats_lookups_total 0
# HELP go_memstats_mallocs_total Total number of mallocs.
# TYPE go_memstats_mallocs_total counter
go_memstats_mallocs_total 7856
# HELP go_memstats_mcache_inuse_bytes Number of bytes in use by mcache structures.
# TYPE go_memstats_mcache_inuse_bytes gauge
go_memstats_mcache_inuse_bytes 3456
# HELP go_memstats_mcache_sys_bytes Number of bytes used for mcache structures obtained from system.
# TYPE go_memstats_mcache_sys_bytes gauge
go_memstats_mcache_sys_bytes 16384
# HELP go_memstats_mspan_inuse_bytes Number of bytes in use by mspan structures.
# TYPE go_memstats_mspan_inuse_bytes gauge
go_memstats_mspan_inuse_bytes 28576
# HELP go_memstats_mspan_sys_bytes Number of bytes used for mspan structures obtained from system.
# TYPE go_memstats_mspan_sys_bytes gauge
go_memstats_mspan_sys_bytes 32768
# HELP go_memstats_next_gc_bytes Number of heap bytes when next garbage collection will take place.
# TYPE go_memstats_next_gc_bytes gauge
go_memstats_next_gc_bytes 4.473924e+06
# HELP go_memstats_other_sys_bytes Number of bytes used for other system allocations.
# TYPE go_memstats_other_sys_bytes gauge
go_memstats_other_sys_bytes 793066
# HELP go_memstats_stack_inuse_bytes Number of bytes in use by the stack allocator.
# TYPE go_memstats_stack_inuse_bytes gauge
go_memstats_stack_inuse_bytes 458752
# HELP go_memstats_stack_sys_bytes Number of bytes obtained from system for stack allocator.
# TYPE go_memstats_stack_sys_bytes gauge
go_memstats_stack_sys_bytes 458752
# HELP go_memstats_sys_bytes Number of bytes obtained by system. Sum of all system allocations.
# TYPE go_memstats_sys_bytes gauge
go_memstats_sys_bytes 7.1629048e+07
# HELP mongodb_exporter_build_info A metric with a constant '1' value labeled by version, revision, branch, and goversion from which mongodb_exporter was built.
# TYPE mongodb_exporter_build_info gauge
mongodb_exporter_build_info{branch="v0.7.1",goversion="go1.11.10",revision="3002738d50f689c8204f70f6cceb8150b98fa869",version="0.7.1"} 1
# HELP mongodb_exporter_last_scrape_duration_seconds Duration of the last scrape of metrics from MongoDB.
# TYPE mongodb_exporter_last_scrape_duration_seconds gauge
mongodb_exporter_last_scrape_duration_seconds 0.002272395
# HELP mongodb_exporter_last_scrape_error Whether the last scrape of metrics from MongoDB resulted in an error (1 for error, 0 for success).
# TYPE mongodb_exporter_last_scrape_error gauge
mongodb_exporter_last_scrape_error 1
# HELP mongodb_exporter_scrape_errors_total Total number of times an error occurred scraping a MongoDB.
# TYPE mongodb_exporter_scrape_errors_total counter
mongodb_exporter_scrape_errors_total 3
# HELP mongodb_exporter_scrapes_total Total number of times MongoDB was scraped for metrics.
# TYPE mongodb_exporter_scrapes_total counter
mongodb_exporter_scrapes_total 3
# HELP mongodb_up Whether MongoDB is up.
# TYPE mongodb_up gauge
mongodb_up 0
# HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.
# TYPE process_cpu_seconds_total counter
process_cpu_seconds_total 0.01
# HELP process_max_fds Maximum number of open file descriptors.
# TYPE process_max_fds gauge
process_max_fds 1024
# HELP process_open_fds Number of open file descriptors.
# TYPE process_open_fds gauge
process_open_fds 10
# HELP process_resident_memory_bytes Resident memory size in bytes.
# TYPE process_resident_memory_bytes gauge
process_resident_memory_bytes 9.531392e+06
# HELP process_start_time_seconds Start time of the process since unix epoch in seconds.
# TYPE process_start_time_seconds gauge
process_start_time_seconds 1.74039849796e+09
# HELP process_virtual_memory_bytes Virtual memory size in bytes.
# TYPE process_virtual_memory_bytes gauge
process_virtual_memory_bytes 1.15974144e+08
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~#
root@dev-mongodb-poc3:~# cd /etc/prometheus/
root@dev-mongodb-poc3:/etc/prometheus# sudo vi  prometheus.yml
root@dev-mongodb-poc3:/etc/prometheus# sudo systemctl restart prometheus
root@dev-mongodb-poc3:/etc/prometheus# sudo systemctl status prometheus
? prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 17:35:37 IST; 51s ago
   Main PID: 3889447 (prometheus)
      Tasks: 7 (limit: 9351)
     Memory: 23.1M
        CPU: 158ms
     CGroup: /system.slice/prometheus.service
             +-3889447 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/ --web.console.templates>

Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.125Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.129Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.129Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.129Z caller=head.go:719 level=info component=tsdb msg="WAL replay completed" chec>
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.133Z caller=main.go:1014 level=info fs_type=EXT4_SUPER_MAGIC
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.133Z caller=main.go:1017 level=info msg="TSDB started"
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.133Z caller=main.go:1197 level=info msg="Loading configuration file" filename=/et>
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.134Z caller=main.go:1234 level=info msg="Completed loading of configuration file">
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.134Z caller=main.go:978 level=info msg="Server is ready to receive web requests."
Feb 24 17:35:37 dev-mongodb-poc3 prometheus[3889447]: ts=2025-02-24T12:05:37.134Z caller=manager.go:944 level=info component="rule manager" msg="Starting rule>

root@dev-mongodb-poc3:/etc/prometheus# cat /etc/prometheus/prometheus.yml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ["192.168.61.138:9090","192.168.61.138:9220"]

  - job_name: 'node'
    static_configs:
      - targets: ['192.168.61.138:9216']
root@dev-mongodb-poc3:/etc/prometheus# sudo vi /etc/systemd/system/prometheus.service
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# vi /etc/prometheus/prometheus.yml
root@dev-mongodb-poc3:/etc/prometheus# sudo systemctl restart prometheus
root@dev-mongodb-poc3:/etc/prometheus# sudo systemctl status prometheus
? prometheus.service - Prometheus
     Loaded: loaded (/etc/systemd/system/prometheus.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-02-24 17:43:13 IST; 5s ago
   Main PID: 3889543 (prometheus)
      Tasks: 7 (limit: 9351)
     Memory: 22.5M
        CPU: 153ms
     CGroup: /system.slice/prometheus.service
             +-3889543 /usr/local/bin/prometheus --config.file=/etc/prometheus/prometheus.yml --storage.tsdb.path=/var/lib/prometheus/ --web.console.templates>

Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.810Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.813Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.816Z caller=head.go:682 level=info component=tsdb msg="WAL segment loaded" segmen>
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.816Z caller=head.go:719 level=info component=tsdb msg="WAL replay completed" chec>
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.821Z caller=main.go:1014 level=info fs_type=EXT4_SUPER_MAGIC
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.821Z caller=main.go:1017 level=info msg="TSDB started"
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.822Z caller=main.go:1197 level=info msg="Loading configuration file" filename=/et>
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.822Z caller=main.go:1234 level=info msg="Completed loading of configuration file">
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.823Z caller=main.go:978 level=info msg="Server is ready to receive web requests."
Feb 24 17:43:13 dev-mongodb-poc3 prometheus[3889543]: ts=2025-02-24T12:13:13.823Z caller=manager.go:944 level=info component="rule manager" msg="Starting rule>

root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus#
root@dev-mongodb-poc3:/etc/prometheus# cd /lib/systemd/system/
root@dev-mongodb-poc3:/lib/systemd/system# sudo vi  mongodb_exporter.service
root@dev-mongodb-poc3:/lib/systemd/system# sudo curl http://localhost:9220/metrics
# HELP go_gc_duration_seconds A summary of the GC invocation durations.
# TYPE go_gc_duration_seconds summary
go_gc_duration_seconds{quantile="0"} 2.4567e-05
go_gc_duration_seconds{quantile="0.25"} 4.675e-05
go_gc_duration_seconds{quantile="0.5"} 8.8121e-05
go_gc_duration_seconds{quantile="0.75"} 0.000201963
go_gc_duration_seconds{quantile="1"} 0.001746772
go_gc_duration_seconds_sum 0.014758814
go_gc_duration_seconds_count 63
# HELP go_goroutines Number of goroutines that currently exist.
# TYPE go_goroutines gauge
go_goroutines 19
# HELP go_memstats_alloc_bytes Number of bytes allocated and still in use.
# TYPE go_memstats_alloc_bytes gauge
go_memstats_alloc_bytes 1.415992e+06
# HELP go_memstats_alloc_bytes_total Total number of bytes allocated, even if freed.
# TYPE go_memstats_alloc_bytes_total counter
go_memstats_alloc_bytes_total 1.86969184e+08
# HELP go_memstats_buck_hash_sys_bytes Number of bytes used by the profiling bucket hash table.
# TYPE go_memstats_buck_hash_sys_bytes gauge
go_memstats_buck_hash_sys_bytes 1.451902e+06
# HELP go_memstats_frees_total Total number of frees.
# TYPE go_memstats_frees_total counter
go_memstats_frees_total 330792
# HELP go_memstats_gc_sys_bytes Number of bytes used for garbage collection system metadata.
# TYPE go_memstats_gc_sys_bytes gauge
go_memstats_gc_sys_bytes 2.371584e+06
# HELP go_memstats_heap_alloc_bytes Number of heap bytes allocated and still in use.
# TYPE go_memstats_heap_alloc_bytes gauge
go_memstats_heap_alloc_bytes 1.415992e+06
# HELP go_memstats_heap_idle_bytes Number of heap bytes waiting to be used.
# TYPE go_memstats_heap_idle_bytes gauge
go_memstats_heap_idle_bytes 6.4126976e+07
# HELP go_memstats_heap_inuse_bytes Number of heap bytes that are in use.
# TYPE go_memstats_heap_inuse_bytes gauge
go_memstats_heap_inuse_bytes 2.424832e+06
# HELP go_memstats_heap_objects Number of allocated objects.
# TYPE go_memstats_heap_objects gauge
go_memstats_heap_objects 3473
# HELP go_memstats_heap_released_bytes_total Total number of heap bytes released to OS.
# TYPE go_memstats_heap_released_bytes_total counter
go_memstats_heap_released_bytes_total 0
# HELP go_memstats_heap_sys_bytes Number of heap bytes obtained from system.
# TYPE go_memstats_heap_sys_bytes gauge
go_memstats_heap_sys_bytes 6.6551808e+07
# HELP go_memstats_last_gc_time_seconds Number of seconds since 1970 of last garbage collection.
# TYPE go_memstats_last_gc_time_seconds gauge
go_memstats_last_gc_time_seconds 1.740401538774237e+09
# HELP go_memstats_lookups_total Total number of pointer lookups.
# TYPE go_memstats_lookups_total counter
go_memstats_lookups_total 0
# HELP go_memstats_mallocs_total Total number of mallocs.
# TYPE go_memstats_mallocs_total counter
go_memstats_mallocs_total 334265
# HELP go_memstats_mcache_inuse_bytes Number of bytes in use by mcache structures.
# TYPE go_memstats_mcache_inuse_bytes gauge
go_memstats_mcache_inuse_bytes 3456
# HELP go_memstats_mcache_sys_bytes Number of bytes used for mcache structures obtained from system.
# TYPE go_memstats_mcache_sys_bytes gauge
go_memstats_mcache_sys_bytes 16384
# HELP go_memstats_mspan_inuse_bytes Number of bytes in use by mspan structures.
# TYPE go_memstats_mspan_inuse_bytes gauge
go_memstats_mspan_inuse_bytes 29488
# HELP go_memstats_mspan_sys_bytes Number of bytes used for mspan structures obtained from system.
# TYPE go_memstats_mspan_sys_bytes gauge
go_memstats_mspan_sys_bytes 49152
# HELP go_memstats_next_gc_bytes Number of heap bytes when next garbage collection will take place.
# TYPE go_memstats_next_gc_bytes gauge
go_memstats_next_gc_bytes 4.194304e+06
# HELP go_memstats_other_sys_bytes Number of bytes used for other system allocations.
# TYPE go_memstats_other_sys_bytes gauge
go_memstats_other_sys_bytes 762234
# HELP go_memstats_stack_inuse_bytes Number of bytes in use by the stack allocator.
# TYPE go_memstats_stack_inuse_bytes gauge
go_memstats_stack_inuse_bytes 557056
# HELP go_memstats_stack_sys_bytes Number of bytes obtained from system for stack allocator.
# TYPE go_memstats_stack_sys_bytes gauge
go_memstats_stack_sys_bytes 557056
# HELP go_memstats_sys_bytes Number of bytes obtained by system. Sum of all system allocations.
# TYPE go_memstats_sys_bytes gauge
go_memstats_sys_bytes 7.176012e+07
# HELP mongodb_exporter_build_info A metric with a constant '1' value labeled by version, revision, branch, and goversion from which mongodb_exporter was built.
# TYPE mongodb_exporter_build_info gauge
mongodb_exporter_build_info{branch="v0.7.1",goversion="go1.11.10",revision="3002738d50f689c8204f70f6cceb8150b98fa869",version="0.7.1"} 1
# HELP mongodb_exporter_last_scrape_duration_seconds Duration of the last scrape of metrics from MongoDB.
# TYPE mongodb_exporter_last_scrape_duration_seconds gauge
mongodb_exporter_last_scrape_duration_seconds 0.001820612
# HELP mongodb_exporter_last_scrape_error Whether the last scrape of metrics from MongoDB resulted in an error (1 for error, 0 for success).
# TYPE mongodb_exporter_last_scrape_error gauge
mongodb_exporter_last_scrape_error 1
# HELP mongodb_exporter_scrape_errors_total Total number of times an error occurred scraping a MongoDB.
# TYPE mongodb_exporter_scrape_errors_total counter
mongodb_exporter_scrape_errors_total 192
# HELP mongodb_exporter_scrapes_total Total number of times MongoDB was scraped for metrics.
# TYPE mongodb_exporter_scrapes_total counter
mongodb_exporter_scrapes_total 192
# HELP mongodb_up Whether MongoDB is up.
# TYPE mongodb_up gauge
mongodb_up 0
# HELP process_cpu_seconds_total Total user and system CPU time spent in seconds.
# TYPE process_cpu_seconds_total counter
process_cpu_seconds_total 1.1
# HELP process_max_fds Maximum number of open file descriptors.
# TYPE process_max_fds gauge
process_max_fds 1024
# HELP process_open_fds Number of open file descriptors.
# TYPE process_open_fds gauge
process_open_fds 11
# HELP process_resident_memory_bytes Resident memory size in bytes.
# TYPE process_resident_memory_bytes gauge
process_resident_memory_bytes 1.4757888e+07
# HELP process_start_time_seconds Start time of the process since unix epoch in seconds.
# TYPE process_start_time_seconds gauge
process_start_time_seconds 1.74039849796e+09
# HELP process_virtual_memory_bytes Virtual memory size in bytes.
# TYPE process_virtual_memory_bytes gauge
process_virtual_memory_bytes 1.16105216e+08
root@dev-mongodb-poc3:/lib/systemd/system# sudo lsof -i :9220
COMMAND       PID       USER   FD   TYPE   DEVICE SIZE/OFF NODE NAME
mongodb_e 3889393       root    3u  IPv6 16442952      0t0  TCP *:9220 (LISTEN)
mongodb_e 3889393       root    5u  IPv6 16446466      0t0  TCP dev-mongodb-poc3:9220->dev-mongodb-poc3:37984 (ESTABLISHED)
prometheu 3889543 prometheus   64u  IPv4 16445738      0t0  TCP dev-mongodb-poc3:37984->dev-mongodb-poc3:9220 (ESTABLISHED)
root@dev-mongodb-poc3:/lib/systemd/system#
